// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/PublicNotification/setting/convert":function(){define(["dojo/_base/array"],function(e){return{unitCodesToLabels:function(k,l){var g=[];e.forEach(l,function(h){switch(h){case "CENTIMETERS":g.push(k.centimeters);break;case "INCHES":g.push(k.inches);break;case "FEET":g.push(k.feet);break;case "YARDS":g.push(k.yards);break;case "METERS":g.push(k.meters);break;case "KILOMETERS":g.push(k.kilometers);break;case "MILES":g.push(k.miles);break;default:g.push(h)}});return g},labelsToUnitCodes:function(k,
l){var g=[];e.forEach(l,function(h){switch(h){case k.centimeters:g.push("CENTIMETERS");break;case k.inches:g.push("INCHES");break;case k.feet:g.push("FEET");break;case k.yards:g.push("YARDS");break;case k.meters:g.push("METERS");break;case k.kilometers:g.push("KILOMETERS");break;case k.miles:g.push("MILES");break;default:g.push(h)}});return g},toolCodesToLabels:function(k,l){var g=[];e.forEach(l,function(h){switch(h){case "POINT":g.push(k.drawingToolsPoint);break;case "LINE":g.push(k.drawingToolsLine);
break;case "POLYLINE":g.push(k.drawingToolsPolyline);break;case "POLYGON":g.push(k.drawingToolsPolygon);break;case "FREEHAND_POLYGON":g.push(k.drawingToolsFreehandPolygon);break;default:g.push(h)}});return g},labelsToToolCodes:function(k,l){var g=[];e.forEach(l,function(h){switch(h){case k.drawingToolsPoint:g.push("POINT");break;case k.drawingToolsLine:g.push("LINE");break;case k.drawingToolsPolyline:g.push("POLYLINE");break;case k.drawingToolsPolygon:g.push("POLYGON");break;case k.drawingToolsFreehandPolygon:g.push("FREEHAND_POLYGON");
break;default:g.push(h)}});return g}}})},"widgets/PublicNotification/setting/SettingAddresseesBlock":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class ./settingComponents ./SettingCheckbox ./SettingContainer ./SettingObject ./SettingOptionsTable ./SettingStaticText".split(" "),function(e,k,l,g,h,c,a,b,f,n){return k(b,{_inputControl:null,_detailsDiv:null,_detailsTitle:null,_detailsCheckbox:null,_iCurrentDetails:-1,_menuItems:[],constructor:function(b,d,u){this.nls=
d;this._inputControl=new f(null,"half-width","",d.propertyLabels.name,null,d.hints.selectionListOfOptionsToDisplay,l.hitch(this,this._onRowSelected));this._detailsTitle=new n;this._detailsCheckbox=new c(null,d.propertyLabels.useRelatedRecords,"",l.hitch(this,this._checkboxChanged));this._detailsDiv=h.container("half-width optionsTableHeaderHeight","majorTrailingVertGap",[this._detailsTitle.div(),this._detailsCheckbox.div()]);this._mainDiv=(new a(null,"flexbox "+(u||""),"majorTrailingHorizGap",d.groupingLabels.addressSources,
"full-width",[this._inputControl,this._detailsDiv])).div()},setConfig:function(){var a,d;a=[this._config[0]];d=this._config.slice(1);this._menuItems=e.map(d,function(d){return d.name});this._menuItems=0<this._menuItems.length?[].concat(a,this._menuItems):[a];this._inputControl.setValue(this._menuItems);this._setDetails(0)},getConfig:function(a,d){var b=this._config.slice(1),c;this._menuItems=this._inputControl.getValue();c=[this._menuItems[0]];e.forEach(this._menuItems.slice(1),function(d){e.some(b,
function(a){d===a.name&&c.push(a)})});this._config=c;0>this._config[0].indexOf("1")&&d.push(this.nls.problems.noAddresseeLayers)},_setDetails:function(a){var d=this._config.length-1;0<=a&&a<d&&"boolean"===typeof this._config[a+1].useRelatedRecords?(g.remove(this._detailsDiv,"hidden"),this._detailsTitle.setValue(this._config[a+1].name),this._iCurrentDetails=a,this._detailsCheckbox.setValue(this._config[a+1].useRelatedRecords)):(g.add(this._detailsDiv,"hidden"),this._iCurrentDetails=-1)},_onRowSelected:function(a){var d=
a.innerText.trim();e.some(this._menuItems,l.hitch(this,function(a,b){return a===d?(this._setDetails(b-1),!0):!1}))},_checkboxChanged:function(a){0<=this._iCurrentDetails&&(this._config[this._iCurrentDetails+1].useRelatedRecords=a)}})})},"widgets/PublicNotification/setting/settingComponents":function(){define("dojo/_base/array dojo/dom-class dojo/dom-construct dojo/dom-style dijit/form/CheckBox dijit/form/NumberTextBox dijit/form/Select dijit/form/TextBox ../generalUtils ./SettingSimpleTable".split(" "),
function(e,k,l,g,h,c,a,b,f,n){var p={container:function(a,b,c){var d,f=p._createDiv(a||"");Array.isArray(c)&&0<c.length&&(d=c.length-1,e.forEach(c,function(a,c){l.place(a,f);c<d&&b&&k.add(a,b)}));return f},fieldsetContainer:function(a,b,c,f,q){var d,n=p._createDiv(b||""),u;b=l.create("fieldset",{"class":"fieldset"},n);a&&l.create("legend",{"class":"fieldsetLegend",innerHTML:a},b);u=p._createDiv(("fieldsetMainContainer "+(c||"")).trim(),b);Array.isArray(q)&&0<q.length&&(d=q.length-1,e.forEach(q,function(a,
b){l.place(a,u);b<d&&f&&k.add(a,f)}));return n},addTextButtonDropdownCtl:function(a,b,c){var d,f;a=p._createDiv(("addTextButton-button "+(a||"")).trim());d=p._createDiv("button",a);p._createSpan("button-text",d).innerHTML=b;b=f=l.create("ul",{"class":"addTextButton-menu"},a);e.forEach(c,function(a){l.create("li",{"class":"addTextButton-item",innerHTML:a},f)});return{div:a,ctl:b}},checkboxCtl:function(a,b){a=p._createDiv(a);b=new h({style:"margin-top: 3px;",checked:b});l.place(b.domNode,a);b.startup();
return{div:a,ctl:b}},dropdownCtl:function(a,b,c){a=p._createDiv(a);return{div:a,ctl:p.dropdown(a,b,c)}},dropdown:function(b,c,f){c=new a({options:f,"class":c});l.place(c.domNode,b);c.startup();return c},iconButton:function(a,b){a=p._createDiv(a);g.set(a,"display","inline-block");a.title=b;return a},numberInputCtl:function(a,b,f){a=p._createDiv(a);b={style:"width: 100%;",required:!0,placeHolder:b};f&&(b.constraints=f);f=new c(b);f.startup();l.place(f.domNode,a);return{div:a,ctl:f}},tableCtl:function(a,
b,c){a=p._createDiv(a);b=new n(b);b.placeAt(a);b.startup();Array.isArray(c)&&0<c.length&&b.addRows(c);return{div:a,ctl:b}},text:function(a,b){a=p._createDiv(a||"");a.innerHTML=f.sanitizeNoTags(b||"");return a},textButton:function(a,b,c){a=p._createDiv(("jimu-btn "+(a||"")).trim());a.innerHTML=b;c&&(a.title=c);return a},textInputCtl:function(a,c){var d;a=p._createDiv(a||"");d={style:"width:100%;"};c&&(d.placeholder=c);c=new b(d);c.startup();l.place(c.domNode,a);return{div:a,ctl:c}},_createSpan:function(a,
b){return p._createSpanDiv(!0,a,b)},_createDiv:function(a,b){return p._createSpanDiv(!1,a,b)},_createSpanDiv:function(a,b,c){var d={};b&&(d["class"]=b);a=l.create(a?"span":"div",d);c&&l.place(a,c);return a}};return p})},"widgets/PublicNotification/generalUtils":function(){define(["jimu/utils"],function(e){return{sanitizeNoTags:function(k){var l;l=e.sanitizeHTML(k);k=/<(?:!--(?:(?:-*[^->])*--+|-?)|script\b(?:[^"'>]|"[^"]*"|'[^']*')*>[\s\S]*?<\/script\s*|style\b(?:[^"'>]|"[^"]*"|'[^']*')*>[\s\S]*?<\/style\s*|\/?[a-z](?:[^"'>]|"[^"]*"|'[^']*')*)>/gi;
var g;do g=l,l=l.replace(k,"");while(l!==g);return l=l.replace(/</g,"\x26lt;").trim()}}})},"widgets/PublicNotification/setting/SettingSimpleTable":function(){define(["dojo/_base/declare","dojo/_base/html","jimu/dijit/SimpleTable"],function(e,k,l){return e(l,{_onRowMoved:null,constructor:function(g){},deleteRow:function(g){var h,c;g&&(h=this.getRowData(g),c=g.rowIndex,k.destroy(g),this.updateUI(),this._onDeleteRow(g,h,c))},_onDeleteRow:function(g,h,c){this.emit("row-delete",g,h,c)}})})},"widgets/PublicNotification/setting/SettingCheckbox":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/on","./settingComponents","./SettingObject"],function(e,k,l,g,h){return e(h,{_inputControl:null,constructor:function(c,a,b,f){c=[];var n;n=g.checkboxCtl("inline-block",!1);c.push(n.div);this._inputControl=n.ctl;f&&this.own(l(this._inputControl,"change",k.hitch(this,f)));b?c.push(g.container("variable-width","minorTrailingVertGap",[g.text("static-text",a),g.text("hint",b)])):c.push(g.text("static-text variable-width",a));this._mainDiv=g.container("full-width flexbox","minorTrailingHorizGap",
c)},setValue:function(c){this._inputControl&&this._inputControl.set("value",c)},getValue:function(){if(this._inputControl)return"on"===this._inputControl.get("value")},setConfig:function(){this._inputControl&&this._config&&this.setValue(this._config)},getConfig:function(c,a){this._inputControl&&(this._config=this.getValue())}})})},"widgets/PublicNotification/setting/SettingObject":function(){define(["dojo/_base/declare","dijit/Destroyable"],function(e,k){return e(k,{"-chains-":{setConfig:"after",
getConfig:"before"},_name:null,_config:null,_mainDiv:null,constructor:function(e){this._name=e},div:function(){return this._mainDiv},setConfig:function(e){this._name&&(this._config=e[this._name])},getConfig:function(e,g){this._name&&(e[this._name]=this._config)}})})},"widgets/PublicNotification/setting/SettingContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","./settingComponents","./SettingObject"],function(e,k,l,g,h){return k(h,{_contents:[],constructor:function(c,
a,b,f,n,h){Array.isArray(f)?(this._contents=f,this._mainDiv=g.container(a||"",b,this._getContentDivs(this._contents))):(this._contents=h,this._mainDiv=g.fieldsetContainer(f,n,a||"",b,this._getContentDivs(this._contents)))},setConfig:function(c){e.forEach(this._contents,l.hitch(this,function(a){a.setConfig(this._config||c)}))},getConfig:function(c,a){this._name&&(this._config={});e.forEach(this._contents,l.hitch(this,function(b){b.getConfig(this._config||c,a)}))},_getContentDivs:function(c){return e.map(c,
function(a){return a.div?a.div():a})}})})},"widgets/PublicNotification/setting/SettingOptionsTable":function(){define("dojo/_base/array dojo/_base/declare dojo/on dojo/query ./settingComponents ./SettingObject".split(" "),function(e,k,l,g,h,c){return k(c,{_inputControl:null,_isFlagged:!0,constructor:function(a,b,c,n,e,d,g,k,t){a=[];n=[{name:"selected",title:"",width:"32px",type:"checkbox",editable:!1},{name:"item",title:n,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"40px",
type:"actions",actions:["up","down"]}];"function"===typeof k&&(this._isFlagged=!1,n=n.slice(1),n[1].width="60px",n[1].actions.push("delete"));c=h.tableCtl(c,{autoHeight:!0,selectable:"function"===typeof g,fields:n},e);a.push(c.div);this._inputControl=c.ctl;g&&this.own(l(this._inputControl,"row-select",g));k&&this.own(l(this._inputControl,"row-delete",k));t&&(this.own(l(this._inputControl,"row-up",function(a){t(a,!0)})),this.own(l(this._inputControl,"row-down",function(a){t(a,!1)})));d&&a.push(h.text("hint",
d));this._mainDiv=h.container(b||"","minorTrailingVertGap",a)},addRowToTable:function(a){this._inputControl&&this._inputControl.addRow(a)},selectTableRow:function(a){(a=this._getRowTR(a))&&this._inputControl.selectRow(a)},renameTableRow:function(a,b){(a=this._getRowTR(a))&&this._inputControl.editRow(a,{item:b})},setValue:function(a){this._inputControl&&(this._inputControl.addRows(this._isFlagged?this._convertTableConfigToTableLines(a):a),this.selectTableRow(0))},getValue:function(){var a;return this._inputControl?
(a=this._inputControl.getData(),this._isFlagged?this._convertTableLinesToTableConfig(a):a):null},setConfig:function(){this._inputControl&&this._config&&this.setValue(this._config)},getConfig:function(a,b){this._inputControl&&(this._config=this.getValue())},_getRowTR:function(a){var b;return this._inputControl&&0<=a?(b=g(".simple-table-row",this._inputControl.domNode),a<b.length?b[a]:null):null},_convertTableConfigToTableLines:function(a){var b=a[0];return e.map(a.slice(1),function(a,c){return{item:a,
selected:"1"===b[c]}})},_convertTableLinesToTableConfig:function(a){var b="";a=e.map(a,function(a){b+=a.selected?"1":"0";return a.item});return a=[b].concat(a)}})})},"widgets/PublicNotification/setting/SettingStaticText":function(){define(["dojo/_base/declare","jimu/utils","./settingComponents","./SettingObject"],function(e,k,l,g){return e(g,{constructor:function(h,c,a){this._name="";this._mainDiv=l.text(c,a)},setValue:function(h){this._mainDiv.innerHTML=k.sanitizeHTML(h||"")},getValue:function(){return this._mainDiv.innerHTML}})})},
"widgets/PublicNotification/setting/SettingBufferBlock":function(){define("dojo/_base/declare dojo/_base/lang ./settingComponents ./SettingInputWithDropdownLabeled ./SettingObject ./SettingOptionsTable ./SettingStaticText".split(" "),function(e,k,l,g,h,c,a){return e(h,{_inputControlDistance:null,_inputControlTable:null,_defaultConfig:{bufferDistance:100,bufferUnits:"FEET",bufferUnitsMenu:"10100 FEET YARDS METERS KILOMETERS MILES".split(" ")},constructor:function(b,f,n,h,d,e,k,t,q){b=[];this._defaultConfig=
e;this._inputControlDistance=new g(null,!0,"full-width",h,d,k,t,q,null,"","",this._createLargeDistanceUnitsDropdownItemsList(),{min:0});b.push(this._inputControlDistance.div());this._inputControlTable=new c("bufferUnitsMenu","details-value","",f.propertyLabels.units,null,f.hints.selectionListOfOptionsToDisplay);b.push(l.container("full-width flexbox","minorTrailingHorizGap",[(new a(null,"details-label static-text",f.propertyLabels.bufferUnits)).div(),this._inputControlTable.div()]));this._mainDiv=
l.container(n||"","majorTrailingVertGap",b)},setValue:function(a){this._inputControl&&this._inputControl.set("value",a)},setConfig:function(){k.mixin({},this._defaultConfig,this._config);this._inputControlDistance&&this._inputControlTable&&(this._inputControlDistance.setValue(this._config.bufferDistance),this._inputControlDistance.setModifier(this._config.bufferUnits),this._inputControlTable.setConfig(this._config))},getConfig:function(a,c){this._inputControlDistance&&this._inputControlTable&&(this._config.bufferDistance=
this._inputControlDistance.getValue(),this._config.bufferUnits=this._inputControlDistance.getModifier(),this._inputControlTable.getConfig(this._config))},_createLargeDistanceUnitsDropdownItemsList:function(){return[{label:jimuNls.units.feet,value:"FEET"},{label:jimuNls.units.yards,value:"YARDS"},{label:jimuNls.units.meters,value:"METERS"},{label:jimuNls.units.kilometers,value:"KILOMETERS"},{label:jimuNls.units.miles,value:"MILES"}]}})})},"widgets/PublicNotification/setting/SettingInputWithDropdownLabeled":function(){define(["dojo/_base/declare",
"./SettingDropdown","./SettingInputLabeled","./SettingObject"],function(e,k,l,g){return e(g,{_inputControl:null,_inputModifier:null,constructor:function(h,c,a,b,f,n,e,d,g,r,t,q,m){this._inputModifier=new k(null,r,t,q);this._inputControl=new l(null,c,a,b,f,n,e,d,g,this._inputModifier,m);this._mainDiv=this._inputControl.div()},setValue:function(h){this._inputControl&&this._inputControl.setValue(h)},setModifier:function(h){this._inputModifier&&this._inputModifier.setValue(h)},getValue:function(){return this._inputControl?
this._inputControl.getValue():null},getModifier:function(){return this._inputModifier?this._inputModifier.getValue():null},setConfig:function(){this._inputControl&&this._config&&this.setValue(this._config)},getConfig:function(h,c){this._inputControl&&(this._config=this.getValue())}})})},"widgets/PublicNotification/setting/SettingDropdown":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","./settingComponents","./SettingObject"],function(e,k,l,g,h){return e(h,{_inputControl:null,
constructor:function(c,a,b,f){c=g.dropdownCtl(a,b,f);this._mainDiv=c.div;this._inputControl=c.ctl;this.own(l(this._inputControl,"change",k.hitch(this,this._onChange)))},setValue:function(c){this._inputControl&&this._inputControl.set("value",c)},getValue:function(){return this._inputControl?this._inputControl.get("value"):null},setConfig:function(){this._inputControl&&this._config&&this.setValue(this._config)},getConfig:function(c,a){this._inputControl&&(this._config=this.getValue())},_onChange:function(c){this._config=
c}})})},"widgets/PublicNotification/setting/SettingInputLabeled":function(){define(["dojo/_base/declare","./settingComponents","./SettingObject"],function(e,k,l){return e(l,{_inputControl:null,constructor:function(e,h,c,a,b,f,n,p,d,l,r){e=[];var g=[];d||l?(d&&("string"===typeof d?g.push(k.text("static-text",d)):g.push(d.div())),h=h?k.numberInputCtl("variable-width inline-block",n,r):k.textInputCtl("variable-width inline-block",n),g.push(h.div),this._inputControl=h.ctl,l&&("string"===typeof l?g.push(k.text("static-text",
l)):g.push(l.div())),e.push(k.container("full-width flexbox","minorTrailingHorizGap",g))):(h=h?k.numberInputCtl("full-width inline-block",n,r):k.textInputCtl("full-width inline-block",n),e.push(h.div),this._inputControl=h.ctl);p&&e.push(k.text("hint",p));this._mainDiv=k.container("flexbox "+(c||""),"minorTrailingHorizGap",[k.container("inline-block "+(a?a:""),"",[k.text("static-text",f)]),k.container("inline-block "+(b?b:""),"minorTrailingVertGap",e)])},setValue:function(e){this._inputControl&&this._inputControl.set("value",
e)},getValue:function(){return this._inputControl?this._inputControl.get("value"):null},setConfig:function(){this._inputControl&&this._config&&this.setValue(this._config)},getConfig:function(e,h){this._inputControl&&(this._config=this.getValue())}})})},"widgets/PublicNotification/setting/SettingCheckboxLabeled":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","./settingComponents","./SettingObject"],function(e,k,l,g,h){return e(h,{_inputControl:null,constructor:function(c,a,b,f,
n,e,d){c=[];var h;h=g.checkboxCtl("inline-block",!1);c.push(h.div);this._inputControl=h.ctl;d&&this.own(l(this._inputControl,"change",k.hitch(this,d)));e&&c.push(g.text("hint",e));this._mainDiv=g.container("flexbox "+(a||""),"minorTrailingHorizGap",[g.container("inline-block "+(b?b:""),"",[g.text("static-text",n)]),g.container("inline-block "+(f?f:""),"minorTrailingVertGap",c)])},setValue:function(c){this._inputControl&&this._inputControl.set("value",c)},getValue:function(){if(this._inputControl)return"on"===
this._inputControl.get("value")},setConfig:function(){this._inputControl&&this._config&&this.setValue(this._config)},getConfig:function(c,a){this._inputControl&&(this._config=this.getValue())}})})},"widgets/PublicNotification/setting/SettingLabelFormats":function(){define(["dojo/_base/array","dojo/_base/declare","./SettingContainer","./SettingObject","./SettingOptionsTable"],function(e,k,l,g,h){return k(g,{_inputControl:null,constructor:function(c,a,b){this.nls=a;this._inputControl=new h(null,"half-width",
"",a.propertyLabels.description,null,a.hints.selectionListOfOptionsToDisplay);this._mainDiv=(new l(null,"flexbox "+(b||""),"majorTrailingHorizGap",a.groupingLabels.labelFormats,"full-width",[this._inputControl])).div()},setConfig:function(){var c,a;c=[this._config[0]];a=this._config.slice(1);a=e.map(a,function(a){return a.name});a=0<a.length?[].concat(c,a):[c];this._inputControl.setValue(a)},getConfig:function(c,a){var b=this._config.slice(1),f;c=this._inputControl.getValue();f=[c[0]];e.forEach(c.slice(1),
function(a){e.some(b,function(b){a===b.name&&f.push(b)})});this._config=f;0>this._config[0].indexOf("1")&&a.push(this.nls.problems.noNotificationLabelFormats)}})})},"widgets/PublicNotification/setting/SettingSearchSourcesBlock":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/string ./convert ./QuerySourceSetting ./settingComponents ./SettingBoxedDivs ./SettingBufferBlock ./SettingCheckboxLabeled ./SettingContainer ./SettingDropdownLabeled ./SettingFieldListLabeled ./SettingInputLabeled ./SettingObject ./SettingOptionsTable ./SettingStaticText".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r,t,q,m,w,v,y){return k(w,{_inputControl:null,_mainControl:null,_detailsDiv:null,_detailsTitle:null,_detailsCheckbox:null,_sourceDisplay:null,_iCurrentSource:-1,_sourceMenuItems:[],_newSourceTypeMenuItems:[],_nls:null,_webmapFeatureLayers:[],_fieldListPicker:null,_displayFieldInput:null,constructor:function(a,b,d,f,y,e){this._nls=b;this._map=f;this._webmapFeatureLayers=y;this._portalUrl=e;this._newSourceTypeMenuItems=[b.groupingLabels.featureLayerDetails,b.groupingLabels.geocoderDetails];
this._inputControl=new v(null,"third-width","",b.propertyLabels.name,null,"",l.hitch(this,this._onRowSelected),l.hitch(this,this._onRowDeleted),l.hitch(this,this._onRowMoved));this._detailsDiv=n.container("two-thirds-width optionsTableHeaderHeight","majorTrailingVertGap",[]);a=n.addTextButtonDropdownCtl("",b.buttons.addSearchSource,this._newSourceTypeMenuItems);this.own(c(a.ctl,"click",l.hitch(this,this._onAddSearchSourceMenuItemClick)));this._mainControl=new r(null,d||"","majorTrailingVertGap",b.groupingLabels.searchSources,
"full-width",[new m("allPlaceholder",!1,"full-width","third-width","two-thirds-width",b.propertyLabels.placeholderTextForAllSources),new u("showInfoWindowOnSelect","full-width","third-width","two-thirds-width",b.propertyLabels.showPopupForFoundItem),new p(null,[a.div,n.container("full-width flexbox","majorTrailingHorizGap",[this._inputControl.div(),this._detailsDiv])])]);this._mainDiv=this._mainControl.div()},setConfig:function(){this._mainControl.setConfig(this._config);this._sourceMenuItems=e.map(this._config.sources,
function(a){return{item:a.name}});this._inputControl.setValue(this._sourceMenuItems);0<this._sourceMenuItems.length&&this._inputControl.selectTableRow(0)},getConfig:function(b,c){this._mainControl.getConfig(this._config);this._setDetails(-1);e.forEach(this._config.sources,function(b){"locator"===b.type?b.url||c.push(a.substitute(this._nls.problems.noSearchSourceURL,{sourceName:b.name})):0===b.searchFields.length&&c.push(a.substitute(this._nls.problems.noSearchSourceFields,{sourceName:b.name}));0>
b.buffer.bufferUnitsMenu[0].indexOf("1")&&c.push(a.substitute(this._nls.problems.noBufferUnitsForSearchSource,{sourceName:b.name}))},this)},_onAddSearchSourceMenuItemClick:function(a){var b,d={};if(a.target.innerText===this._newSourceTypeMenuItems[0]){var m=new f({nls:this._nls.querySourceSetting,map:this._map,appConfig:{portalUrl:this._portalUrl}});b=l.clone(this._config.searchSourceTemplates.query);m.setConfig({name:b.name||"",placeholder:b.placeholder||"",searchFields:b.searchFields||[],displayField:b.displayField||
"",maxSuggestions:b.maxSuggestions||6,maxResults:b.maxResults||6,zoomScale:b.zoomScale||5E4,exactMatch:b.exactMatch,searchInCurrentMapExtent:b.searchInCurrentMapExtent,type:b.type||"query",layerId:b.layerId,url:b.url||""});m._openQuerySourceChooser();m.own(c(m,"select-query-source-ok",l.hitch(this,function(a){b.name=a.name;b.layerId=a.layerInfo?a.layerInfo.id:null;b.url=a.url;b.buffer=l.clone(this._config.bufferTemplate);b.fieldMenuItems=[];(a=a.definition&&a.definition.fields)&&e.map(a,function(a){b.fieldMenuItems.push({label:a.alias||
a.name,value:a.name})});this._config.sources.push(b);d.item=b.name;this._sourceMenuItems.push(d);this._inputControl.addRowToTable(d);this._inputControl.selectTableRow(this._config.sources.length-1);m.destroy();m=null})));m.own(c(m,"select-query-source-cancel",function(){m.destroy();m=null}))}else b=l.clone(this._config.searchSourceTemplates.locator),b.singleLineFieldName=null,b.buffer=l.clone(this._config.bufferTemplate),this._config.sources.push(b),d.item=b.name,this._sourceMenuItems.push(d),this._inputControl.addRowToTable(d),
this._inputControl.selectTableRow(this._config.sources.length-1)},_setDetails:function(a){var c=this._sourceMenuItems.length;this._removeCurrentDetails();0<=a&&a<c&&(c=this._config.sources[a],"query"===c.type?(this._fieldListPicker=new q("searchFields",this._nls,"full-width","details-label","details-value",this._nls.propertyLabels.searchFields,this._nls.hints.csvNameList,c.fieldMenuItems),this._displayFieldInput=new t("displayField","full-width","details-label","details-value",this._nls.propertyLabels.displayField,
"",c.fieldMenuItems,l.hitch(this,this._onChangeField)),this._sourceDisplay=new r(null,"","majorTrailingVertGap",this._nls.groupingLabels.featureLayerDetails,"full-width",[new r(null,"full-width","minorTrailingHorizGap",[new y(null,"details-label inline-block",this._nls.querySourceSetting.layerSource),new y(null,"details-value inline-block wrapText",c.url)]),new m("name",!1,"full-width","details-label","details-value",this._nls.propertyLabels.name,c.name),new m("placeholder",!1,"full-width","details-label",
"details-value",this._nls.propertyLabels.placeholderText),this._fieldListPicker,this._displayFieldInput,new m("maxSuggestions",!0,"full-width","details-label","details-value",this._nls.propertyLabels.maximumSuggestions,"6",null,null,null,{min:1,max:10,places:0}),new m("maxResults",!0,"full-width","details-label","details-value",this._nls.propertyLabels.maximumResults,"6",null,null,null,{min:1,max:10,places:0}),new m("zoomScale",!0,"full-width","details-label","details-value",this._nls.propertyLabels.zoomScale,
"50000","","1:",null,{min:0,places:0}),new u("exactMatch","full-width","details-label","details-value",this._nls.propertyLabels.exactMatch),new u("searchInCurrentMapExtent","full-width","details-label","details-value",this._nls.propertyLabels.limitSearchToMapExtent),new d("buffer",this._nls,"full-width","details-label","details-value",this._config.bufferTemplate,this._nls.propertyLabels.bufferDefaultDistance,"100")])):"locator"===c.type&&(this._sourceDisplay=new r(null,"","majorTrailingVertGap",this._nls.groupingLabels.geocoderDetails,
"full-width",[new m("url",!1,"full-width","details-label","details-value",this._nls.propertyLabels.url),new m("name",!1,"full-width","details-label","details-value",this._nls.propertyLabels.name),new m("placeholder",!1,"full-width","details-label","details-value",this._nls.propertyLabels.placeholderText),new m("countryCode",!1,"full-width","details-label","details-value",this._nls.propertyLabels.countryRegionCodes,this._nls.placeholders.countryRegionCodes),new m("maxSuggestions",!0,"full-width","details-label",
"details-value",this._nls.propertyLabels.maximumSuggestions,"6",null,null,null,{min:1,max:10,places:0}),new m("maxResults",!0,"full-width","details-label","details-value",this._nls.propertyLabels.maximumResults,"6",null,null,null,{min:1,max:10,places:0}),new m("zoomScale",!0,"full-width","details-label","details-value",this._nls.propertyLabels.zoomScale,"50000","","1:",null,{min:0,places:0}),new u("searchInCurrentMapExtent","full-width","details-label","details-value",this._nls.propertyLabels.limitSearchToMapExtent),
new d("buffer",this._nls,"full-width","details-label","details-value",this._config.bufferTemplate,this._nls.propertyLabels.bufferDefaultDistance,"100")])),this._sourceDisplay&&(c.buffer.bufferUnitsMenu=b.unitCodesToLabels(jimuNls.units,c.buffer.bufferUnitsMenu),this._sourceDisplay.setConfig(c),h.place(this._sourceDisplay.div(),this._detailsDiv),g.remove(this._detailsDiv,"hidden"),this._iCurrentSource=a))},_convertLayerIdToLayerName:function(a){var b=a;e.some(this._webmapFeatureLayers,function(c){return c.layerId===
a?(b=c.name,!0):!1});return b},_convertLayerNameToLayerId:function(a){var b=a;e.some(this._webmapFeatureLayers,function(c){return c.name===a?(b=c.layerId,!0):!1});return b},_onChangeFeatureLayer:function(a){var b,c=[];0<=this._iCurrentSource&&(b=this._config.sources[this._iCurrentSource],e.some(this._webmapFeatureLayers,l.hitch(this,function(d){return a===d.layerId?(b.name=d.layerId,b.searchFields=[],b.displayField=d.displayField,b.layerId=d.layerId,b.url=d.url,e.map(d.fields,function(a){c.push({label:a.alias||
a.name,value:a.name})}),this._fieldListPicker.setFieldList(c),this._fieldListPicker.setDisplay(),this._displayFieldInput.setOptions(c),this._inputControl.renameTableRow(this._iCurrentSource,d.name),!0):!1})))},_onChangeField:function(a){var b;0<=this._iCurrentSource&&(b=this._config.sources[this._iCurrentSource],b.displayField=a)},_onRowSelected:function(a){this._setDetails(a.rowIndex)},_onRowMoved:function(a,b){var c;this._removeCurrentDetails();c=b?a.rowIndex+1:a.rowIndex-1;b=this._sourceMenuItems.splice(c,
1);c=this._config.sources.splice(c,1);this._sourceMenuItems.splice(a.rowIndex,0,b[0]);this._config.sources.splice(a.rowIndex,0,c[0]);this._inputControl.selectTableRow(a.rowIndex)},_onRowDeleted:function(a,b,c){this._removeCurrentDetails();this._sourceMenuItems.splice(c,1);this._config.sources.splice(c,1);0<this._sourceMenuItems.length&&this._inputControl.selectTableRow(0)},_removeCurrentDetails:function(){var a;0<=this._iCurrentSource&&(g.add(this._detailsDiv,"hidden"),a=this._config.sources[this._iCurrentSource],
this._sourceDisplay.getConfig(a),a.buffer.bufferUnitsMenu=b.labelsToUnitCodes(jimuNls.units,a.buffer.bufferUnitsMenu),"query"===a.type&&(a.name=this._convertLayerIdToLayerName(a.name)),h.empty(this._detailsDiv),this._sourceDisplay=null,this._iCurrentSource=-1)}})})},"widgets/PublicNotification/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r,t,q,m,w,v){return e([l,g,h,d],{baseClass:"jimu-widget-search-query-source-setting",templateString:c,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,_defaultZoomScale:null,postCreate:function(){this.inherited(arguments);this.zoomScale.set("placeHolder",window.jimuNls.common.defaults);this.exactMatch=new v({checked:!1,label:this.nls.exactMatch},this.exactMatch);
this.searchInCurrentMapExtent=new v({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition={};this._fieldsCheckBox=[];this._setMessageNodeContent("")},setDefinition:function(a){this._layerDefinition=a||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(a){this.tr=a},getRelatedTr:function(){return this.tr},setConfig:function(b){if("[object Object]"===Object.prototype.toString.call(b)){var c=b.url;c&&(this.config=b,this.shelter.show(),
this._layerDefinition.url!==c?this._getDefinitionFromRemote(c).then(a.hitch(this,function(b){c&&b&&"error"!==b.type?(this._layerDefinition=b,this._layerDefinition.url=c,this._setSourceItems(),this._setMessageNodeContent("")):c&&b&&"error"===b.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(q.substitute({URL:b.url},a.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},isValidConfig:function(){var a=
this.getConfig();return a.url&&a.name&&a.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);this._showValidationErrorTip(this.sourceName)},getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:m.stripHTML(this.sourceName.get("value")),placeholder:m.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,
zoomScale:this.zoomScale.get("value")||this._defaultZoomScale,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",m.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",m.stripHTML(this.placeholder.get("value")))},
_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",!0);this.searchFields.set("disabled",!0);k.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0);this.zoomScale.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);k.setStyle(this.fieldsSelectorNode,
"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1);this.zoomScale.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",m.stripHTML(this.config.name||""));this.placeholder.set("value",m.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",
this.config.displayField||"");this.exactMatch.setValue(!!this.config.exactMatch);this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);this.zoomScale.set("value",this.config.zoomScale||this._defaultZoomScale);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?
this._hideSuggestibleTips():this._showSuggestibleTips();this._enableSourceItems()},_getDefinitionFromRemote:function(b){var c=new p,d=t({url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(d);d.then(a.hitch(this,function(a){c.resolve(a)}),a.hitch(this,function(a){console.error(a);c.resolve({type:"error",url:this._getRequestUrl(b)})}));return c.promise},_setMessageNodeContent:function(a,b){k.empty(this.messageNode);a.nodeType||(a=k.toDom(a));k.place(a,this.messageNode);
b?k.setStyle(this.messageTr,"display",""):k.setStyle(this.messageTr,"display","none")},_getRequestUrl:function(a){var b=window.location.protocol;return"http:"===b?r.setHttpProtocol(a):"https:"===b?r.setHttpsProtocol(a):a},_setSearchFields2Node:function(){var a=null,c=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||(a=[]);if(c)var d=this._layerDefinition.fields,a=b.filter(this.config.searchFields,
function(a){return b.some(d,function(b){return b.name===a})});else a=this.config.searchFields;this.searchFields.set("_fields",a)},_setDisplayFieldOptions:function(){var a=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?a=b.map(this._layerDefinition.fields,function(a){return{label:a.alias||a.name||"",value:a.name||""}}):this.config&&this.config.displayField&&(a=[{label:this.config.displayField,value:this.config.displayField}]);this.displayField.set("options",
a)},_getSearchFieldsAlias:function(){var a=this._getSearchFields();if(!(a&&0<a.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var c=this._layerDefinition.fields,d=b.map(c,function(a){return a&&a.name}),m=[],f=0,e=a.length;f<e;f++){var n=d.indexOf(a[f]);-1<n&&m.push(c[n].alias)}return m.join(",")}return a.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},_setSearchFields:function(a){this.searchFields.set("_fields",
a)},_onSetSourceClick:function(){this._clickSet=!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var b=new u({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});f.once(b,"ok",a.hitch(this,function(a){b.close();this.setDefinition(a.definition||{});this.setConfig({layerId:a.layerInfo&&a.layerInfo.id||
null,url:a.url,name:a.name||"",placeholder:"",searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,zoomScale:this._defaultZoomScale,maxSuggestions:6,maxResults:6,type:"query"});b=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",a):this.emit("select-query-source-ok",a)}));f.once(b,"cancel",a.hitch(this,function(){b.close();b=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var c=k.create("div",{style:{maxHeight:"480px"}}),
d=this._layerDefinition.fields;this._fieldsCheckBox=[];b.forEach(d,a.hitch(this,function(a,b){var d=new v({checked:this._isSearchable(a),label:a.alias||a.name});k.addClass(d.domNode,"fields-checkbox");k.addClass(d.labelNode,"jimu-ellipsis");k.setAttr(d.domNode,{title:a.alias||a.name});0===b%3&&(window.isRTL?k.setStyle(d.domNode,"marginRight",0):k.setStyle(d.domNode,"marginLeft",0));d.placeAt(c);n(d.domNode).data("fieldName",a.name);this._fieldsCheckBox.push(d)}));this.fieldsPopup=new w({titleLabel:this.nls.setSearchFields,
autoHeight:!0,content:c,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.ok,onClick:a.hitch(this,"_onSearchFieldsOk")},{label:this.nls.cancel,classNames:["jimu-btn-vacation"]}],onClose:a.hitch(this,function(){this.fieldsPopup=null})});k.addClass(this.fieldsPopup.domNode,"jimu-widget-search-query-source-setting-fields")},_onSearchFieldsOk:function(){var a=[];b.forEach(this._fieldsCheckBox,function(b){if(b.getValue()){var c=n(b.domNode).data("fieldName");a.push(c[0]);
n(b.domNode).removeData()}});this._setSearchFields(a);this.searchFields.set("value",this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(c){var d=this._getSearchFields();return b.some(d,a.hitch(this,function(a){return c.name===a}))},_showSuggestibleTips:function(){k.addClass(this.tipsNode,"source-tips-show");k.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){k.removeClass(this.tipsNode,"source-tips-show");k.setStyle(this.maxSuggestions.domNode,
"display","block")},_showValidationErrorTip:function(b){if(!b.validate()&&b.domNode&&b.focusNode){var c=b.get("disabled");c&&b.set("disabled",!1);b.focusNode.focus();setTimeout(a.hitch(this,function(){b.focusNode.blur();c&&b.set("disabled",!0);b=null}),100)}}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(e,
k,l,g,h,c,a,b,f){return e([c,k],{width:830,height:560,titleLabel:"",dijitArgs:null,postCreate:function(){this.inherited(arguments);h.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new a(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(l(this.fls,"ok",g.hitch(this,function(a){if(0!==a.length){var b=a[0];if(b.definition)try{b.definition.name=
b.name,b.definition.url=b.url,this.emit("ok",b)}catch(d){console.error(d)}else this.loading.show(),f({url:b.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(g.hitch(this,function(a){if(this.domNode){this.loading.hide();b.definition=a;try{b.definition.name=b.name,b.definition.url=b.url,this.emit("ok",b)}catch(u){console.error(u)}}}),g.hitch(this,function(a){console.error(a);this.domNode&&this.loading.hide()}))}})));this.own(l(this.fls,"cancel",g.hitch(this,function(){try{this.emit("cancel")}catch(n){console.error(n)}})))},
_initLoading:function(){this.loading=new b({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r){return e([k,l,g,f],{templateString:h,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=r.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";if(this.portalRadio.checked)return"portal";
if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var a=[];this.mapRadio.checked?a=this.flcMap.getSelectedItems():this.portalRadio.checked?a=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(a=this.flcUrl.getSelectedItems());return a},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();this._createFeaturelayerChooserFromPortal();
this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new p({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(b(this.flcMap,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(b(this.flcMap,"cancel",c.hitch(this,function(){this.emit("cancel")})))},
_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new d({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(b(this.flcPortal,"next",c.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));this.own(b(this.flcPortal,"back",c.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;
this._updateOperationTip()})));this.own(b(this.flcPortal,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(b(this.flcPortal,"cancel",c.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=new u({multiple:this.multiple,style:{width:"100%",height:"100%"}});
this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(b(this.flcUrl,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(b(this.flcUrl,"cancel",c.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var a="featureLayerSourceRadios_"+this._getRandomString(),d=c.hitch(this,this._onRadioClicked);this.mapRadio=new n({group:a,onStateChange:d,checked:!0});this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new n({group:a,
onStateChange:d,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new n({group:a,onStateChange:d,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(b(this.mapLabel,"click",c.hitch(this,function(){this.mapRadio.check()})));this.own(b(this.portalLabel,"click",c.hitch(this,function(){this.portalRadio.check()})));this.own(b(this.urlLabel,"click",c.hitch(this,function(){this.urlRadio.check()})))},_getRandomString:function(){var a=Math.random().toString();return a=
a.slice(2,a.length)},_onRadioClicked:function(){a.setStyle(this.flcContainer,"display","none");a.setStyle(this.hflcContainer,"display","none");a.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(a.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(a.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):this.urlRadio.checked&&(a.setStyle(this.flscContainer,"display","block"),
this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(e,k,l,g,h,c,a,b,f){return h([c,a,b,k],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
constructor:function(a){this.options=a},postMixInProperties:function(){this.nls=l.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=new f(this.options);this.layerChooser.placeAt(this.chooserContainer);g.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(e(this.layerChooser,"tree-click",l.hitch(this,function(){0<this.getSelectedItems().length?g.removeClass(this.btnOk,"jimu-state-disabled"):g.addClass(this.btnOk,"jimu-state-disabled")})));
this.own(e(this.btnOk,"click",l.hitch(this,function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)})));this.own(e(this.btnCancel,"click",l.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare","dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],
function(e,k,l,g,h){return e([h],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=g.hitch(this,this.basicFilter);this.filter=h.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,
this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=h.andCombineFilters([this.filter,g.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);l.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(c){return c.getLayerType().then(function(a){return!("ArcGISDynamicMapServiceLayer"===a||"ArcGISTiledMapServiceLayer"===a||"GroupLayer"===a)})},basicFilter:function(c){var a=new k;0<=this.ignoredFeaturelayerIds.indexOf(c.id)?
a.resolve(!1):this.onlyShowVisible&&"Table"!==c.getLayerType()?a.resolve(c.isShowInMap()):a.resolve(!0);return a},getHandledItem:function(c){var a=this.inherited(arguments),b=c&&c.layerInfo,b=b&&b.layerObject;a.url=b&&b.url||"";return a}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r,t,q,m,w){var v=l([g,h,c,k],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);u.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new w({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=d.hitch(this,this.basicFilter);this.filter=v.andCombineFilters([this.basicFilter,
this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var c=new b;this.onlyShowVisible?c.resolve(a.isShowInMap()):c.resolve(!0);return c},filter:function(a){a=new b;a.resolve(!0);return a},getSelectedItems:function(){var a=this.tree.getSelectedItems();return r.map(a,d.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var a=this.tree.getAllItems(),b=[];r.forEach(a,d.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),
b.push(a))}));return b},getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(a){this.createMapResponse=a;m.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(d.hitch(this,function(a){this.layerInfosObj=a;this.own(e(this.layerInfosObj,"layerInfosChanged",d.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(e(this.layerInfosObj,"layerInfosIsShowInMapChanged",
d.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,b){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(a){this._clear();u.setStyle(this.errorTipSection,"display","block");var b=[];this.onlyShowWebMapLayers?(b=a.getLayerInfoArrayOfWebmap(),b=b.concat(a.getTableInfoArrayOfWebmap())):(b=a.getLayerInfoArray(),
b=b.concat(a.getTableInfoArray()));0!==b.length&&(u.setStyle(this.errorTipSection,"display","none"),r.forEach(b,d.hitch(this,function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(d.hitch(this,function(){this._addItem("root",a)}),d.hitch(this,function(a){console.error(a)}))},_clear:function(){var a=this._store.query({parent:"root"});r.forEach(a,d.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(a,b){var c=null,
m=b.getLayerType(),f=this.filter(b);p({layerType:m,valid:f}).then(d.hitch(this,function(m){if(m.valid){var f=d.hitch(this,function(d,f){this._id++;c={name:b.title||"",parent:a,layerInfo:b,type:m.layerType,layerClass:b.layerObject.declaredClass,id:this._id.toString(),isLeaf:d,hasChildren:f};this._store.add(c)}),e=b.getSubLayers(),n=0===e.length;n?f(n,!1):(e=r.map(e,d.hitch(this,function(a){return this.filter(a)})),p(e).then(d.hitch(this,function(a){(a=r.some(a,function(a){return a}))&&f(n,a)})))}}))},
_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var b=this._getRootItem(),b=new a({data:[b],getChildren:function(a){return this.query({parent:a.id})}});this._store=new f(b);b=new n({store:this._store,query:{id:"root"},mayHaveChildren:d.hitch(this,this._mayHaveChildren)});this.tree=new q({multiple:this.multiple,model:b,showRoot:!1,isLeafItem:d.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:d.hitch(this,function(a,b){"root"!==
a.id&&this._onTreeOpen(a,b)}),onClick:d.hitch(this,function(a,b,c){this._onTreeClick(a,b,c);this.emit("tree-click",a,b,c)}),getIconStyle:d.hitch(this,function(a,b){var c=null;if(!a||"root"===a.id)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},m=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(a=this._getIconImageName(a,b))d.backgroundImage="url("+m+"/css/images/"+a+")",c=d;return c}),getTooltip:d.hitch(this,
function(a){return this.displayTooltipForTreeNode?a.layerInfo.title:""})});u.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconImageName:function(a,b){var c="";"ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type?c=b?"mapserver_open.png":"mapserver_close.png":"GroupLayer"===a.type?c=b?"group_layer2.png":"group_layer1.png":"FeatureLayer"===a.type?(a=t.getTypeByGeometryType(a.layerInfo.layerObject.geometryType),
"point"===a?c="point_layer1.png":"polyline"===a?c="line_layer1.png":"polygon"===a&&(c="polygon_layer1.png")):c="Table"===a.type?"table.png":"ArcGISImageServiceLayer"===a.type||"ArcGISImageServiceVectorLayer"===a.type?"image_layer.png":b?"mapserver_open.png":"mapserver_close.png";return c},_onTreeOpen:function(a,b){if("root"!==a.id){var c=[];b=[];c=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),b=r.map(c,d.hitch(this,function(a){return a.getLayerObject()})),p(b).then(d.hitch(this,function(){this.domNode&&
(r.forEach(c,d.hitch(this,function(b){this._addItem(a.id,b)})),a.checked=!0,this.shelter.hide())}),d.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,b,c){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});v.createFilterByLayerType=function(a){d.isArrayLike(a)||(a=[]);return function(c){var d=new b;if(0===a.length)d.resolve(!0);else{var m=[];c.traversal(function(a){m.push(a.getLayerType())});
p(m).then(function(b){for(var c=0;c<b.length;c++)for(var m=0;m<a.length;m++)if(b[c]===a[m]){d.resolve(!0);return}d.resolve(!1)},function(a){console.error(a);d.reject(a)})}return d}};v.createFeaturelayerFilter=function(a,b,c,d){var m=["point","polyline","polygon"];a&&0<a.length?(a=r.filter(a,function(a){return 0<=m.indexOf(a)}),0===a.length&&(a=m)):a=m;return function(m){var f=m.getLayerType();m=m.getLayerObject();return p({layerType:f,layerObject:m}).then(function(m){var f=m.layerType;m=m.layerObject;
if("ArcGISDynamicMapServiceLayer"===f||"ArcGISTiledMapServiceLayer"===f||"GroupLayer"===f||"FeatureCollection"===f)return!0;if("FeatureLayer"===f){var f=t.getTypeByGeometryType(m.geometryType),f=0<=r.indexOf(a,f),e=v._shouldPassStatisticsCheck(d,m);return m.url?(m=t.isFeaturelayerUrlSupportQuery(m.url,m.capabilities),f&&m&&e):b&&f}return"Table"===f?(f=t.isFeaturelayerUrlSupportQuery(m.url,m.capabilities),m=v._shouldPassStatisticsCheck(d,m),c&&f&&m):!1})}};v.createImageServiceLayerFilter=function(a,
b){return function(c){var d=c.getLayerType();c=c.getLayerObject();return p({layerType:d,layerObject:c}).then(function(c){var d=c.layerType,m=c.layerObject;return"ArcGISImageServiceLayer"===d||"ArcGISImageServiceVectorLayer"===d?a?t.isImageServiceSupportQuery(c.layerObject.capabilities)?b?v._shouldPassStatisticsCheck(b,m):!0:!1:!0:!1})}};v._shouldPassStatisticsCheck=function(a,b){return a?(a=!1,a=b.advancedQueryCapabilities?!!b.advancedQueryCapabilities.supportsStatistics:!!b.supportsStatistics):!0};
v.createQueryableLayerFilter=function(a){var b=v.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,a);a=v.createImageServiceLayerFilter(!0,a);return v.orCombineFilters([b,a])};v.andCombineFilters=function(a){return v._combineFilters(a,!0)};v.orCombineFilters=function(a){return v._combineFilters(a,!1)};v._combineFilters=function(a,c){return function(d){var m=new b,f=r.map(a,function(a){return a(d)});p(f).then(function(a){var b=!1,b=c?r.every(a,function(a){return a}):r.some(a,function(a){return a});
m.resolve(b)},function(a){console.error(a);m.reject(a)});return m}};return v})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(e,k,l,g,h,c,a){return l("dijit.tree.ObjectStoreModel",a,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(a){h.mixin(this,a);this.childrenCache={}},getRoot:function(a,f){if(this.root)a(this.root);else{var b=this.store.query(this.query);
b.then&&this.own(b);c(b,h.hitch(this,function(c){if(1!=c.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+c.length+" items, but must return exactly one");this.root=c[0];a(this.root);b.observe&&b.observe(h.hitch(this,function(a){this.onChange(a)}),!0)}),f)}},mayHaveChildren:function(){return!0},getChildren:function(a,f,e){var b=this.store.getIdentity(a);if(this.childrenCache[b])c(this.childrenCache[b],f,e);else{var d=this.childrenCache[b]=this.store.getChildren(a);d.then&&this.own(d);
d.observe&&this.own(d.observe(h.hitch(this,function(b,f,e){this.onChange(b);f!=e&&c(d,h.hitch(this,"onChildrenChange",a))}),!0));c(d,f,e)}},isItem:function(){return!0},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},newItem:function(a,c,e,h){return this.store.put(a,{parent:c,before:h})},pasteItem:function(a,c,n,k,d,l){var b=new g;if(c===n&&!k&&!l)return b.resolve(!0),b;c&&!k?this.getChildren(c,h.hitch(this,function(d){d=[].concat(d);var f=e.indexOf(d,
a);d.splice(f,1);this.onChildrenChange(c,d);b.resolve(this.store.put(a,{overwrite:!0,parent:n,oldParent:c,before:l,isCopy:!1}))})):b.resolve(this.store.put(a,{overwrite:!0,parent:n,oldParent:c,before:l,isCopy:!0}));return b},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r,t){var q=e([r._TreeNode,d],{templateString:g,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=c.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=c.toDom('\x3cinput type\x3d"checkbox" /\x3e');c.addClass(this.checkNode,"jimu-tree-check-node");c.place(this.checkNode,this.contentNode,
"first");this.own(p(this.checkNode,"click",h.hitch(this,this._onClick)));this.isLeaf?this.groupId?c.setStyle(this.checkNode,"display","none"):c.setStyle(this.checkNode,"display","inline"):c.setStyle(this.checkNode,"display","none");this.isLeaf?c.addClass(this.domNode,"jimu-tree-leaf-node"):c.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,c.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=
!1,c.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(h.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;
this.inherited(arguments)}});return e([r,d],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+t.getRandomString()},postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree");this.own(n.before(this,"onClick",h.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&c.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0},removeItem:function(a){this.model.store.remove(a)},
getAllItems:function(){var b=this.getAllTreeNodeWidgets();return a.map(b,h.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}))},getSelectedItems:function(){var b=this.getAllTreeNodeWidgets(),b=a.filter(b,h.hitch(this,function(a){return a.checkNode.checked}));return a.map(b,h.hitch(this,function(a){return a.item}))},getFilteredItems:function(b){var c=this.getAllTreeNodeWidgets(),c=a.map(c,h.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return a.filter(c,
h.hitch(this,function(a){return b(a)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),c=0;c<b.length;c++){var d=u.byNode(b[c]);if(d.item.id.toString()===a.toString())return d}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var b=this.getAllTreeNodeWidgets();return a.filter(b,h.hitch(this,function(a){return a.isLeaf}))},
getAllTreeNodeWidgets:function(){var b=this._getAllTreeNodeDoms();return a.map(b,h.hitch(this,function(a){return u.byNode(a)}))},isLeafItem:function(a){return a&&a.isLeaf},_getAllTreeNodeDoms:function(){return f(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new q(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",
{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(a,b,d){b.isLeaf&&(c.hasClass(d.target||d.srcElement,"jimu-tree-check-node")||(this.multiple?b.toggleSelect():this.selectNodeWidget(b)));return arguments},_onCheckNodeClick:function(a,c,d){!this.multiple&&c&&this.unselectAllLeafNodeWidgets();b.stop(d);this.focusNode(a);setTimeout(h.hitch(this,function(){c?this.selectNodeWidget(a):a.unselect();this.onClick(a.item,
a,d)}),0)},unselectAllLeafNodeWidgets:function(){var b=this.getAllLeafTreeNodeWidgets();a.forEach(b,h.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r,t,q,m,w,v,y,C,z,A,E,F,G,H,K,I,J,L,M,P,N,O){function x(a){return q.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var D=g("dijit._TreeNode",[F,G,H,K,I],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);u("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:L,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";n.set(this.domNode,
"backgroundPosition",b+" 0px");n.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);e.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,c,d){var f="_"+c+"Class";c+="Node";var m=this[f];this[f]=this.tree["get"+d+"Class"](a,this.isExpanded);b.replace(this[c],this[f]||"",m||"");n.set(this[c],this.tree["get"+d+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;b.toggle(this.domNode,"dijitTreeIsRoot",a);b.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var c=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;b.replace(this.expandoNode,c[a],c);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return x(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");b.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=d.wipeIn({node:this.containerNode,duration:E.defaultDuration}),c=this._expandDeferred=new h(function(){a.stop()});k.after(a,"onEnd",function(){c.resolve(!0)},!0);a.play();return x(c)},collapse:function(){if(this._collapseDeferred)return x(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");b.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=d.wipeOut({node:this.containerNode,duration:E.defaultDuration}),c=this._collapseDeferred=new h(function(){a.stop()});k.after(a,"onEnd",
function(){c.resolve(!0)},!0);a.play();return x(c)},indent:0,setChildItems:function(b){var d=this.tree,f=d.model,m=[],h=d.focusedChild,q=this.getChildren();e.forEach(q,function(a){H.prototype.removeChild.call(this,a)},this);this.defer(function(){e.forEach(q,function(b){if(!b._destroyed&&!b.getParent()){var c=function(a){var b=f.getIdentity(a.item),m=d._itemNodesMap[b];1==m.length?delete d._itemNodesMap[b]:(b=e.indexOf(m,a),-1!=b&&m.splice(b,1));e.forEach(a.getChildren(),c)};d.dndController.removeTreeNode(b);
c(b);if(d.persist){var m=e.map(b.getTreePath(),function(a){return d.model.getIdentity(a)}).join("/"),q;for(q in d._openedNodes)q.substr(0,m.length)==m&&delete d._openedNodes[q];d._saveExpandedNodes()}d.lastFocusedChild&&!a.isDescendant(d.lastFocusedChild.domNode,d.domNode)&&delete d.lastFocusedChild;h&&!a.isDescendant(h.domNode,d.domNode)&&d.focus();b.destroyRecursive()}})});this.state="Loaded";b&&0<b.length?(this.isExpandable=!0,e.forEach(b,function(a){var b=f.getIdentity(a),c=d._itemNodesMap[b],
e;if(c)for(var h=0;h<c.length;h++)if(c[h]&&!c[h].getParent()){e=c[h];e.set("indent",this.indent+1);break}e||(e=this.tree._createTreeNode({item:a,tree:d,isExpandable:f.mayHaveChildren(a),label:d.getLabel(a),labelType:d.model&&d.model.labelType||"text",tooltip:d.getTooltip(a),ownerDocument:d.ownerDocument,dir:d.dir,lang:d.lang,textDir:d.textDir,indent:this.indent+1}),c?c.push(e):d._itemNodesMap[b]=[e]);this.addChild(e);(this.tree.autoExpand||this.tree._state(e))&&m.push(d._expandNode(e))},this),e.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);b=c(m);this.tree._startPaint(b);return x(b)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());e.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");b.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){z.focus(this.focusNode)}});u("dojo-bidi")&&D.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),e.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this))}});var B=g("dijit.Tree",[F,J,G,I],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:M,persist:!1,autoExpand:!1,dndController:O,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){w.publish(this.id,q.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new h;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(m(this.containerNode,
m.selector(".dijitTreeNode",v.enter),function(b){a._onNodeMouseEnter(A.byNode(this),b)}),m(this.containerNode,m.selector(".dijitTreeNode",v.leave),function(b){a._onNodeMouseLeave(A.byNode(this),b)}),m(this.containerNode,m.selector(".dijitTreeRow",C.press),function(b){a._onNodePress(A.getEnclosingWidget(this),b)}),m(this.containerNode,m.selector(".dijitTreeRow",C),function(b){a._onClick(A.getEnclosingWidget(this),b)}),m(this.containerNode,m.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(A.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(k.after(this.model,"onChange",q.hitch(this,"_onItemChange"),!0),k.after(this.model,"onChildrenChange",q.hitch(this,"_onItemChildrenChange"),!0),k.after(this.model,"onDelete",q.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){q.isString(this.dndController)&&(this.dndController=q.getObject(this.dndController));for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=x(this.pendingCommandsPromise);this.onLoadDeferred.then(q.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;r.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=q.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=q.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)}));this.model=new N(a);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(q.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(q.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),q.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=q.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(q.hitch(this,function(){var c=
e.map(a,function(a){return!a||q.isString(a)?a:b.model.getIdentity(a)}),d=[];e.forEach(c,function(a){d=d.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",d)}))},_setPathAttr:function(a){return a.length?x(this.set("paths",[a]).then(function(a){return a[0]})):x(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,c){var f=a.shift(),m=e.filter(c,function(a){return a.getIdentity()==f})[0];if(m)return a.length?d._expandNode(m).then(function(){return b(a,
m.getChildren())}):m;throw new B.PathError("Could not expand path at "+f);}var d=this;return x(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return c(e.map(a,function(a){a=e.map(a,function(a){return a&&q.isObject(a)?d.model.getIdentity(a):a});if(a.length)return b(a,[d.rootNode]);throw new B.PathError("Empty path");}))}).then(function(a){d.set("selectedNodes",a);return d.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(d){return b._expandNode(d).then(function(){var b=e.filter(d.getChildren()||[],function(a){return a.isExpandable});return c(e.map(b,a))})}var b=this;return x(a(this.rootNode))},collapseAll:function(){function a(d){var f=e.filter(d.getChildren()||[],function(a){return a.isExpandable}),f=c(e.map(f,a));return!d.isExpanded||d==b.rootNode&&!b.showRoot?f:f.then(function(){return b._collapseNode(d)})}var b=this;return x(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){(a=this._getNext(b))&&a.isTreeNode&&this.focusNode(a)},_onUpArrow:function(a,b){if(a=b.getPreviousSibling())for(b=a;b.isExpandable&&b.isExpanded&&
b.hasChildren();)b=b.getChildren(),b=b[b.length-1];else if(a=b.getParent(),this.showRoot||a!==this.rootNode)b=a;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){b.isExpandable&&b.isExpanded?this._collapseNode(b):(a=b.getParent())&&a.isTreeNode&&(this.showRoot||a!==this.rootNode)&&this.focusNode(a)},focusLastChild:function(){var a=this._getLast();
a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(b,c){return a.isDescendant(b,
c.expandoNode)||a.isDescendant(b,c.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,c,d){var f=this.isExpandoNode(b.target,a);a.isExpandable&&(c||f)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[d](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=
a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){r.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){r.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&
delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item,d=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new h,b.getChildren(c,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){console.error(d,": error loading "+a.label+" children: ",
b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(q.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),d=this.getTooltip(a);e.forEach(b,function(b){b.set({item:a,
label:c,tooltip:d});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){a=this.model.getIdentity(a);(a=this._itemNodesMap[a])&&e.forEach(a,function(a){a.setChildItems(b)})},_onItemDelete:function(b){b=this.model.getIdentity(b);var c=this._itemNodesMap[b];c&&(e.forEach(c,function(b){this.dndController.removeTreeNode(b);var c=b.getParent();c&&c.removeChild(b);this.lastFocusedChild&&!a.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&
!a.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();b.destroyRecursive()},this),delete this._itemNodesMap[b])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=l(this.cookieName);a&&e.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=e.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=
!0:delete this._openedNodes[c];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);l(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!q.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},
resize:function(a){a&&f.setMarginBox(this.domNode,a);this._nodePixelIndent=f.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(q.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=q.hitch(this,function(){this._outstandingPaintOperations--;
0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});y(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new D(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):
this.focusFirstChild()}});u("dojo-bidi")&&B.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});B.PathError=p("TreePathError");B._TreeNode=D;return B})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(e,k,l,g){return l("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,
constructor:function(e){g.mixin(this,e);this.connects=[];e=this.store;if(!e.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");e.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([k.after(e,"onNew",g.hitch(this,"onNewItem"),!0),k.after(e,"onDelete",g.hitch(this,"onDeleteItem"),!0),k.after(e,"onSet",g.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var e;e=this.connects.pop();)e.remove()},getRoot:function(e,
c){this.root?e(this.root):this.store.fetch({query:this.query,onComplete:g.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];e(this.root)}),onError:c})},mayHaveChildren:function(h){return e.some(this.childrenAttrs,function(c){return this.store.hasAttribute(h,c)},this)},getChildren:function(h,c,a){var b=this.store;if(b.isItemLoaded(h)){for(var f=[],n=0;n<this.childrenAttrs.length;n++)var k=
b.getValues(h,this.childrenAttrs[n]),f=f.concat(k);var d=0;this.deferItemLoadingUntilExpand||e.forEach(f,function(a){b.isItemLoaded(a)||d++});0==d?c(f):e.forEach(f,function(e,h){b.isItemLoaded(e)||b.loadItem({item:e,onItem:function(a){f[h]=a;0==--d&&c(f)},onError:a})})}else{var l=g.hitch(this,arguments.callee);b.loadItem({item:h,onItem:function(b){l(b,c,a)},onError:a})}},isItem:function(e){return this.store.isItem(e)},fetchItemByIdentity:function(e){this.store.fetchItemByIdentity(e)},getIdentity:function(e){return this.store.getIdentity(e)},
getLabel:function(e){return this.labelAttr?this.store.getValue(e,this.labelAttr):this.store.getLabel(e)},newItem:function(e,c,a){var b={parent:c,attribute:this.childrenAttrs[0]},f;this.newItemIdAttr&&e[this.newItemIdAttr]?this.fetchItemByIdentity({identity:e[this.newItemIdAttr],scope:this,onItem:function(n){n?this.pasteItem(n,null,c,!0,a):(f=this.store.newItem(e,b))&&void 0!=a&&this.pasteItem(f,c,c,!1,a)}}):(f=this.store.newItem(e,b))&&void 0!=a&&this.pasteItem(f,c,c,!1,a)},pasteItem:function(g,c,
a,b,f){var n=this.store,h=this.childrenAttrs[0];c&&e.forEach(this.childrenAttrs,function(a){if(n.containsValue(c,a,g)){if(!b){var d=e.filter(n.getValues(c,a),function(a){return a!=g});n.setValues(c,a,d)}h=a}});if(a)if("number"==typeof f){var d=n.getValues(a,h).slice();d.splice(f,0,g);n.setValues(a,h,d)}else n.setValues(a,h,n.getValues(a,h).concat(g))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(e,c){c&&this.getChildren(c.item,g.hitch(this,function(a){this.onChildrenChange(c.item,
a)}))},onDeleteItem:function(e){this.onDelete(e)},onSetItem:function(h,c){if(-1!=e.indexOf(this.childrenAttrs,c))this.getChildren(h,g.hitch(this,function(a){this.onChildrenChange(h,a)}));else this.onChange(h)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(e,k,l,g,h){return k("dijit.tree.ForestStoreModel",h,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(c){this.root=
{store:this,root:!0,id:c.rootId,label:c.rootLabel,children:c.rootChildren}},mayHaveChildren:function(c){return c===this.root||this.inherited(arguments)},getChildren:function(c,a,b){c===this.root?this.root.children?a(this.root.children):this.store.fetch({query:this.query,onComplete:g.hitch(this,function(b){this.root.children=b;a(b)}),onError:b}):this.inherited(arguments)},isItem:function(c){return c===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(c){if(c.identity==this.root.id){var a=
c.scope||l.global;c.onItem&&c.onItem.call(a,this.root)}else this.inherited(arguments)},getIdentity:function(c){return c===this.root?this.root.id:this.inherited(arguments)},getLabel:function(c){return c===this.root?this.root.label:this.inherited(arguments)},newItem:function(c,a,b){return a===this.root?(this.onNewRootItem(c),this.store.newItem(c)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(c,a,b,f,e){if(a===this.root&&!f)this.onLeaveRoot(c);this.inherited(arguments,[c,
a===this.root?null:a,b===this.root?null:b,f,e]);if(b===this.root)this.onAddToRoot(c)},onAddToRoot:function(c){console.log(this,": item ",c," added to root")},onLeaveRoot:function(c){console.log(this,": item ",c," removed from root")},_requeryTop:function(){var c=this.root.children||[];this.store.fetch({query:this.query,onComplete:g.hitch(this,function(a){this.root.children=a;if(c.length!=a.length||e.some(c,function(b,c){return a[c]!=b}))this.onChildrenChange(this.root,a)})})},onNewItem:function(c,
a){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(c){-1!=e.indexOf(this.root.children,c)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(c,a,b,f){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(e,k,l,g,h,c,a,b,f,n,p){return k("dijit.tree._dndSelector",
p,{constructor:function(){this.selection={};this.anchor=null;this.events.push(b(this.tree.domNode,f.press,g.hitch(this,"onMouseDown")),b(this.tree.domNode,f.release,g.hitch(this,"onMouseUp")),b(this.tree.domNode,f.move,g.hitch(this,"onMouseMove")),b(this.tree.domNode,n.press,g.hitch(this,"onClickPress")),b(this.tree.domNode,n.release,g.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,c;for(c in b)a.push(b[c]);return a},selectNone:function(){this.setSelection([]);
return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));b&&(this.anchor=a);return a},removeTreeNode:function(a){var b=e.filter(this.getSelectedTreeNodes(),function(b){return!c.isDescendant(b.domNode,a.domNode)});this.setSelection(b);return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(a){var b=this.getSelectedTreeNodes();e.forEach(this._setDifference(b,
a),g.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));e.forEach(this._setDifference(a,b),g.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){e.forEach(b,function(a){a.__exclude__=!0});a=e.filter(a,function(a){return!a.__exclude__});e.forEach(b,function(a){delete a.__exclude__});return a},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),b=
[],c=[];e.forEach(a,function(a){var d=a.getTreePath();c.push(a);b.push(d)},this);a=e.map(c,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(b){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(b.target,this.current))){"mousedown"==b.type&&a.isLeft(b)&&b.preventDefault();
var c="keydown"==b.type?this.tree.focusedChild:this.current;if(c){var d=h.getCopyKeyState(b),f=c.id;this.singular||b.shiftKey||!this.selection[f]?(this._doDeselect=!1,this.userSelect(c,d,b.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,h.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,
b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(a);a=doc.createRange();a.setStartBefore(b);return c.compareBoundaryPoints(c.END_TO_END,a)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(a,b,c){if(this.singular)this.anchor==
a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(c&&this.anchor){b=this._compareNodes(this.anchor.rowNode,a.rowNode);c=this.anchor;0>b?b=c:(b=a,a=c);for(c=[];b!=a;)c.push(b),b=this.tree._getNext(b);c.push(a);this.setSelection(c)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,b){b=b||l.global;for(var c in this.selection)a.call(b,
this.getItem(c),c,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(e,k,l,g,h,c){return k("dijit.tree._dndContainer",null,{constructor:function(a,b){this.tree=a;this.node=a.domNode;g.mixin(this,b);this.containerState="";l.add(this.node,"dojoDndContainer");this.events=[h(this.node,c.enter,g.hitch(this,"onOverEvent")),h(this.node,c.leave,g.hitch(this,"onOutEvent")),e.after(this.tree,"_onNodeMouseEnter",
g.hitch(this,"onMouseOver"),!0),e.after(this.tree,"_onNodeMouseLeave",g.hitch(this,"onMouseOut"),!0),h(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var a;a=this.events.pop();)a.remove();this.node=this.parent=null},onMouseOver:function(a){this.current=a},onMouseOut:function(){this.current=null},_changeState:function(a,b){var c="dojoDnd"+a;a=a.toLowerCase()+"State";l.replace(this.node,c+b,c+this[a]);this[a]=b},_addItemClass:function(a,b){l.add(a,"dojoDndItem"+
b)},_removeItemClass:function(a,b){l.remove(a,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r,t,q,m){return e([k,l,g,d],{templateString:h,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=c.mixin({},window.jimuNls.common);this.nls=c.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=q.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new r({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(f(this.selector,"item-selected",c.hitch(this,this._onItemSelected)));this.own(f(this.selector,"none-item-selected",c.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new t({multiple:this.multiple});this.own(f(this.serviceBrowser,"tree-click",c.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){a.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){a.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();a.setStyle(this.btnOk,"display","none");a.setStyle(this.btnNext,"display","block");a.setStyle(this.btnBack,"display","none");a.addClass(this.btnOk,"jimu-state-disabled");a.setStyle(this.selectorContainer,"display","block");a.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnNextClicked:function(){var b=this.selector.getSelectedItem();
b&&(a.setStyle(this.btnNext,"display","none"),a.setStyle(this.btnBack,"display","block"),a.setStyle(this.btnOk,"display","block"),a.addClass(this.btnOk,"jimu-state-disabled"),a.setStyle(this.selectorContainer,"display","none"),a.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(b.url||b.item),this._serviceBrowserDef.then(c.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),c.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?a.removeClass(this.btnOk,"jimu-state-disabled"):a.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r,t,q,m,w,v,y,C,z,A){return e([l,g,h,a],{templateString:c,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,postMixInProperties:function(){this.portalUrl=v.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";n.forEach(this.itemTypes,b.hitch(this,function(a,b){this._itemTypes+='"'+a+'"';b!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+
"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";n.forEach(this.typeKeywords,b.hitch(this,function(a,b){this._typeKeywords+='"'+a+'"';b!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var a=this._getPortalUrl();this.portal=m.getPortal(a);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();
this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=q.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=q.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){this.tab=new z({tabs:[{title:this.nls.myContent,content:this.mycontentTabNode},{title:this.nls.myOrganization,content:this.organizationTabNode},{title:this.nls.myGroup,content:this.groupTabNode},{title:this.nls.publicMap,
content:this.publicTabNode}]},this.tabNode);this.own(t(this.tab,"tabChanged",b.hitch(this,function(a){p.setStyle(this.signinSection,"display","none");a!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){p.setStyle(this.signinSection,"display","none");var a=r(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",this.domNode);w.userHaveSignInPortal(this._getPortalUrl())?a.style("display",
"block"):(a.style("display","none"),this._isPublicTabShow||p.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){q.combineRadioCheckBoxWithLabel(this.portalPublicRaido,this.portalPublicLabel);q.combineRadioCheckBoxWithLabel(this.onlinePublicRaido,this.onlinePublicLabel);var a=this._getPortalUrl(),a=v.getServerByUrl(a);this.portalPublicRaido.disabled=!1;this.onlinePublicRaido.disabled=!1;this.portalPublicRaido.checked=!0;var b=!1;v.isArcGIScom(a)?(b=!0,this.portalPublicLabel.innerHTML=
"ArcGIS.com"):(this.portalPublicLabel.innerHTML=a,b=this.showOnlineItems?!1:!0);b&&(this.onlinePublicRaido.disabled=!0,p.setStyle(this.onlinePublicRaido,"display","none"),p.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var a="esri_"+(f.locale&&f.locale.slice(0,2)||"en").toLowerCase(),c=n.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
b.hitch(this,function(b){return b!==a})),d="";n.forEach(c,b.hitch(this,function(a){d+=" -owner:"+a+" "}));c=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(c=" orgid:"+this.portal.user.orgId+" ");c=c+this._itemTypeQueryString+" AND access:public "+d+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:c});this._filterPublicPortalQuery=this._getQuery({q:c,basicQ:c});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(a){return b.mixin({start:1,num:16,f:"json"},a||{})},_getPortalUrl:function(){return v.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(t(this.publicPortalItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(t(this.publicOnlineItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(t(this.organizationItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(t(this.groupItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));
this.own(t(this.mycontentItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(t(this.publicPortalItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(t(this.publicOnlineItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(t(this.organizationItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(t(this.groupItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(t(this.mycontentItemTable,"update",b.hitch(this,this._onItemTableUpdate)));
var a=this._getPortalUrl();this.portalPublicRaido.disabled||(this.publicPortalItemTable.set("portalUrl",a),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.disabled||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",this._filterPublicOnlineQuery))},
_initPublic:function(){this.own(t(this.portalPublicRaido,"click",b.hitch(this,this._onPublicRaidoClicked)));this.own(t(this.onlinePublicRaido,"click",b.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.checked?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.checked&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},_onPublicSearch:function(a){(a=a&&b.trim(a))?
(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.checked?(this._filterPublicPortalQuery.q=a+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.checked&&(this._filterPublicOnlineQuery.q=a+" "+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=
1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(t(this.groupsSelect,"change",b.hitch(this,this._onGroupsSelectChange)));var a=v.getServerByUrl(this._getPortalUrl());v.isArcGIScom(a)&&(a="ArcGIS.com");w.userHaveSignInPortal(this._getPortalUrl())&&this._onSignIn()},_onOrganizationSearch:function(a){if(a=a&&b.trim(a)){if(this._allOrganizationQuery){var c=
this._allOrganizationQuery.q;c&&(this._filterOrganizationQuery.q=a+" "+c,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(a){if(a=a&&b.trim(a)){if(this._allMyContentQuery){var c=this._allMyContentQuery.q;c&&(this._filterMyContentQuery.q=a+" "+c,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},
_onGroupSearch:function(a){if(a=a&&b.trim(a)){if(this._allGroupQuery){var c=this._allGroupQuery.q;c&&(this._filterGroupQuery.q=a+" "+c,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=!0;var a=this._getPortalUrl();m.getPortal(a).getUser().then(b.hitch(this,function(a){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(a),
this._searchMyContent(a),this._searchGroups(a))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(a){this.organizationItemTable.clear();a=" orgid:"+a.orgId+" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var b=this._getPortalUrl();this._allOrganizationQuery=
this._getQuery({q:a});this._filterOrganizationQuery=this._getQuery({q:a});this.organizationItemTable.set("portalUrl",b);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(a){this.mycontentItemTable.clear();var b=this._getPortalUrl();a="owner:"+a.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allMyContentQuery=this._getQuery({q:a});this._filterMyContentQuery=this._getQuery({q:a});this.mycontentItemTable.set("portalUrl",
b);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(a){this._resetGroupsSection();p.setStyle(this.groupsSection,"display","block");a=a.getGroups();if(0<a.length){p.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();p.empty(this.groupsSelect);for(var b=0;b<a.length;b++){var c=a[b];p.create("option",{value:c.id,innerHTML:c.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(a.length)},_resetGroupsSection:function(){p.setStyle(this.groupsSection,
"display","none");p.empty(this.groupsSelect);p.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();p.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(a){0===a?p.setStyle(this.groupsSection,"top","15px"):p.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var a=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===a)p.setStyle(this.groupSearch,
"display","none"),this.groupItemTable.hide();else{p.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var b=this._getPortalUrl(),a="group:"+a+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:a});this._filterGroupQuery=this._getQuery({q:a});this.groupItemTable.set("portalUrl",b);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(a){var b=
p.hasClass(a,"jimu-state-active");r(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");b&&p.addClass(a,"jimu-state-active");(a=this.getSelectedItem())?this.emit("item-selected",a):this.emit("none-item-selected")},getSelectedItem:function(){var a=null,c=r(".item.jimu-state-active",this.domNode);0<c.length&&(a=b.mixin({},c[0].item));return a}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r,t,q){return e([k,l,g,c],{templateString:h,declaredClass:"jimu.dijit.ItemTable",baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&
0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=t.getStandardPortalUrl(this.portalUrl));this.showAllItemsSection();this.searchAllItems()},show:function(){f.setStyle(this.domNode,"display","block")},hide:function(){f.setStyle(this.domNode,"display","none")},searchAllItems:function(b){this.showAllItemsSection();b&&(this.query=a.mixin({},b),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&
(this.allItemsShelter.show(),r.getPortal(this.portalUrl).queryItems(this.query).then(a.hitch(this,function(a){this.domNode&&(this.allItemsShelter.hide(),this.query.start=a.nextStart,this._createItems(a,this.allItemTbody))}),a.hitch(this,function(a){console.error(a);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(b){this.showFilterItemsSection();b&&(this.filteredQuery=a.clone(b),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&
0<this.filteredQuery.start&&(this.filteredItemShelter.show(),r.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(a.hitch(this,function(a){this.domNode&&(this.showFilterItemsSection(),b&&this.clearFilteredItemsSection(),this.filteredQuery.start=a.nextStart,this._createItems(a,this.filteredItemsTbody),this._filterItemCallback())}),a.hitch(this,function(a){console.error(a);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?
(f.setStyle(this.filteredItemsTableDiv,"display","block"),f.setStyle(this.searchNoneTipSection,"display","none")):(f.setStyle(this.filteredItemsTableDiv,"display","none"),f.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){f.empty(this.allItemTbody)},clearFilteredItemsSection:function(){f.empty(this.filteredItemsTbody)},showAllItemsSection:function(){f.setStyle(this.allItemsSection,
"display","block");f.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){f.setStyle(this.allItemsSection,"display","none");f.setStyle(this.filteredItemsSection,"display","block");f.setStyle(this.filteredItemsTableDiv,"display","block");f.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&
this.searchFilteredItems()},_isScrollToBottom:function(a){return u.isScrollToBottom(a)},_createItems:function(c,d){c=c.results;var e=b.map(this.types,a.hitch(this,function(a){return a.toLowerCase()}));c=b.filter(c,a.hitch(this,function(a){a=a.type&&a.type.toLowerCase()||"";return 0<=b.indexOf(e,a)}));if(0!==c.length){var m,q=p("td.empty",d),g;if(0<q.length){var n=Math.min(c.length,q.length),h=c.splice(0,n);for(g=0;g<n;g++){var k=q[g];m=this._createItem(h[g]);f.place(m,k);f.removeClass(k,"empty")}}if(0!==
c.length){q=Math.ceil(c.length/2);for(g=0;g<q;g++)for(m=f.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),f.place(m,d),n=p("td",m),h=0;h<n.length;h++)k=n[h],(m=c[2*g+h])?(m=this._createItem(m),f.place(m,k)):f.addClass(k,"empty");this.emit("update")}}},_getItemCount:function(a){return p(".item",a).length},_createItem:function(a){var b=f.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
b.item=a;var c=p(".item-thumbnail",b)[0],d=p(".item-name",b)[0],e=p(".item-type-owner",b)[0],m=p(".item-date",b)[0],g=p(".item-details",b)[0],q=p(".none-thumbnail-tip",b)[0];if(!a.thumbnailUrl){var n=this._defaultThumbnail[a.type];n&&(a.thumbnailUrl=require.toUrl("jimu")+"/images/"+n)}a.thumbnailUrl?f.setStyle(c,"backgroundImage","url("+a.thumbnailUrl+")"):q.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(m=p(".item-info",b)[0],this.onCreateItemContent(a,m)):(d.innerHTML=
a.title,d.title=d.innerHTML,e.innerHTML=a.type+" by "+a.owner,e.title=e.innerHTML,c=new Date,c.setTime(a.modified),m.innerHTML=c.toLocaleString(),m.title=m.innerHTML,g.innerHTML=this.nls.moreDetails,g.href=a.detailsPageUrl||"#");return b},_onItemsTableClicked:function(a){var b=a.target||a.srcElement;a=null;f.hasClass(b,"item-thumbnail")?a=b.parentNode:f.hasClass(b,"none-thumbnail-tip")&&(a=b.parentNode.parentNode);a&&(b=f.hasClass(a,"jimu-state-active"),p(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
b?f.removeClass(a,"jimu-state-active"):f.addClass(a,"jimu-state-active"),this.emit("item-dom-clicked",a))},getSelectedItem:function(){var b=null,c=p(".item.jimu-state-active",this.domNode);0<c.length&&(b=a.mixin({},c[0].item));return b}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(e,k,l,g,h){return e([k],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",
url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=h.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var c=this.inherited(arguments);return c=g.map(c,l.hitch(this,function(a){return{name:a.name,url:a.url,definition:a.definition}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r,t){return e([k,l,g,h],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(a){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new f;a&&"string"===typeof a&&a.replace(/\/*$/g,"")||this._def.reject();a=a.replace(/\/*$/g,"");a=c.trim(a);var b=a.match(/^http(s?):\/\//gi);b&&0<b.length||
(a="http://"+a);if(!(0>=a.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=a))return a=this._getRootItem(),a=r.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,a):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,a):this._searchFolderServiceUrl(this._currentUrl,a),this.shelter.show(),a.then(c.hitch(this,function(a){this.domNode&&this.shelter.hide();var b=this.tree.getAllLeafTreeNodeWidgets();1===b.length&&
b[0].select();this._def.resolve(a)}),c.hitch(this,function(a){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(a)})),this._def;this._def.reject()},_getItem:function(a){return this.rule.getItem(a)},_getSubItemUrls:function(a){return this.rule.getSubItemUrls(a)},_getSubItems:function(a){var d=new f;this._getSubItemUrls(a).then(c.hitch(this,function(a){a=b.map(a,c.hitch(this,function(a){return this._getItem(a)}));n(a).then(c.hitch(this,function(a){a=b.filter(a,c.hitch(this,
function(a){return a&&"object"===typeof a}));d.resolve(a)}),c.hitch(this,function(a){d.reject(a)}))}),c.hitch(this,function(a){d.reject(a)}));return d},_selectFirstLeafTreeNodeWidget:function(){var a=this.tree.getAllLeafTreeNodeWidgets();1===a.length&&a[0].select()},isLeafItem:function(a){return 0<=this.rule.leafTypes.indexOf(a.type)},isServiceTypeSupported:function(a){return this.rule.isServiceTypeSupported(a)},_getStringEndWith:function(a,b){var c="",d=a.indexOf(b);0<=d&&(c=a.slice(0,d+b.length));
return c},_isUrlContainsServiceType:function(a){return this.rule.isUrlContainsServiceType(a)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(a){var b="";a=a.split("/");return b=a[a.length-1]},_searchBaseServiceUrl:function(a,d){var e=new f;this._getRestInfo(a).then(c.hitch(this,function(m){if(this.domNode){var g=[];b.map(m.folders,c.hitch(this,function(e){var m={name:e,type:"folder",url:a+"/"+e,parent:d.id};this._addItem(m);
var n=new f;this._doSearchFolderServiceUrl(m.url,m.id).then(c.hitch(this,function(a){0<a.length?b.forEach(a,c.hitch(this,function(a){a.parent=m.id;this._addItem(a)})):this._removeItem(m.id);n.resolve()}),c.hitch(this,function(a){n.reject(a)}));g.push(n);return n}));b.forEach(m.services,c.hitch(this,function(b){if(this.isServiceTypeSupported(b.type)){b=a+"/"+b.name+"/"+b.type;var e=new f;this.rule.getItem(b).then(c.hitch(this,function(a){a&&(a.parent=d.id,this._addItem(a));e.resolve()}),c.hitch(this,
function(a){console.error(a);e.reject(a)}));g.push(e)}}));n(g).then(c.hitch(this,function(){this.domNode&&e.resolve()}),c.hitch(this,function(a){console.error(a);this.domNode&&e.reject(a)}))}}),c.hitch(this,function(a){console.error(a);this.domNode&&e.reject({errorCode:"NETWORK_ERROR",error:a})}));return e},_searchFolderServiceUrl:function(a,d){var e=new f;this._doSearchFolderServiceUrl(a,d).then(c.hitch(this,function(a){this.domNode&&(b.forEach(a,c.hitch(this,function(a){a.parent=d.id;this._addItem(a)})),
e.resolve())}),c.hitch(this,function(a){console.error(a);this.domNode&&e.reject({errorCode:"NETWORK_ERROR",error:a})}));return e},_doSearchFolderServiceUrl:function(a){var d=new f,e=this._getBaseServiceUrl();this._getRestInfo(a).then(c.hitch(this,function(a){a=a.services;var f=[];a&&0<a.length&&b.forEach(a,c.hitch(this,function(a){this.isServiceTypeSupported(a.type)&&(a=this.rule.getItem(e+"/"+a.name+"/"+a.type),f.push(a))}));n(f).then(c.hitch(this,function(a){a=b.filter(a,c.hitch(this,function(a){return a}));
d.resolve(a)}),c.hitch(this,function(a){console.error(a);d.reject(a)}))}),c.hitch(this,function(a){console.error(a);d.reject(a)}));return d},_searchServiceUrl:function(a,d){var e=new f;this._getSubItems(a).then(c.hitch(this,function(f){f&&0<f.length?(b.forEach(f,c.hitch(this,function(a){a.parent=d.id;this._addItem(a)})),e.resolve()):this._getItem(a).then(c.hitch(this,function(a){a&&(a.parent=d.id,this._addItem(a));e.resolve()}),c.hitch(this,function(a){e.reject(a)}))}),c.hitch(this,function(a){e.reject(a)}));
return e},_getRestInfo:function(a){var b=new f;this.rule.getRestInfo(a).then(c.hitch(this,function(a){this.domNode&&b.resolve(a)}),c.hitch(this,function(a){this.domNode&&b.reject(a)}));return b},_clear:function(){var a=this._store.query({parent:"root"});b.forEach(a,c.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(a){this._id++;a.id=this._id.toString();this._store.add(a);return a},_removeItem:function(a){this._store.remove(a)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var b=this._getRootItem(),b=new p({data:[b],getChildren:function(a){return this.query({parent:a.id})}});this._store=new d(b);b=new u({store:this._store,query:{id:"root"},mayHaveChildren:c.hitch(this,this._mayHaveChildren)});this.tree=new t({multiple:this.multiple,model:b,showRoot:!1,style:{width:"100%"},isLeafItem:c.hitch(this,this.isLeafItem),onOpen:c.hitch(this,function(a,b){this._onTreeOpen(a,b);
this.emit("tree-open",a,b)}),onClick:c.hitch(this,function(a,b,c){this._onTreeClick(a,b,c);this.emit("tree-click",a,b,c)}),getIconStyle:c.hitch(this,function(a,b){var c=null;if(!a)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},e=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),f=this._getIconImageName(a,b);f||("folder"===a.type?f=b?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(a.type)&&
(f=b?"folder_open_default.png":"folder_close_default.png"));f&&(d.backgroundImage="url("+e+"/css/images/"+f+")",c=d);return c})});a.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(a,b){var c="";"function"===typeof this.rule.getIconImageName&&(c=this.rule.getIconImageName(a,b));return c},_mayHaveChildren:function(a){return"root"===a.type?!0:!this.isLeafItem(a)},_onTreeOpen:function(a,d){"root"===a.id||0<this._store.query({parent:a.id}).length||
a.checking||a.checked||(a.checking=!0,this._getSubItems(a.url).then(c.hitch(this,function(d){b.forEach(d,c.hitch(this,function(b){b.parent=a.id;this._addItem(b)}));a.checking=!1;a.checked=!0}),c.hitch(this,function(b){console.error(b);a.checking=!1;a.checked=!0})))},_onTreeClick:function(a,b,c){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred",
"jimu/utils","jimu/ServiceBrowserRule"],function(e,k,l,g,h){var c={combineRules:function(a){var b=new h;k.forEach(a,function(a){k.forEach(a.leafTypes,function(a){0>b.leafTypes.indexOf(a)&&b.leafTypes.push(a)});k.forEach(a.serviceTypes,function(a){0>b.serviceTypes.indexOf(a)&&b.serviceTypes.push(a)})});b.getMatchedRule=function(b){var c=null;k.some(a,function(a){return a.isUrlContainsServiceType(b)?(c=a,!0):!1});return c};b.getItem=function(a){var c=null;return c=(c=b.getMatchedRule(a))?c.getItem(a):
b.defaultGetItem(a)};b.getSubItemUrls=function(a){var c=null;return c=(c=b.getMatchedRule(a))?c.getSubItemUrls(a):b.defaultGetSubItemUrls(a)};b.getIconImageName=function(a,c){var e="";if(a.url){var d=b.getMatchedRule(a.url);d&&"function"===typeof d.getIconImageName&&(e=d.getIconImageName(a,c))}return e};return b},getFeaturelayerServiceBrowserRule:function(a,b,f){a=e.clone(a);var g=["point","polyline","polygon"];e.isArrayLike(a)&&0<a.length?(a=k.filter(a,function(a){return 0<=g.indexOf(a)}),0===a.length&&
(a=g)):a=g;return c._getFeaturelayerServiceBrowserRule(a,b,f)},_getFeaturelayerServiceBrowserRule:function(a,b,c){return new h({types:a,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(a){var b=new l;this.isUrlEndWithServiceType(a,this.serviceTypes)?b=this.defaultGetItem(a):this.getRestInfo(a).then(e.hitch(this,function(c){c=this._getItemByLayerDefinition(a,c);b.resolve(c)}),
e.hitch(this,function(a){b.reject(a)}));return b},getSubItemUrls:function(a){var b=new l;return b=this.isUrlEndWithServiceType(a)?this._getSubUrlsByServiceUrl(a):this._getSubUrlsByGroupUrl(a)},getIconImageName:function(a,b){var c="";"MapServer"===a.type||"FeatureServer"===a.type?c=b?"mapserver_open.png":"mapserver_close.png":a.type===this._groupLayerType?c=b?"group_layer2.png":"group_layer1.png":a.type===this._featureLayerType?(a=g.getTypeByGeometryType(a.definition&&a.definition.geometryType),"point"===
a?c="point_layer1.png":"polyline"===a?c="line_layer1.png":"polygon"===a&&(c="polygon_layer1.png")):a.type===this._tableType?c="table.png":"root"===a.type&&this._currentUrl&&k.some(this.serviceTypes,e.hitch(this,function(a){return g.isStringEndWith(this._currentUrl,"/"+a)}))&&(c=b?"mapserver_open.png":"mapserver_close.png");return c},_getSubUrlsByServiceUrl:function(a){var b=new l;this.getRestInfo(a).then(e.hitch(this,function(d){var f=[];k.forEach(d.layers,e.hitch(this,function(b){0<=b.parentLayerId||
f.push(a+"/"+b.id)}));c&&k.forEach(d.tables,e.hitch(this,function(b){0<=b.parentLayerId||f.push(a+"/"+b.id)}));b.resolve(f)}),e.hitch(this,function(a){b.reject(a)}));return b},_getSubUrlsByGroupUrl:function(a){var b=new l;this.getRestInfo(a).then(e.hitch(this,function(c){var d=[];if(c.type===this._groupLayerType)var f=this._getServiceUrlByLayerUrl(a),d=k.map(c.subLayers||[],e.hitch(this,function(a){return f+"/"+a.id}));b.resolve(d)}),e.hitch(this,function(a){b.reject(a)}));return b},_getItemByLayerDefinition:function(a,
c){var d=null,e=c.type;if(e===this._groupLayerType)d={name:c.name,type:e,url:a,definition:c};else if(e===this._featureLayerType||e===this._tableType){var f=!1;e===this._featureLayerType?f=this._validateEsriGeometryType(c.geometryType):e===this._tableType&&(f=!0);f&&(f=!1,(f=b?g.isFeaturelayerUrlSupportQuery(a,c.capabilities):!0)&&(d={name:c.name,type:e,url:a,definition:c}))}return d},_validateEsriGeometryType:function(a){a=g.getTypeByGeometryType(a);return 0<=this.types.indexOf(a)},_getServiceUrlByLayerUrl:function(a){for(var b=
"",c=0;c<this.serviceTypes.length;c++){var e=this.serviceTypes[c].toLowerCase(),f=a.toLowerCase().lastIndexOf("/"+e+"/");if(0<=f){b=a.slice(0,f+e.length+1);break}}return b}})},getGeocodeServiceBrowserRule:function(){return new h({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new h({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(a){var b=new l;this.isUrlEndWithServiceType(a)?b=this.defaultGetItem(a):this.getRestInfo(a).then(e.hitch(this,
function(c){b.resolve({name:c.displayName||c.name,type:"GPTask",url:a,definition:c})}),e.hitch(this,function(a){b.reject(a)}));return b},getSubItemUrls:function(a){var b=new l;this.isUrlEndWithServiceType(a)?this.getRestInfo(a).then(e.hitch(this,function(c){c=k.map(c.tasks||[],e.hitch(this,function(b){return a+"/"+b}));b.resolve(c)}),e.hitch(this,function(a){b.reject(a)})):b.resolve([]);return b},getIconImageName:function(a,b){b="";"GPServer"===a.type?b="toolbox.png":"GPTask"===a.type&&(b="tool.png");
return b}})},getImageServiceBrowserRule:function(a){return new h({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(b){var c=new l;this.isUrlEndWithServiceType(b)?this.defaultGetItem(b).then(e.hitch(this,function(b){a?g.isImageServiceSupportQuery(b.definition.capabilities)?c.resolve(b):c.resolve(null):c.resolve(b)}),e.hitch(this,function(a){c.reject(a)})):c.resolve(null);return c},getIconImageName:function(a,c){c="";"ImageServer"===a.type&&(c="image_layer.png");return c}})},
getQueryableServiceBrowserRule:function(){var a=c.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),b=c.getImageServiceBrowserRule(!0);return c.combineRules([a,b])}};return c})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(e,k,l,g,h,c,a){return e([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(a){k.mixin(this,a);k.isArrayLike(this.leafTypes)||
(this.leafTypes=[]);k.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(a){return this.defaultGetItem(a)},getSubItemUrls:function(a){return this.defaultGetSubItemUrls(a)},getIconImageName:function(a,c){return""},defaultGetItem:function(a){var b=new g;a=a.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(a)){var c=a.split("/"),e=c[c.length-1],d=c[c.length-2];this.getRestInfo(a).then(k.hitch(this,function(c){b.resolve({name:d,type:e,url:a,definition:c})}),k.hitch(this,function(a){console.error(a);
b.reject({errorCode:"NETWORK_ERROR",error:a})}))}else b.resolve(null);return b},defaultGetSubItemUrls:function(a){a=new g;a.resolve([]);return a},getRestInfo:function(b){var e=new g;b=b.replace(/\/*$/g,"");var h=this._restInfoCache[b];if(h)e.resolve(h);else{var h={url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4},l=a.findCredential(b);l&&l.token&&(h.content.token=l.token);c(h).then(k.hitch(this,function(a){this._restInfoCache[b]=a;e.resolve(a)}),function(a){e.reject(a)})}return e},
isServiceTypeSupported:function(a){a=a.toLowerCase();return l.some(this.serviceTypes,k.hitch(this,function(b){return b.toLowerCase()===a}))},isUrlEndWithServiceType:function(a){return l.some(this.serviceTypes,k.hitch(this,function(b){return h.isStringEndWith(a,"/"+b)}))},isUrlContainsServiceType:function(a){a=a.toLowerCase();return l.some(this.serviceTypes,k.hitch(this,function(b){b=b.toLowerCase();return 0<=a.indexOf("/"+b)}))}})})},"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare",
"./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(e,k,l){return e([k],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(e){return new l(e)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(e,k,l,g,h,c,a,b,f,n,p,d,u,r,t){return e([k,l,g,c],{templateString:h,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=n.mixin({},window.jimuNls.common);this.nls=n.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
b.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(b){var c=new a;(this.url=b)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),c=this._onBtnValidateClick()):c.reject();return c},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?f.forEach(this._examples,n.hitch(this,function(a){b.create("div",{innerHTML:a,
"class":"example-url"},this.exampleTd)})):b.setStyle(this.exampleTr,"display","none");var a={multiple:this.multiple,_onTreeClick:n.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(a);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(d.after(this.urlInput,"validator",n.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(p(this.serviceBrowser,"error",n.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(a){},_validateUrl:function(a){a=a.replace(/\/*$/g,"");if((a=a.match(/\/rest\/services\/*(.*)/gi))&&0<a.length)if(a=a[0].replace(/\/rest\/services\/*/,"")){var b=a.split("/");if(1===b.length)return!0;if(2===b.length)return this.serviceBrowser.isServiceTypeSupported(b[1]);if(3<=b.length)return a=this.serviceBrowser.isServiceTypeSupported(b[1]),b=this.serviceBrowser.isServiceTypeSupported(b[2]),a||b}else return!0;else return!1},_afterUrlValidate:function(a){a&&
(a=this.urlInput.get("value"),a=this._validateUrl(a));a?b.removeClass(this.btnValidate,"jimu-state-disabled"):b.addClass(this.btnValidate,"jimu-state-disabled");return a},_onServiceBrowserError:function(a){this._showErrorMessage(a)},_showErrorMessage:function(a){a&&"string"===typeof a?(this.errorNode.innerHTML=a,b.addClass(this.errorSection,"visible")):b.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";b.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var b=new a;if(this.urlInput.validate()){var c=this.urlInput.get("value");this.serviceBrowser.setUrl(c).then(n.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();b.resolve()}),n.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();b.reject()}));this.emit("validate-click")}else b.reject();return b},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?b.removeClass(this.btnOk,"jimu-state-disabled"):
b.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(e,k,l,g,h){var c=k.NodeList,a={},b=0,f=function(a){var c=h.get(a,"data-dojo-dataid");c||(c="pid"+b++,h.set(a,"data-dojo-dataid",c));return c},
n=e._nodeData=function(b,c,e){var d=f(b),g;a[d]||(a[d]={});if(1==arguments.length)return a[d];"string"==typeof c?2<arguments.length?a[d][c]=e:g=a[d][c]:g=l.mixin(a[d],c);return g},p=e._removeNodeData=function(b,c){b=f(b);a[b]&&(c?delete a[b][c]:delete a[b])};c._gcNodeData=e._gcNodeData=function(){var b=k("[data-dojo-dataid]").map(f),c;for(c in a)0>g.indexOf(b,c)&&delete a[c]};l.extend(c,{data:c._adaptWithCondition(n,function(a){return 0===a.length||1==a.length&&"string"==typeof a[0]}),removeData:c._adaptAsForEach(p)});
return c})},"widgets/PublicNotification/setting/SettingBoxedDivs":function(){define(["dojo/_base/declare","./settingComponents","./SettingObject"],function(e,k,l){return e(l,{constructor:function(e,h){this._mainDiv=k.container(null,null,h)}})})},"widgets/PublicNotification/setting/SettingDropdownLabeled":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","./settingComponents","./SettingObject"],function(e,k,l,g,h){return e(h,{_inputControl:null,_inputControlDiv:null,_inputControlOnChange:null,
_disableNextOnChange:!1,constructor:function(c,a,b,e,h,p,d,u){c=[];d=g.dropdownCtl(null,"full-width",d);c.push(d.div);this._inputControl=d.ctl;this._inputControlDiv=d.div;this._inputControlOnChange=u;this.own(l(this._inputControl,"change",k.hitch(this,this._onChange)));p&&c.push(g.text("hint",p));this._mainDiv=g.container("flexbox "+(a||""),"minorTrailingHorizGap",[g.container("inline-block "+(b?b:""),"",[g.text("static-text",h)]),g.container("inline-block "+(e?e:""),"minorTrailingVertGap",c)])},
setValue:function(c){this._inputControl&&this._inputControl.set("value",c)},getValue:function(){return this._inputControl?this._inputControl.get("value"):null},setConfig:function(){this._inputControl&&this._config&&this._config!==this.getValue()&&(this._disableNextOnChange=!0,this.setValue(this._config))},getConfig:function(c,a){this._inputControl&&(this._config=this.getValue())},setOptions:function(c){this._inputControl&&this._inputControl.destroy();this._inputControl=g.dropdown(this._inputControlDiv,
"full-width",c,this._inputControlOnChange)},_onChange:function(c){this._disableNextOnChange?this._disableNextOnChange=!1:this._inputControlOnChange(c)}})})},"widgets/PublicNotification/setting/SettingFieldListLabeled":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query jimu/dijit/CheckBox jimu/dijit/Popup ./settingComponents ./SettingObject".split(" "),function(e,k,l,g,h,c,a,b,f,n,p,d,u){return k(u,
{_echoArea:null,_fieldMenuItems:[],_fieldsCheckBoxes:[],_fieldsPopup:null,_nls:null,_label:"",constructor:function(a,c,e,f,g,h,k,n){a=[];var m=[];this._nls=c;this._label=h;this._fieldMenuItems=n;this._echoArea=d.text("variable-width inline-block readOnlyTextField");m.push(this._echoArea);c=d.iconButton("edit-button",c.tooltips.openFieldSelector);this.own(b(c,"click",l.hitch(this,this._onFieldsSelectorClick)));m.push(c);a.push(d.container("full-width flexbox","minorTrailingHorizGap",m));k&&a.push(d.text("hint",
k));this._mainDiv=d.container("flexbox "+(e||""),"minorTrailingHorizGap",[d.container("inline-block "+(f?f:""),"",[d.text("static-text",h)]),d.container("inline-block "+(g?g:""),"minorTrailingVertGap",a)])},setDisplay:function(a){this._echoArea&&(this._echoArea.innerHTML=Array.isArray(a)&&0<a.length?a.join(","):"")},setConfig:function(){var a=[];Array.isArray(this._config)&&0<this._config.length&&e.forEach(this._config,l.hitch(this,function(b){e.some(this._fieldMenuItems,function(c){return b===c.value?
(a.push(c.label),!0):!1})}));this.setDisplay(a)},setFieldList:function(a){this._fieldMenuItems=a},_onFieldsSelectorClick:function(){var b=c.create("div",{style:{maxHeight:"480px"}});this._fieldsCheckBoxes=[];e.forEach(this._fieldMenuItems,l.hitch(this,function(c,d){var e=new n({checked:this._arrayContains(this._config,c.value),label:c.label});h.add(e.domNode,"fields-checkbox");h.add(e.labelNode,"jimu-ellipsis");g.set(e.domNode,"title",c.label);0===d%3&&(window.isRTL?a.set(e.domNode,"marginRight",
0):a.set(e.domNode,"marginLeft",0));e.placeAt(b);f(e.domNode).data("fieldName",c.value);this._fieldsCheckBoxes.push(e)}));this._fieldsPopup=new p({titleLabel:this._label,autoHeight:!0,content:b,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:jimuNls.common.ok,onClick:l.hitch(this,"_onSearchFieldsOk")},{label:jimuNls.common.cancel,classNames:["jimu-btn-vacation"]}],onClose:l.hitch(this,function(){this._fieldsPopup=null})});h.add(this._fieldsPopup.domNode,"jimu-widget-public-notification-setting-fields")},
_arrayContains:function(a,b){return e.some(a,function(a){return a===b})},_onSearchFieldsOk:function(){var a=[],b=[];e.forEach(this._fieldsCheckBoxes,function(c){if(c.getValue()){var e=f(c.domNode).data("fieldName");a.push(e[0]);f(c.domNode).removeData();b.push(c.label)}});this._config=a;this.setDisplay(b);this._fieldsPopup.close()}})})},"widgets/PublicNotification/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},
"url:widgets/PublicNotification/setting/QuerySourceSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"source-url-section"\x3e\r\n    \x3ctable class\x3d"source-table"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d"first"\x3e\r\n            \x3cspan class\x3d"source-label"\x3e${nls.layerSource}\x3c/span\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"second"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"third"\x3e\r\n            \x3cspan title\x3d"${nls.set}" class\x3d"jimu-btn" data-dojo-attach-event\x3d"click:_onSetSourceClick"\x3e${nls.set}\x3c/span\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3ctd class\x3d"first"\x3e\x3c/td\x3e\r\n          \x3ctd class\x3d"second" colspan\x3d"2"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"messageNode" class\x3d"tip error-message"\x3e\x3c/span\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"source-details-section"\x3e\r\n    \x3ctable class\x3d"source-table"\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.name}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"Blur:_onSourceNameBlur" data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.placeholder}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"Blur:_onPlaceholderBlur" data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.searchFields}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv class\x3d"search-fields"\x3e\r\n            \x3c!-- \x3cspan class\x3d"fields jimu-float-leading" data-dojo-attach-point\x3d"fieldsNode"\x3e\x3c/span\x3e --\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"search-fields-selector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode" data-dojo-attach-event\x3d"click:_onFieldsSelectorClick"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.displayField}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.maxSuggestions}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv class\x3d"source-tips" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n            \x3cem\x3e${nls.searchLayerTips}\x3c/em\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.maxResults}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr data-dojo-attach-point\x3d"zoomScaleTr"\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.zoomScale}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cspan class\x3d"jimu-float-leading" style\x3d"line-height:30px;"\x3e1: \x3c/span\x3e\r\n          \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'}"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n    \x3ctable class\x3d"source-table"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d"first"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d"first"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" style\x3d"position:absolute;width:100%;top:50px;" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.groups}:\x3c/span\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading portal-public-radio jimu-radio-btn" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading online-public-radio jimu-radio-btn" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" class\x3d"jimu-float-leading online-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/PublicNotification/setting/Setting.html":'\x3cdiv data-dojo-attach-point\x3d"mainContainer" class\x3d"main-container"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tabsContainer" class\x3d"full-height"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/PublicNotification/setting/css/style.css":'.jimu-widget-public-notification-setting .addTextButton-button {margin: 8px 0; display: inline-block; position: relative; padding-left: 22px; color: #518dca; background: url("images/add_icon.png") no-repeat left; cursor: pointer;}.jimu-rtl .jimu-widget-public-notification-setting .addTextButton-button {padding-left: 0; padding-right: 22px; background-position: right;}.jimu-widget-public-notification-setting .addTextButton-button .addTextButton-menu {position: absolute; display: none; list-style-type: none; top: 16px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.jimu-rtl .jimu-widget-public-notification-setting .addTextButton-button .addTextButton-menu {right: 0; left: auto;}.jimu-widget-public-notification-setting .addTextButton-button:hover .addTextButton-menu {display: inline-block;}.jimu-widget-public-notification-setting .addTextButton-menu .addTextButton-item {white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-public-notification-setting .addTextButton-menu .addTextButton-item:hover {background: #edf2f5; color: #15a4fa;}.jimu-widget-public-notification-setting .fieldset {height: auto; width: 100%; border: 1px solid #a0acbf; border-radius: 5px; color: #596679; min-width: 0px;}.jimu-ltr .jimu-widget-public-notification-setting .fieldsetLegend {margin-left: 20px;}.jimu-rtl .jimu-widget-public-notification-setting .fieldsetLegend {margin-right: 20px;}.jimu-widget-public-notification-setting .fieldsetMainContainer {padding: 8px;}.jimu-widget-public-notification-setting.main-container {width: 100%; height: 100%; overflow: hidden; font-size: 14px;}.jimu-widget-public-notification-setting .jimu-viewstack {height: calc(100% - 42px);}.jimu-widget-public-notification-setting .view {overflow: auto;}.jimu-widget-public-notification-setting .tab-contents {padding: 10px 2px 1px 2px;}.jimu-widget-public-notification-setting .category-panel {width: 270px; overflow-y: auto; overflow-x: hidden;}.jimu-widget-public-notification-setting .details-panel {width: calc(100% - 290px); overflow-y: auto; overflow-x: hidden;}.jimu-widget-public-notification-setting .details-label {width: 120px; vertical-align: top;}.jimu-widget-public-notification-setting .details-value {width: calc(100% - 125px);}.jimu-widget-public-notification-setting .jimu-btn {line-height: 28px;}.jimu-ltr .jimu-widget-public-notification-setting .majorTrailingHorizGap {margin-right: 24px;}.jimu-rtl .jimu-widget-public-notification-setting .majorTrailingHorizGap {margin-left: 24px;}.jimu-ltr .jimu-widget-public-notification-setting .minorTrailingHorizGap {margin-right: 5px;}.jimu-rtl .jimu-widget-public-notification-setting .minorTrailingHorizGap {margin-left: 5px;}.jimu-widget-public-notification-setting .majorTrailingVertGap {margin-bottom: 12px;}.jimu-widget-public-notification-setting .minorTrailingVertGap {margin-bottom: 2px;}.jimu-widget-public-notification-setting .edit-button {background: url(images/edit_icon.png) no-repeat center; cursor: pointer; width: 20px; height: 30px; -webkit-flex-shrink: 0; flex-shrink: 0;}.jimu-widget-public-notification-setting .edit-button:hover {background-color: rgba(36, 181, 204, 0.4);}.jimu-widget-public-notification-setting .hint {font-size: 12px; font-style: italic; color: #999999; margin-top: 5px;}.jimu-widget-public-notification-setting .static-text {margin-top: 5px;}.jimu-ltr .jimu-widget-public-notification-setting .dijitNumberTextBox .dijitInputInner {text-align: left;}.jimu-rtl .jimu-widget-public-notification-setting .dijitNumberTextBox .dijitInputInner {text-align: right;}.jimu-widget-public-notification-setting .italic {font-style: italic;}.jimu-widget-public-notification-setting .full-width {width: 100%;}.jimu-widget-public-notification-setting .full-height {height: 100%;}.jimu-widget-public-notification-setting .half-width {width: 50%;}.jimu-widget-public-notification-setting .third-width {width: 33%;}.jimu-widget-public-notification-setting .two-thirds-width {width: 66%;}.jimu-ltr .jimu-widget-public-notification-setting .indented {padding-left: 22px;}.jimu-rtl .jimu-widget-public-notification-setting .indented {padding-right: 22px;}.jimu-widget-public-notification-setting .clear {clear: both;}.jimu-widget-public-notification-setting .inline-block {display: inline-block;}.jimu-widget-public-notification-setting .flexbox {display: -webkit-flex; display: flex;}.jimu-widget-public-notification-setting .variable-width {-webkit-flex-grow: 1; flex-grow: 1;}.jimu-widget-public-notification-setting .optionsTableHeaderHeight {margin-top: 36px;}.jimu-widget-public-notification-setting .hidden {visibility: hidden;}.jimu-widget-public-notification-setting .hiddenEmpty {display: none;}.jimu-widget-public-notification-setting .readOnlyTextField {border: solid #d9dde0 1px; padding: 5px 10px; min-height: 30px;}.jimu-widget-public-notification-setting-fields .fields-checkbox {width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-public-notification-setting-fields .fields-checkbox .label {width: 140px;}.jimu-rtl .jimu-widget-public-notification-setting-fields .fields-checkbox {margin-right: 30px; margin-left: auto;}.jimu-widget-public-notification-setting .wrapText {word-wrap: break-word; overflow-wrap: break-word;}',
"*now":function(e){e(['dojo/i18n!*preload*widgets/PublicNotification/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/string jimu/BaseWidgetSetting jimu/dijit/Message jimu/dijit/TabContainer3 jimu/LayerInfos/LayerInfos ./convert ./SettingAddresseesBlock ./SettingBufferBlock ./SettingCheckbox ./SettingCheckboxLabeled ./SettingContainer ./SettingInputLabeled ./SettingLabelFormats ./SettingOptionsTable ./SettingSearchSourcesBlock ./SettingStaticText dojo/domReady!".split(" "),function(e,k,l,g,h,c,a,b,f,n,p,d,u,
r,t,q,m,w,v,y,C,z){return k([b],{baseClass:"jimu-widget-public-notification-setting",_descriptions:[],_guidance:null,_webmapFeatureLayers:[],postCreate:function(){this.inherited(arguments);p.getInstance(this.map,this.map.itemInfo).then(l.hitch(this,function(a){this._webmapFeatureLayers=this._getWebmapFeatureLayers(a);this._descriptions=[];this._descriptions.push(this._createSearchSourceSettings());this._descriptions.push(this._createAddressSourceSettings());this._descriptions.push(this._createNotificationSettings());
this._updateAddresseeSources(a);this.setConfig(this.config);this._initTabs(this.tabsContainer,this._descriptions)}))},setConfig:function(a){this.config=l.mixin({},a||{},this.config);this.config.searchSourceSettings.drawing.tools=d.toolCodesToLabels(this.nls.propertyLabels,this.config.searchSourceSettings.drawing.tools);this.config.searchSourceSettings.drawing.buffer.bufferUnitsMenu=d.unitCodesToLabels(jimuNls.units,this.config.searchSourceSettings.drawing.buffer.bufferUnitsMenu);this.config.notificationSettings.labelFormats=
this._initializeLabelFormats(this.config.notificationSettings.labelFormats,this.config.labelFormatTemplates);e.forEach(this._descriptions,l.hitch(this,function(a){a.content.setConfig(this.config)}))},getConfig:function(){var a=[];e.forEach(this._descriptions,l.hitch(this,function(b){b.content.getConfig(this.config,a)}));this.config.searchSourceSettings.geometryServiceURL||a.push(this.nls.problems.noGeometryServiceURL);0>this.config.searchSourceSettings.drawing.buffer.bufferUnitsMenu[0].indexOf("1")&&
a.push(this.nls.problems.noBufferUnitsForDrawingTools);this.config.searchSourceSettings.drawing.tools=d.labelsToToolCodes(this.nls.propertyLabels,this.config.searchSourceSettings.drawing.tools);this.config.searchSourceSettings.drawing.buffer.bufferUnitsMenu=d.labelsToUnitCodes(jimuNls.units,this.config.searchSourceSettings.drawing.buffer.bufferUnitsMenu);return 0<a.length?(new f({message:"\x3cul\x3e\x3cli\x3e"+a.join("\x3c/li\x3e\x3cli\x3e")+"\x3c/li\x3e\x3c/ul\x3e"}),!1):this.config},getDataSources:function(){},
destroy:function(){e.forEach(this._descriptions,function(a){a.node&&h.destroy(a.node)});this._descriptions=[];this.inherited(arguments)},_initializeLabelFormats:function(b,c){var d;if(Array.isArray(b)&&2<=b.length)return b;d=[a.rep("0",c.length)];e.forEach(c,function(b){var c={hint:""};"CSV"===b.labelSpec.type?c.name=this.nls.placeholders.descriptionCSV:(c.name=a.substitute(this.nls.placeholders.descriptionPDF,b.descriptionPDF),b.descriptionPDF.averyPartNumber&&(c.hint=a.substitute(this.nls.placeholders.averyExample,
b.descriptionPDF)));c.labelSpec=l.clone(b.labelSpec);d.push(c)},this);return d},_getWebmapFeatureLayers:function(a){var b=[];a=a.getLayerInfoArray();e.forEach(a,function(a){"ArcGISFeatureLayer"===a.originOperLayer.layerType&&b.push({name:a.title,layerId:a.id,url:a.originOperLayer.url,displayField:a.originOperLayer.layerObject.displayField,fields:a.originOperLayer.layerObject.fields})});return b},_updateAddresseeSources:function(a){var b=[],c=[""],d;a=a.getLayerInfoArray();e.forEach(a,function(a){a.originOperLayer.popupInfo&&
a.originOperLayer.popupInfo.description&&b.push(a)});this.config.addresseeSourceSettings.sources=this.config.addresseeSourceSettings.sources||[""];d=this.config.addresseeSourceSettings.sources[0];a=this.config.addresseeSourceSettings.sources.slice(1);e.forEach(a,function(a,f){var g=-1;e.some(b,function(b,c){return b.title===a.name?(g=c,!0):!1})&&(c[0]+=d[f],c.push(a),b.splice(g,1))});e.forEach(b,function(a){c[0]+="0";c.push({name:a.title,useRelatedRecords:0===a.layerObject.relationships.length?null:
!1})});this.config.addresseeSourceSettings.sources=c},_initTabs:function(a,b){var d=[],f;e.forEach(b,function(a){d.push({title:a.title,content:a.node})});f=new n({tabs:d,"class":"full-height"});f.placeAt(a);this.own(c(f,"tabChanged",l.hitch(this,function(){f.containerNode.scrollTop=0})))},_createSearchSourceSettings:function(){var a,b=this.nls;a={title:b.searchSourceSetting.title,node:h.create("div",{"class":"tab-contents"}),content:null};a.content=new m("searchSourceSettings","","majorTrailingVertGap",
[new z(null,"full-width hint",b.searchSourceSetting.mainHint),new w("geometryServiceURL",!1,"full-width","details-label","details-value",b.propertyLabels.urlToGeometryService),new C("search",b,"",this.map,this._webmapFeatureLayers,this.appConfig.portalUrl),new m("drawing","flexbox","majorTrailingHorizGap",b.groupingLabels.drawingTools,"full-width",[new m("","","majorTrailingVertGap",[new y("tools","category-panel","",b.propertyLabels.tool,null,b.hints.selectionListOfOptionsToDisplay),new t("select",
b.propertyLabels.useSelectionDrawTools)]),new r("buffer",b,"details-panel","details-label","details-value",this.config.bufferTemplate,b.propertyLabels.bufferDefaultDistance,"100")])]);h.place(a.content.div(),a.node);return a},_createAddressSourceSettings:function(){var a,b=this.nls;a={title:b.addressSourceSetting.title,node:h.create("div",{"class":"tab-contents"}),content:null};a.content=new m("addresseeSourceSettings","","majorTrailingVertGap",[new z(null,"full-width hint",b.addressSourceSetting.mainHint),
new u("sources",b)]);h.place(a.content.div(),a.node);return a},_createNotificationSettings:function(){var a,b=this.nls;a={title:b.notificationSetting.title,node:h.create("div",{"class":"tab-contents"}),content:null};this._guidance=new m("guidance","inline-block indented"+(this.config.notificationSettings.labelPageOptions.showGuidance?"":" hiddenEmpty"),"majorTrailingVertGap",[new q("showLabelOutlines","full-width","half-width","half-width",b.propertyLabels.showLabelOutlines),new q("showGrid","full-width",
"half-width","half-width",b.propertyLabels.showGridTickMarks),new w("noteFontSizePx",!0,"full-width","half-width","half-width",b.propertyLabels.fontSizeAlignmentNote,"7","","",b.propertyLabels.pixels,{min:4,max:12,places:0}),new w("gridBlackPercent",!0,"full-width","half-width","half-width",b.propertyLabels.gridDarkness,"25","","",b.propertyLabels.percentBlack,{min:0,max:100,places:0}),new w("labelBorderBlackPercent",!0,"full-width","half-width","half-width",b.propertyLabels.labelBorderDarkness,"100",
"","",b.propertyLabels.percentBlack,{min:0,max:100,places:0}),new w("leftIn",!0,"full-width","half-width","half-width",b.propertyLabels.gridlineLeftInset,"0.1667","","",jimuNls.units.inches,{min:0}),new w("rightIn",!0,"full-width","half-width","half-width",b.propertyLabels.gridlineRightInset,"0.1667","","",jimuNls.units.inches,{min:0}),new w("majorTickIn",!0,"full-width","half-width","half-width",b.propertyLabels.gridlineMajorTickMarksGap,"1","","",jimuNls.units.inches,{min:.039}),new w("minorTickIn",
!0,"full-width","half-width","half-width",b.propertyLabels.gridlineMinorTickMarksGap,"0.1","","",jimuNls.units.inches,{min:.039})]);a.content=new m("notificationSettings","","majorTrailingVertGap",[new z(null,"full-width hint",b.notificationSetting.mainHint),new v("labelFormats",b,""),new m("labelPageOptions","flexbox","majorTrailingHorizGap",b.groupingLabels.printingOptions,"full-width",[new m(null,"half-width inline-block","majorTrailingVertGap",[new w("rasterResolutionPxPerIn",!0,"full-width hiddenEmpty",
"","full-width",b.propertyLabels.rasterResolution,"150",b.hints.rasterResolution,"",b.propertyLabels.pixelsPerInch,{min:100,max:200,places:0}),new t("useVectorFonts",b.propertyLabels.useVectorFonts)]),new m(null,"half-width inline-block","majorTrailingVertGap",[new t("showGuidance",b.propertyLabels.showAlignmentAids,"",l.hitch(this,this._showHideGuidance)),this._guidance])])]);h.place(a.content.div(),a.node);return a},_showHideGuidance:function(a){a?g.remove(this._guidance._mainDiv,"hiddenEmpty"):
g.add(this._guidance._mainDiv,"hiddenEmpty")}})});