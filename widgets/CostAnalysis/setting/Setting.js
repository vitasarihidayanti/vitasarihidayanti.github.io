// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/CostAnalysis/setting/GeneralSettings":function(){define("dojo/_base/declare jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!./GeneralSettings.html dojo/_base/lang dojo/on dojo/dom-attr dojo/dom-class".split(" "),function(t,r,u,n,h,m,g,a){return t([r,u],{templateString:n,baseClass:"jimu-widget-cost-analysis-general-settings",constructor:function(a){h.mixin(this,a)},postMixInProperties:function(){this.nls.common={};h.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);
this._init()},_init:function(){this._setConfig();this._attachNodeEvents();this.currencyInputNode.validator=h.hitch(this,this._currencyValidator);this.bufferDistanceInputNode.validator=h.hitch(this,this._bufferDistanceValidator)},_setConfig:function(){this.measurementUnitInputNode.set("value",this.config.generalSettings.measurementUnit);this.currencyInputNode.set("value",this.config.generalSettings.currency);this.roundCostInputNode.set("value",this.config.generalSettings.roundCostType);this.projectAreaTypeInputNode.set("value",
this.config.generalSettings.projectAreaType);this.bufferDistanceInputNode.set("value",this.config.generalSettings.bufferDistance)},validate:function(){var a;a=this.projectAreaTypeInputNode.get("value");return this.currencyInputNode.validate()?"buffer"!==a||this.bufferDistanceInputNode.validate()?{isValid:!0}:{isValid:!1,errorMessage:this.nls.generalSettings.errorMessages.bufferDistance}:{isValid:!1,errorMessage:this.nls.generalSettings.errorMessages.currency}},getConfig:function(){return{measurementUnit:this.measurementUnitInputNode.get("value"),
currency:this.currencyInputNode.get("value"),roundCostType:this.roundCostInputNode.get("value"),projectAreaType:this.projectAreaTypeInputNode.get("value"),bufferDistance:this.bufferDistanceInputNode.get("value")}},_attachNodeEvents:function(){this.own(m(this.measurementUnitInputNode,"change",h.hitch(this,function(a){g.set(this.bufferDistanceUnit,"innerHTML",this.nls.units[a].label)})));this.own(m(this.projectAreaTypeInputNode,"change",h.hitch(this,function(f){"outline"===f?(this.bufferDistanceInputNode.textbox.value=
"5",this.bufferDistanceInputNode.set("disabled",!0),a.add(this.projectSettingsOutputRightContainerNode,"esriCTHidden")):(this.bufferDistanceInputNode.set("disabled",!1),a.remove(this.projectSettingsOutputRightContainerNode,"esriCTHidden"))})))},_currencyValidator:function(a){return a.match(/^([^0-9]+)$/)?!0:(this.currencyInputNode.invalidMessage=this.nls.generalSettings.errorMessages.currency,!1)},_bufferDistanceValidator:function(a){return 0>a||100<a?(this.bufferDistanceInputNode.invalidMessage=
this.nls.generalSettings.errorMessages.outOfRangebufferDistance,!1):a.match(/^([0-9]*[1-9][0-9]*(\.[0-9]+)?|[0]+\.[0-9]*[1-9][0-9]*)$/)?!0:(this.bufferDistanceInputNode.invalidMessage=this.nls.generalSettings.errorMessages.bufferDistance,!1)}})})},"widgets/CostAnalysis/setting/ProjectSettings":function(){define("dojo/_base/declare jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!./ProjectSettings.html dojo/_base/lang dojo/on dojo/_base/array dojo/Evented dojo/string esri/layers/FeatureLayer dojo/promise/all dojo/Deferred jimu/dijit/CheckBox".split(" "),
function(t,r,u,n,h,m,g,a,f,d,q,k){return t([r,u,a],{baseClass:"jimu-widget-cost-analysis-project-settings",templateString:n,_configuredFieldsTable:null,_prevCostingGeometryLayerValue:"",_prevProjectLayerValue:"",_prevProjectAssetsTableValue:"",_prevProjectMultiplierTableValue:"",_defaultSelectOption:{},_assetsTableRequiredFields:{},_multiplierTableRequiredFields:{},constructor:function(c){h.mixin(this,c)},postMixInProperties:function(){this.nls.common={};h.mixin(this.nls.common,window.jimuNls.common)},
postCreate:function(){this._configuredFieldsTable=null;this._prevProjectMultiplierTableValue=this._prevProjectAssetsTableValue=this._prevProjectLayerValue=this._prevCostingGeometryLayerValue="";this.own(m(this.costingGeometryHelp,"click",h.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.costingGeometryHelp)})));this.own(m(this.fieldToLabelGeographyHelp,"click",h.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.fieldToLabelGeographyHelp)})));this.own(m(this.projectAssetsTableHelp,
"click",h.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectAssetsTableHelp)})));this.own(m(this.projectMultiplierTableHelp,"click",h.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectMultiplierTableHelp)})));this.own(m(this.projectLayerHelp,"click",h.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectLayerHelp)})));this._assetsTableRequiredFields={ASSETGUID:["esriFieldTypeGUID"],COSTEQUATION:["esriFieldTypeString"],
SCENARIO:["esriFieldTypeString"],TEMPLATENAME:["esriFieldTypeString"],GEOGRAPHYGUID:["esriFieldTypeGUID"],PROJECTGUID:["esriFieldTypeGUID"]};this._multiplierTableRequiredFields={DESCRIPTION:["esriFieldTypeString"],TYPE:["esriFieldTypeString"],VALUE:["esriFieldTypeDouble","esriFieldTypeSingle"],COSTINDEX:["esriFieldTypeSmallInteger","esriFieldTypeInteger"],PROJECTGUID:["esriFieldTypeGUID"]};this._defaultSelectOption={value:"",label:this.nls.projectSettings.selectLabel};this.inherited(arguments);this._init()},
getConfig:function(){return{costingGeometryLayer:this._prevCostingGeometryLayerValue,geographyField:this.fieldToLabelGeography.value,assetTable:this._prevProjectAssetsTableValue,multiplierAdditionalCostTable:this._prevProjectMultiplierTableValue,projectLayer:this._prevProjectLayerValue}},validate:function(){var c,a;c=!0;a="";""===this._prevProjectAssetsTableValue&&""===this._prevProjectMultiplierTableValue&&""===this._prevProjectLayerValue||""!==this._prevProjectAssetsTableValue&&""!==this._prevProjectMultiplierTableValue&&
""!==this._prevProjectLayerValue||(a=[],""===this._prevProjectAssetsTableValue&&a.push(this.nls.projectSettings.projectAssetsTableLabel),""===this._prevProjectMultiplierTableValue&&a.push(this.nls.projectSettings.projectMultiplierTableLabel),""===this._prevProjectLayerValue&&a.push(this.nls.projectSettings.projectLayerLabel),a=a.join(" and "),c=!1,a=f.substitute(this.nls.projectSettings.errorMessages.invalidConfiguration,{fieldsString:h.trim(a)}));return{isValid:c,errorMessage:a}},_init:function(){var c,
a,f;c=[];a=[];f=[];this.map&&this.map.itemInfo&&this.map.itemInfo.itemData&&(this.map.itemInfo.itemData.operationalLayers&&0<this.map.itemInfo.itemData.operationalLayers.length&&(c=this.map.itemInfo.itemData.operationalLayers),this.map.itemInfo.itemData.tables&&0<this.map.itemInfo.itemData.tables.length&&(a=this.map.itemInfo.itemData.tables));this._filterValidLayersForDropDown(c);g.forEach(a,h.hitch(this,function(c){var a=new k;f.push(a);c=new d(c.url);m(c,"load",h.hitch(this,function(b){g.forEach(this.map.itemInfo.itemData.tables,
h.hitch(this,function(e){if(e.url===b.layer.url)return b.layer.id=e.id,b.layer.title=e.title,!0}));a.resolve(b.layer)}));m(c,"error",h.hitch(this,function(){a.resolve(null)}))}));q(f).then(h.hitch(this,function(c){this._populateTablesForDropDown(c)}));m(this.fieldToLabelGeography,"change",h.hitch(this,function(c){this.emit("onGeographyFieldChange",c,this.costingGeometryLayerDropDown.getValue())}));this._attachingEvents();this._setConfig()},_filterValidLayersForDropDown:function(c){var a,d;a=[this._defaultSelectOption];
d=[this._defaultSelectOption];this._costingGeometryLayerFieldOptions={defaultSelectOption:{options:[this._defaultSelectOption]}};c=c&&0<c.length?this._getLayerOptions(c,a,d):{costingGeometryLayerOptions:a,projectLayerOptions:d};this.costingGeometryLayerDropDown.set("options",h.clone(c.costingGeometryLayerOptions));this.projectLayerDropDown.set("options",h.clone(c.projectLayerOptions))},_getLayerOptions:function(c,a,d){var l;g.forEach(c,h.hitch(this,function(c){if(c.layerObject&&c.layerObject.capabilities)l=
c.layerObject.capabilities;else return!0;"esriGeometryPolygon"===c.layerObject.geometryType&&-1<l.indexOf("Query")&&this._hasGlobalIDField(c)&&(a.push({value:c.id,label:c.title}),"ArcGISFeatureLayer"===c.layerType&&(-1<l.indexOf("Editing")||-1<l.indexOf("Update"))&&-1<l.indexOf("Create")&&-1<l.indexOf("Delete")&&this._isValidProjectLayer(c)&&d.push({value:c.id,label:c.title}))}));return{costingGeometryLayerOptions:a,projectLayerOptions:d}},_isValidProjectLayer:function(c){var a,d,f,p,b;p=["esriFieldTypeDouble",
"esriFieldTypeSingle"];c=c.layerObject.fields;f=[];for(a in c)b=c[a].type,d=c[a].name.toUpperCase(),("PROJECTNAME"===d&&"esriFieldTypeString"===b||"DESCRIPTION"===d&&"esriFieldTypeString"===b||"TOTALASSETCOST"===d&&-1<p.indexOf(b)||"GROSSPROJECTCOST"===d&&-1<p.indexOf(b)||"esriFieldTypeGlobalID"===b)&&f.push(d);return 5===f.length?!0:!1},_hasGlobalIDField:function(c){var a;a=!1;(c=c.layerObject.fields||c.fields)&&0<c.length&&g.some(c,h.hitch(this,function(c){if("esriFieldTypeGlobalID"===c.type)return a=
!0}));return a},_populateTablesForDropDown:function(c){var a,d;a=[this._defaultSelectOption];d=[this._defaultSelectOption];c&&0<c.length&&g.forEach(c,h.hitch(this,function(c){c&&this._isValidTable(c,"projectAssets")&&a.push({value:c.id||c.name,label:c.title||c.name});c&&this._isValidTable(c,"projectMultiplier")&&d.push({value:c.id||c.name,label:c.title||c.name})}));this.projectAssetsTable.addOption(h.clone(a));this.projectMultiplierTable.addOption(h.clone(d));this._setSelectedValuesInTables()},_isValidTable:function(c,
a){var d,f,p=[];d=!1;(c=c.fields)&&0<c.length&&g.some(c,h.hitch(this,function(b){f=b.name.toUpperCase();if("projectAssets"===a&&this._assetsTableRequiredFields[f]&&-1<this._assetsTableRequiredFields[f].indexOf(b.type)&&!b.domain){if(p.push(b.name),p.length===Object.keys(this._assetsTableRequiredFields).length)return d=!0}else if("projectMultiplier"===a&&this._multiplierTableRequiredFields[f]&&-1<this._multiplierTableRequiredFields[f].indexOf(b.type)&&!b.domain&&(p.push(b.name),p.length===Object.keys(this._multiplierTableRequiredFields).length))return d=
!0}));return d},_setSelectedValuesInTables:function(){var c;this.config.assetTable?(c=this.layerInfosObj.getTableInfoById(this.config.assetTable))&&c.layerObject?(this.projectAssetsTable.set("value",this.config.assetTable),this._prevProjectAssetsTableValue=this.config.assetTable):(this.projectAssetsTable.set("value",""),this._prevProjectAssetsTableValue=""):(this.projectAssetsTable.set("value",""),this._prevProjectAssetsTableValue="");this.config.multiplierAdditionalCostTable?(c=this.layerInfosObj.getTableInfoById(this.config.multiplierAdditionalCostTable))&&
c.layerObject?(this.projectMultiplierTable.set("value",this.config.multiplierAdditionalCostTable),this._prevProjectMultiplierTableValue=this.config.multiplierAdditionalCostTable):(this.projectMultiplierTable.set("value",""),this._prevProjectMultiplierTableValue=""):(this.projectMultiplierTable.set("value",""),this._prevProjectMultiplierTableValue="")},_setConfig:function(){var c;this.config.costingGeometryLayer&&this.layerInfosObj.getLayerInfoById(this.config.costingGeometryLayer)&&(c=this.layerInfosObj.getLayerInfoById(this.config.costingGeometryLayer).layerObject);
c?(this.costingGeometryLayerDropDown.set("value",this.config.costingGeometryLayer),this._prevCostingGeometryLayerValue=this.config.costingGeometryLayer,this._createCostingGeometryLayerFieldOptions(c,this._costingGeometryLayerFieldOptions),this.fieldToLabelGeography.options=[],this.fieldToLabelGeography.options.length=0,this.config.geographyField?(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions[this.config.costingGeometryLayer].options),this.fieldToLabelGeography.set("disabled",
!1)):(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",!0))):(this.costingGeometryLayerDropDown.set("value",""),this._prevCostingGeometryLayerValue="",this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",!0),this.fieldToLabelGeography.set("value",""));this.config.projectLayer&&this.projectLayerDropDown&&
1<this.projectLayerDropDown.options.length?(this.projectLayerDropDown.set("value",this.config.projectLayer),this._prevProjectLayerValue=this.config.projectLayer):(this.projectLayerDropDown.set("value",""),this._prevProjectLayerValue="")},_attachingEvents:function(){this.own(m(this.costingGeometryLayerDropDown,"change",h.hitch(this,function(c){c!==this.costingGeometryLayerDropDown.value&&this.costingGeometryLayerDropDown.set("value",c);""===c||this._costingGeometryLayerFieldOptions[c]||(c=this.layerInfosObj.getLayerInfoById(c).layerObject,
this._createCostingGeometryLayerFieldOptions(c,this._costingGeometryLayerFieldOptions));this._onDropdownChange(this.costingGeometryLayerDropDown,"costingGeometryLayer","layer")})));this.own(m(this.projectLayerDropDown,"change",h.hitch(this,function(){this._onDropdownChange(this.projectLayerDropDown,"projectLayer","layer")})));this.own(m(this.projectAssetsTable,"change",h.hitch(this,function(){this._onDropdownChange(this.projectAssetsTable,"projectAssets","table")})));this.own(m(this.projectMultiplierTable,
"change",h.hitch(this,function(){this._onDropdownChange(this.projectMultiplierTable,"projectMultiplier","table")})))},_onDropdownChange:function(c,a,d){("layer"===d?this._validateDuplicateSelection(c,this.projectLayerDropDown,this.costingGeometryLayerDropDown):this._validateDuplicateSelection(c,this.projectAssetsTable,this.projectMultiplierTable))?this._setNewDropdownValue(c,a):this._restorePreviousDropdownValue(c,a)},_validateDuplicateSelection:function(c,a,d){return c.value&&a.value===d.value?(c=
f.substitute(this.nls.projectSettings.errorMessages.duplicateLayerSelection,{layerName:h.trim(c.tableNode.innerText)}),this.emit("onDuplicateLayerSelect",c),!1):!0},_setNewDropdownValue:function(c,a){switch(a){case "costingGeometryLayer":this._onCostingGeometryLayerDropDownChange();this._prevCostingGeometryLayerValue!==c.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevCostingGeometryLayerValue,currentSelectedLayerId:c.value}),this.emit("onGeographyFieldChange",this.fieldToLabelGeography.get("value"),
this.costingGeometryLayerDropDown.get("value")),this._prevCostingGeometryLayerValue=c.value);break;case "projectLayer":this._onProjectLayerDropDownChange();this._prevProjectLayerValue!==c.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevProjectLayerValue,currentSelectedLayerId:c.value}),this._prevProjectLayerValue=c.value);break;case "projectAssets":this._prevProjectAssetsTableValue=c.value;break;case "projectMultiplier":this._prevProjectMultiplierTableValue=c.value}},_restorePreviousDropdownValue:function(c,
a){switch(a){case "costingGeometryLayer":c.set("value",this._prevCostingGeometryLayerValue);break;case "projectLayer":c.set("value",this._prevProjectLayerValue);break;case "projectAssets":c.set("value",this._prevProjectAssetsTableValue);break;case "projectMultiplier":c.set("value",this._prevProjectMultiplierTableValue)}},_createCostingGeometryLayerFieldOptions:function(c,a){var d;d=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];
c&&c.fields&&0<c.fields.length?(a[c.id]||(a[c.id]={},a[c.id].options=[]),g.forEach(c.fields,h.hitch(this,function(f){-1<d.indexOf(f.type)&&a[c.id].options.push({value:f.name,label:f.alias?f.alias:f.name})}))):a[c.id].options.push([this._defaultSelectOption])},_onCostingGeometryLayerDropDownChange:function(){var c;this.fieldToLabelGeography.options=[];this.fieldToLabelGeography.options.length=0;c=this.costingGeometryLayerDropDown.value;""!==c?(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions[c].options),
this.fieldToLabelGeography.set("disabled",!1)):(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",!0));this.config.geographyField?this.fieldToLabelGeography.set("value",this.config.geographyField,!1):this.fieldToLabelGeography.set("value","",!1)},_onProjectLayerDropDownChange:function(){var c,a;c={idFieldOptions:[this._defaultSelectOption],stringFieldOptions:[this._defaultSelectOption],costFieldOptions:[this._defaultSelectOption]};
this.projectLayerDropDown.value&&(a=this.layerInfosObj.getLayerInfoById(this.projectLayerDropDown.value).layerObject,c=this._getTableDropdownOptions(a.fields,c))},_getTableDropdownOptions:function(a,d){var c,f,p;c=["esriFieldTypeOID","esriFieldTypeGlobalID"];f=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];g.forEach(a,h.hitch(this,function(b){p={value:b.name,label:b.alias?b.alias:b.name};-1<c.indexOf(b.type)?d.idFieldOptions.push(p):-1<f.indexOf(b.type)?
d.costFieldOptions.push(p):"esriFieldTypeString"===b.type&&d.stringFieldOptions.push(p)}));return d}})})},"widgets/CostAnalysis/setting/LayerSettings":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented jimu/dijit/Message dijit/_WidgetsInTemplateMixin dojo/text!./LayerSettings.html dojo/_base/lang jimu/dijit/SimpleTable dojo/_base/array dojo/query dijit/registry dojo/dom-class dijit/form/Select dojo/dom-construct dojo/_base/html dojo/on dojo/dom-attr".split(" "),function(t,r,u,n,h,
m,g,a,f,d,q,k,c,l,v,x,p){return t([r,u,h],{templateString:m,baseClass:"jimu-widget-cost-analysis-layer-settings",_layerSettingsTable:null,constructor:function(b){g.mixin(this,b)},postMixInProperties:function(){this.nls.common={};g.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this._layerSettingsTable=null},setConfig:function(){this._filterLayers()},getConfig:function(){return this._getUpdateLayerSettings()},_getUpdateLayerSettings:function(){var b;if(this._layerSettingsTable)return b=
this._layerSettingsTable.getData(),b=this._getSelectedFields(b)},_createlayerSettingsGrid:function(){this._layerSettingsTable=new a({fields:[{name:"title",title:this.nls.layerSettings.layerNameHeaderTitle,type:"text",editable:!1,width:"44%"},{name:"fieldPicker",title:this.nls.layerSettings.fieldPickerHeaderTitle,type:"empty",editable:!1,width:"40%"},{name:"editable",title:this.nls.layerSettings.EditableLayerHeaderTitle,type:"checkbox",editable:!1,width:"16%"},{name:"selectable",title:this.nls.layerSettings.SelectableLayerHeaderTitle,
type:"checkbox",editable:!1,hidden:!0,width:"16%"},{name:"id",title:"id",type:"text",editable:!1,hidden:!0,width:"0%"},{name:"url",title:"url",type:"text",editable:!1,hidden:!0,width:"0%"}],selectable:!0});this._layerSettingsTable.placeAt(this.layerSettingsTableNode);v.setStyle(this._layerSettingsTable.domNode,{height:"100%"});this._layerSettingsTable.startup()},onLayerSettingChange:function(b){var e={};if(b=this._layerSettingsTable.getRowData(b))e.layerId=b.id,e.editable=null===b.editable?!1:b.editable;
this.emit("onLayerSettingUpdate",e)},_filterLayers:function(){var b,e,a=[];b=this.map.itemInfo.itemData.operationalLayers;0===b.length?k.remove(this.noAssetLayersAvailable,"esriCTHidden"):(k.add(this.noAssetLayersAvailable,"esriCTDisabled"),this._createlayerSettingsGrid(),this._setTableHeadTooltip(),a=[this.config.projectSettings.costingGeometryLayer||"",this.config.projectSettings.projectLayer||""],this.config&&0<this.config.layerSettings.length&&f.forEach(this.config.layerSettings,g.hitch(this,
function(b){(e=this.map.getLayer(b.id))&&(!e.errors||0>=e.errors.length)&&(a.push(b.id),e.editable=this._checkEditCapabilities(e),this._createFieldsRows(b,e.editable))})),f.forEach(b,g.hitch(this,function(b){(!b.errors||0>=b.errors.length)&&"ArcGISFeatureLayer"===b.layerType&&-1===a.indexOf(b.id)&&(b.selectable=!0,b.editable=this._checkEditCapabilities(b.layerObject),this._createFieldsRows(b,b.editable))})))},_checkEditCapabilities:function(b){return b&&b.capabilities&&-1!==b.capabilities.indexOf("Delete")&&
-1!==b.capabilities.indexOf("Create")&&-1!==b.capabilities.indexOf("Update")&&b.globalIdField?!0:!1},_getInvalidLayersMsg:function(b){var e,a=[];e="";b=this.layerInfosObj.getLayerInfoById(b).layerObject;b.capabilities?(-1===b.capabilities.indexOf("Create")&&a.push("Create"),-1===b.capabilities.indexOf("Update")&&a.push("Update"),-1===b.capabilities.indexOf("Delete")&&a.push("Delete")):a=["Create","Update","Delete"];0<a.length&&(e=this.nls.layerSettings.missingCapabilitiesMsg,e+="\x3cbr/\x3e",f.forEach(a,
g.hitch(this,function(b){e+="\x3cli\x3e"+this.nls.layerSettings[b.toLowerCase()]+"\x3c/li\x3e"})));b.globalIdField||(e+="\x3cbr/\x3e",e+=this.nls.layerSettings.missingGlobalIdMsg);return e},_enableDisableEditableCheckbox:function(b,e,a){var c,w;c=d(".simple-table-cell ",b)[2];c.children[0]&&(w=q.byNode(c.children[0]));a?(w.setStatus(!0),b.selectFields&&b.selectFields.set("disabled",!1)):(p.set(w.domNode,"title",this.nls.layerSettings.disableEditableCheckboxTooltip),w.setValue(!1),w.setStatus(!1),
k.add(w.domNode,"jimu-float-leading"),b.selectFields&&b.selectFields.set("disabled",!0),b.errorDiv||(e=this._getInvalidLayersMsg(e.id),b.errorDiv=l.create("div",{"class":"esriCTFieldError"},c),p.set(b.errorDiv,"errorMessage",e),b.errorSpan=l.create("span",{"class":"jimu-icon jimu-icon-error"},b.errorDiv),this.own(x(b.errorDiv,"click",g.hitch(this,function(b){b=p.get(b.currentTarget,"errorMessage");n({message:b})})))))},_createFieldsRows:function(b,e){var a,c,w;b.editable&&(b.selectable=b.editable);
a=this._layerSettingsTable.addRow({title:b.title?b.title:b.name,editable:b.editable,selectable:b.selectable,id:b.id,url:b.url});c=d(".jimu-checkbox",a.tr.children[2]);w=d(".jimu-checkbox",a.tr.children[3]);b.editable&&this._setCheckBoxState(c[0],w[0]);setTimeout(g.hitch(this,function(){this._setHeaderCheckBoxState()}),200);this.own(x(q.byNode(c[0]),"change",g.hitch(this,function(){this._setCheckBoxState(c[0],w[0]);this._setHeaderCheckBoxState();this.onLayerSettingChange(c[0].parentElement.parentElement)})));
this._addFieldsDropDown(a.tr,b);this._enableDisableEditableCheckbox(a.tr,b,e)},_setCheckBoxState:function(b,e){b=q.byNode(b);e=q.byNode(e);b.checked?(e.set("checked",!0),e.set("status",!1),e.set("disable",!0),k.add(e.domNode,"jimu-state-disabled")):(e.set("checked",!0),e.set("status",!0),e.set("disable",!1),k.remove(e.domNode,"jimu-state-disabled"));k.add(e.domNode.children[0],"checked")},_setHeaderCheckBoxState:function(){var b,e,a=!0,c;b=d(".simple-table-title .checkbox",this.domNode)[1];c=d(".simple-table-title .jimu-checkbox",
this.domNode)[1];f.some(this._layerSettingsTable.getRows(),g.hitch(this,function(b){e=d("td.selectable .checked",b);if(0===e.length)return a=!1,!0}));a?(k.add(b,"checked"),q.byNode(c).set("checked",!0)):(k.remove(b,"checked"),q.byNode(c).set("checked",!1))},updateLayerSettingsTable:function(b){var e=this._layerSettingsTable.getData(),a;b.lastSelectedId&&(a=this.layerInfosObj.getLayerInfoById(b.lastSelectedId).layerObject,a.editable=this._checkEditCapabilities(a),a.selectable=!0,this._createFieldsRows(a,
a.editable));b.currentSelectedLayerId&&f.some(e,g.hitch(this,function(e,a){if(e.id===b.currentSelectedLayerId)return this._layerSettingsTable.deleteRow(this._layerSettingsTable.tbody.rows[a]),!0}))},_addFieldsDropDown:function(b,e){var a,f;f=e.layerObject?e.layerObject:this.map._layers[e.id];if(a=d(".simple-table-cell",b)[1])a=l.create("div",{"class":"esriCTDropDownContainer"},a),b.selectFields=new c({options:this._getFieldsOptionsObj(f),"class":"esriCTLayerSettingsFieldsDropdown"}),b.selectFields.placeAt(a),
b.selectFields.startup(),e.selectedField&&b.selectFields.set("value",e.selectedField)},_getFieldsOptionsObj:function(b){var a=[],c,d;d=b.fields;c=["esriFieldTypeString"];a.push({label:this.nls.layerSettings.selectLabel,value:""});f.forEach(d,g.hitch(this,function(e){e.editable&&!e.domain&&-1<c.indexOf(e.type)&&37<e.length&&e.name!==b.typeIdField&&a.push({label:e.alias||e.name,value:e.name})}));return a},_getSelectedFields:function(b){var a;a=this._layerSettingsTable.getRows();f.forEach(a,g.hitch(this,
function(a,e){a.selectFields&&(b[e].selectedField=a.selectFields.getValue(),null===b[e].editable&&(b[e].editable=!1),delete b[e].fieldPicker)}));return b},_setTableHeadTooltip:function(){var b;b=d(".simple-table-thead th",this.domNode);b.length&&(p.set(b[0],"title",this.nls.layerSettings.layerNameHeaderTooltip),p.set(b[1],"title",this.nls.layerSettings.fieldPickerHeaderTooltip),p.set(b[2],"title",this.nls.layerSettings.EditableLayerHeaderTooltip),p.set(b[3],"title",this.nls.layerSettings.SelectableLayerHeaderTooltip))}})})},
"widgets/CostAnalysis/setting/CostingInfo":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./CostingInfo.html dojo/on dojo/dom-construct dojo/_base/lang dojo/_base/array ./ManageScenarios ./CostingTemplate esri/tasks/query esri/tasks/QueryTask dojo/Deferred dojo/string dojo/dom-class".split(" "),function(t,r,u,n,h,m,g,a,f,d,q,k,c,l,v,x){return t([r,u,n],{templateString:h,_manageScenario:null,totalScenariosCollection:[],costingTemplate:{},
_scenarioOptions:[],_geographyOptions:[],costingInfoData:{},_configuredLayers:[],baseClass:"jimu-widget-cost-analysis-costing-info",constructor:function(c){a.mixin(this,c)},postMixInProperties:function(){this.nls.common={};a.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.costingTemplate={};this._manageScenario=null;this.totalScenariosCollection=[];this._scenarioOptions=[];this._geographyOptions=[];this.costingInfoData={};this._configuredLayers=[];this.inherited(arguments);
for(var c in this.config.layerSettings)this._configuredLayers.push(this.config.layerSettings[c].id);this._init();this.own(m(this.btnManageScenarios,"click",a.hitch(this,this._manageScenariosBtnClicked)))},validate:function(){var a=this._validateCostingInfoTabData();return a.isValid?{isValid:!0}:{isValid:!1,errorMessage:a.errorMessage}},getConfig:function(){return{costingInfoData:this.costingInfoData,scenarios:this.totalScenariosCollection}},_init:function(){this._geographyOptions=[{label:this.nls.costingInfo.noneValue,
value:""}];this.config.projectSettings&&""!==this.config.projectSettings.costingGeometryLayer&&void 0!==this.config.projectSettings.costingGeometryLayer?this.getGeographyOptions().then(a.hitch(this,function(){this._createCostingTemplate()})):this._createCostingTemplate()},_createCostingTemplate:function(){var c,b,e=[],e=[this.config.projectSettings.costingGeometryLayer||"",this.config.projectSettings.projectLayer||""];this._getScenarioOptions(this.config.scenarios);c=this.map.itemInfo.itemData.operationalLayers;
this._showHideNoLayerMessage(c.length);if(0<Object.keys(this.config.costingInfoSettings).length)for(b in this.config.costingInfoSettings){var d=this._getOperationalLayer(c,b);d&&(!d.errors||0>=d.errors.length)&&this._createCostingTemplateObj(d)}f.forEach(c,a.hitch(this,function(b){(!b.errors||0>=b.errors.length)&&this._checkEditCapabilities(b.layerObject)&&-1===e.indexOf(b.id)&&-1===this._configuredLayers.indexOf(b.id)&&(b.layerObject.templates.length?this._createCostingTemplateObj(b):b.layerObject.types.length&&
this._createCostingTemplateObj(b))}))},_createCostingTemplateObj:function(a){this.costingTemplate[a.id]=new q({nls:this.nls,map:this.map,config:this.config,layer:a,scenarios:this._scenarioOptions,geographies:this._geographyOptions},g.create("div",{},this.costingTemplateContainer))},_getOperationalLayer:function(c,b){var e;f.some(c,a.hitch(this,function(a){if(a.id===b)return e=a,!0}));return e},_manageScenariosBtnClicked:function(){this._manageScenario=new d({nls:this.nls,map:this.map,config:this.config,
existingScenarios:this.totalScenariosCollection});m(this._manageScenario,"okButtonClicked",a.hitch(this,function(a){this._manageScenario.destroy();this._getScenarioOptions(a)}))},_checkEditCapabilities:function(a){return a&&a.capabilities&&"string"===typeof a.capabilities&&-1!==a.capabilities.indexOf("Delete")&&-1!==a.capabilities.indexOf("Create")&&-1!==a.capabilities.indexOf("Update")&&a.globalIdField?!0:!1},_getScenarioOptions:function(c){var b,e;this._scenarioOptions=[{label:this.nls.costingInfo.noneValue,
value:""}];this.totalScenariosCollection=[];f.forEach(c,a.hitch(this,function(a){b="object"===typeof a?a.field:a;this._scenarioOptions.push({label:b,value:b});this.totalScenariosCollection.push(b)}));for(e in this.costingTemplate)this.costingTemplate[e].updateScenarioOptions(this._scenarioOptions)},getGeographyOptions:function(d,b){var e,f;e=new l;b||(d=this.config.projectSettings.geographyField,b=this.config.projectSettings.costingGeometryLayer);""!==b&&this.layerInfosObj.getLayerInfoById(b)?(b=
this.map._layers[b],b=new c(b.url),f=new k,f.outFields=[d],f.returnDistinctValues=!0,f.returnGeometry=!1,f.where="1\x3d1",b.execute(f,a.hitch(this,function(b){this._geographyQueryTaskComplete(b,d);e.resolve(this._geographyOptions)}),a.hitch(this,function(){this._geographyOptions=[];this._geographyOptions.push({label:this.nls.costingInfo.noneValue,value:""});e.resolve(this._geographyOptions)}))):(this._geographyOptions=[],this._geographyOptions.push({label:this.nls.costingInfo.noneValue,value:""}),
e.resolve(this._geographyOptions));return e.promise},_geographyQueryTaskComplete:function(c,b){this._geographyOptions=[{label:this.nls.costingInfo.noneValue,value:""}];f.forEach(c.features,a.hitch(this,function(a){""!==a.attributes[b]&&null!==a.attributes[b]&&this._geographyOptions.push({label:isNaN(a.attributes[b])?a.attributes[b]:a.attributes[b].toString(),value:a.attributes[b]})}))},_validateCostingInfoTabData:function(){var a,b,e,c,d,w,f;this.costingInfoData={};for(a in this.costingTemplate)if(w=
[],f=[],this.costingTemplate[a]){this.costingInfoData[a]=this.costingTemplate[a].getUpdatedCostingInfo();c=this.costingInfoData[a].length;for(b in this.costingInfoData[a]){d=this.costingInfoData[a][b];-1===f.indexOf(d.featureTemplate)&&f.push(d.featureTemplate);""===d.scenario&&""===d.geography&&-1===w.indexOf(d.featureTemplate)&&w.push(d.featureTemplate);if(!this.costingTemplate[a].validateCostEquation(d.costEquation))return{isValid:!1,errorMessage:v.substitute(this.nls.costingInfo.requiredCostEquation,
{templateName:d.featureTemplate,layerName:this.costingTemplate[a].layer.title})};if(1<c)for(e=parseInt(b,0)+1;e<c;e++){var g;g=this.costingInfoData[a][e];if(d.featureTemplate===g.featureTemplate&&d.scenario===g.scenario&&d.geography===g.geography)return{isValid:!1,errorMessage:v.substitute(this.nls.costingInfo.duplicateTemplateMessage,{layerName:this.costingTemplate[a].layer.title,templateName:d.featureTemplate})}}}c=0;d=f.length;for(c;c<d;c++)if(-1===w.indexOf(f[c]))return{isValid:!1,errorMessage:v.substitute(this.nls.costingInfo.defaultEquationRequired,
{templateName:f[c],layerName:this.costingTemplate[a].layer.title})};if(0===this.costingInfoData[a].length)return{isValid:!1,errorMessage:v.substitute(this.nls.costingInfo.noTemplateAvailable,{layerName:this.costingTemplate[a].layer.title})}}return Object.keys(this.costingInfoData).length?{isValid:!0}:{isValid:!1,errorMessage:v.substitute(this.nls.costingInfo.noLayerMessage,{tabName:this.nls.costingInfo.tabTitle})}},_updateCostingInfoTable:function(a){var b,c;a.layerId?b=a.layerId:(c=a.lastSelectedId,
b=a.currentSelectedLayerId);Object.keys(a).length&&(c?(this.costingTemplate[b]&&this._deleteCostingInfoLayer(b),c&&this._addCostingInfoLayer(c)):a.editable?this._addCostingInfoLayer(b):this.costingTemplate[b]&&this._deleteCostingInfoLayer(b));this._showHideNoLayerMessage(Object.keys(this.costingTemplate).length)},_showHideNoLayerMessage:function(a){0===a?x.remove(this.noEditableLayersAvailable,"esriCTHidden"):x.add(this.noEditableLayersAvailable,"esriCTHidden")},_deleteCostingInfoLayer:function(a){this.costingTemplate[a].destroyRecursive();
delete this.costingTemplate[a];delete this.config.costingInfoSettings[a]},_addCostingInfoLayer:function(c){f.some(this.map.itemInfo.itemData.operationalLayers,a.hitch(this,function(b){if(c===b.id&&this._checkEditCapabilities(b.layerObject))return this._createCostingTemplateObj(b),!0}))},onGeographyFieldUpdate:function(a){for(var b in this.costingTemplate)this.costingTemplate[b].updateGeographyOptions(a)}})})},"widgets/CostAnalysis/setting/ManageScenarios":function(){define("dojo/_base/declare jimu/dijit/Popup jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./ManageScenarios.html dojo/_base/array dojo/_base/lang dojo/on dojo/query dojo/dom-attr".split(" "),
function(t,r,u,n,h,m,g,a,f,d,q,k){return t([n,h,m],{templateString:g,popup:null,_addScenarioTable:null,baseClass:"jimu-widget-cost-analysis-manage-scenarios",constructor:function(a){f.mixin(this,a)},postMixInProperties:function(){this.nls.common={};f.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._addScenarioTable=this.popup=null;this.inherited(arguments);this._init()},_init:function(){this._createManageScenarioTable();this._createManageScenarioPopup();this.own(d(this.addBtnNode,
"click",f.hitch(this,function(){this.scenarioNameNode.set("value",this.scenarioNameNode.get("value").trim());this.scenarioNameNode.validate()?(this._addNewScenario(this._addScenarioTable.getRows().length+1,this.scenarioNameNode.get("value")),this.scenarioNameNode.set("value"," ")):this.scenarioNameNode.focus()})));this.scenarioNameNode.validator=f.hitch(this,this._scenarioNameValidator);this.scenarioNameNode.focus()},_createManageScenarioPopup:function(){this.popup=new r({titleLabel:this.nls.costingInfo.manageScenarioLabel,
content:this.domNode,width:500,height:400,autoHeight:!0,"class":this.baseClass,buttons:[{label:this.nls.common.ok,onClick:f.hitch(this,"onOkButtonClicked")}]})},onOkButtonClicked:function(){this.emit("okButtonClicked",this._addScenarioTable.getData());this.popup.close()},_createManageScenarioTable:function(){this._addScenarioTable=new u({fields:[{name:"id",title:this.nls.costingInfo.srNoLabel,type:"text",editable:!1,width:"100px"},{name:"field",title:this.nls.costingInfo.scenarioNameLabel,type:"text",
editable:!1,width:"200px"},{name:"actions",title:this.nls.costingInfo.deleteLabel,width:"100px",type:"actions",actions:["delete"]}],selectable:!1});this._addScenarioTable.placeAt(this.addScenarioNameTableNode);this._addScenarioTable.startup();this._populateExistingScenarios();this._addScenarioTable.onBeforeRowDelete=f.hitch(this,function(c){var d,f;this._addScenarioTable.deleteRow(c);c=this._addScenarioTable.getRows();a.forEach(c,function(a,c){d=a.cells[0];f=q("div",d)[0];k.set(f,"innerHTML",c+1);
k.set(f,"title",c+1)})})},_populateExistingScenarios:function(){a.forEach(this.existingScenarios,f.hitch(this,function(a,d){this._addNewScenario(d+1,a)}))},_addNewScenario:function(a,d){this._createRow(a,d)},_createRow:function(a,d){this._addScenarioTable.addRow({id:a,field:d})},_scenarioNameValidator:function(a){return""===a?!1:0<this._addScenarioTable.getRowDataArrayByFieldValue("field",a).length?(this.scenarioNameNode.invalidMessage=this.nls.costingInfo.duplicateScenarioName,!1):!0},getUpdatedManageScenarios:function(){this._addScenarioTable.getRows();
q(".simple-table-row",this._addScenarioTable);return[]}})})},"widgets/CostAnalysis/setting/CostingTemplate":function(){define("dojo/_base/declare jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./CostingTemplate.html dojo/_base/array dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on dojo/query dojo/dom-construct dijit/form/Select dijit/form/ValidationTextBox dijit/registry dijit/TooltipDialog dijit/popup ./EditCostEquation ../utils dojo/dom-style".split(" "),
function(t,r,u,n,h,m,g,a,f,d,q,k,c,l,v,x,p,b,e,y,z){return t([u,n,h],{templateString:m,popup:null,_addScenarioTable:null,_featureLayerTemplateOptions:null,baseClass:"jimu-widget-cost-analysis-costing-template",constructor:function(b){a.mixin(this,b)},postMixInProperties:function(){this.nls.common={};a.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._featureLayerTemplateOptions=this._addScenarioTable=this.popup=null;this.inherited(arguments);d.add(this.domNode,"esriCTLayerTableWrapper");
this._init();this.own(q(this.btnCostingTemplateNode,"click",a.hitch(this,this._addCostingTemplateBtnClicked,!0)))},_init:function(){f.set(this.layerName,"innerHTML",this.layer.title);f.set(this.layerName,"title",this.layer.title);this._createCostingTable()},_createCostingTable:function(){this._addCostingInfoLayerTable=new r({fields:[{name:"field",title:this.nls.costingInfo.featureTemplateTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.costingInfo.costEquationTitle,type:"empty",
editable:!0,width:"22%"},{name:"field",title:this.nls.costingInfo.geographyTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.costingInfo.scenarioTitle,type:"empty",editable:!1,width:"22%"},{name:"actions",title:this.nls.costingInfo.actionTitle,width:"12%",type:"actions",actions:["edit","delete"]}],selectable:!1});this._addCostingInfoLayerTable.placeAt(this.addLayerTableNode);this._addCostingInfoLayerTable.startup();this._addCostingInfoLayerTable.onBeforeRowDelete=a.hitch(this,
function(b){this.config.costingInfoSettings[this.layer.id]&&this.config.costingInfoSettings[this.layer.id].splice(b.rowIndex,1);return!0});this._addHelpIconToHeader();this._createHelpPopups();this._windowEventsPopupClose();this._tableOnBeforeRowEdit();this._populateCostingAssets()},_tableOnBeforeRowEdit:function(){this._addCostingInfoLayerTable.onBeforeRowEdit=a.hitch(this,function(b){var c;c={};c.featureTemplateValue=b.featureTemplateFields.get("value");c.costEquationValue=b.costEquationInput.get("value");
c.geographyValue=b.geographyFields.get("value");c.scenarioValue=b.scenarioFields.get("value");this._editCostEquation=new e({nls:this.nls,map:this.map,config:this.config,layerTitle:this.layer.title,currentRow:b,existingRowValues:c,validateCostEquation:this.validateCostEquation});q(this._editCostEquation,"okButtonClicked",a.hitch(this,function(){this._editCostEquation.destroy()}))})},_createHelpPopups:function(){var a;a=c.create("div",{"class":"esriCTCancelDialogPopup",onclick:function(){b.close(this.costEquationHelpDialog);
return!1}});this.costEquationHelpDialog=new p({"class":this.baseClass,content:a.outerHTML+"\x3cdiv class \x3d 'esriCTDialogText'\x3e"+this.nls.costingInfo.costEquationHelpText+"\x3c/div\x3e",onClick:function(b){d.contains(b.target,"esriCTCancelDialogPopup")||b.stopPropagation()}});this.scenarioHelpDialog=new p({"class":this.baseClass,content:a.outerHTML+"\x3cdiv class \x3d 'esriCTDialogText'\x3e"+this.nls.costingInfo.scenarioHelpText+"\x3c/div\x3e",onClick:function(b){d.contains(b.target,"esriCTCancelDialogPopup")||
b.stopPropagation()}})},_windowEventsPopupClose:function(){q(window.document,"click",a.hitch(this,function(a){d.contains(a.target,"esriCTHelpIcon")||(b.close(this.scenarioHelpDialog),b.close(this.costEquationHelpDialog))}));var c=k(".container-node.jimu-viewstack")[0];c&&q(c,"scroll",a.hitch(this,function(){b.close(this.scenarioHelpDialog);b.close(this.costEquationHelpDialog)}))},_addHelpIconToHeader:function(){var b,e,d,f,y;if(b=k(".simple-table-thead tr",this.domNode)[0])e=b.children[1],d=b.children[3];
f=c.create("div",{"class":"esriCTHelpIcon"},e);y=c.create("div",{"class":"esriCTHelpIcon"},d);q(f,"click",a.hitch(this,function(){this._openHelpPopupDialog(this.costEquationHelpDialog,f)}));q(y,"click",a.hitch(this,function(){this._openHelpPopupDialog(this.scenarioHelpDialog,y)}))},_openHelpPopupDialog:function(a,c){b.open({popup:a,around:c,orient:["above-centered"]})},_addCostingTemplateBtnClicked:function(b){this._addLayerRow(b,null,!0)},_addLayerRow:function(b,a,c){b=b?this._addCostingInfoLayerTable.addRow({}):
this._addCostingInfoLayerTable.addRow({},a.rowIndex+1,!1);if(a=k(".simple-table-cell",b.tr))this._addFeatureTemplateDropdown(a[0],b.tr,c),this._addCostEquationTextBox(a[1],b.tr,c),this._addGeographyDropdown(a[2],b.tr,c),this._addScenarioDropdown(a[3],b.tr,c),this._addCopyRowActionIcon(b.tr)},_addFeatureTemplateDropdown:function(b,e,d){this._featureLayerTemplateOptions||this._getFeatureTemplateOptions();b=c.create("div",{"class":"esriCTDropDownContainer"},b);e.featureTemplateFields=new l({options:a.clone(this._featureLayerTemplateOptions),
"class":"esriCTCostingTemplateFeatureTemplate"});e.featureTemplateFields.placeAt(b);e.featureTemplateFields.startup();b=this.config.costingInfoSettings[this.layer.id];e.featureTemplateFields.set("value",b&&0<b.length&&b[e.rowIndex]&&!d?b[e.rowIndex].featureTemplate:this._featureLayerTemplateOptions[e.rowIndex])},_addGeographyDropdown:function(b,e,d){b=c.create("div",{"class":"esriCTDropDownContainer"},b);e.geographyFields=new l({options:a.clone(this.geographies),"class":"esriCTCostingTemplateGeography"});
e.geographyFields.placeAt(b);e.geographyFields.startup();(b=this.config.costingInfoSettings[this.layer.id])&&0<b.length&&b[e.rowIndex]&&!d?(d=b[e.rowIndex].geography,d=""===d?this.nls.costingInfo.noneValue:d,e.geographyFields.set("value",d)):e.geographyFields.set("value","")},_addScenarioDropdown:function(b,e,d){b=c.create("div",{"class":"esriCTDropDownContainer"},b);e.scenarioFields=new l({options:a.clone(this.scenarios),"class":"esriCTCostingInfoScenarioOptions"});e.scenarioFields.placeAt(b);e.scenarioFields.startup();
(b=this.config.costingInfoSettings[this.layer.id])&&0<b.length&&b[e.rowIndex]&&!d?(d=b[e.rowIndex].scenario,d=""===d?this.nls.costingInfo.noneValue:d,e.scenarioFields.set("value",d)):e.scenarioFields.set("value","")},_addCostEquationTextBox:function(b,e,d){b=c.create("div",{"class":"esriCTTextBoxContainer"},b);e.costEquationInput=new v({"class":"esriCTLayerLabelTextBox esriCTFullWidth",spellcheck:!1});e.costEquationInput.placeAt(b);e.costEquationInput.startup();this._setCostEquation(e.costEquationInput);
e.costEquationInput.validator=a.hitch(this,this.validateCostEquation);(b=this.config.costingInfoSettings[this.layer.id])&&0<b.length&&b[e.rowIndex]&&!d&&(d=b[e.rowIndex].costEquation,e.costEquationInput.set("value",d))},_populateCostingAssets:function(){this.config.costingInfoSettings&&this.config.costingInfoSettings.hasOwnProperty(this.layer.id)?this.layer&&this.layer.layerObject&&g.forEach(this.config.costingInfoSettings[this.layer.id],a.hitch(this,function(){this._addLayerRow(!0)})):0<this.layer.layerObject.templates.length?
g.forEach(this.layer.layerObject.templates,a.hitch(this,function(){this._addLayerRow(!0)})):0<this.layer.layerObject.types.length&&g.forEach(this.layer.layerObject.types,a.hitch(this,function(){this._addLayerRow(!0)}))},_getFeatureTemplateOptions:function(){this._featureLayerTemplateOptions=[];this.layer&&this.layer.layerObject&&(this.layer.layerObject.templates&&0<this.layer.layerObject.templates.length?g.forEach(this.layer.layerObject.templates,a.hitch(this,function(b){this._featureLayerTemplateOptions.push({label:b.name,
value:b.name})})):this.layer.layerObject.types&&0<this.layer.layerObject.types.length&&g.forEach(this.layer.layerObject.types,a.hitch(this,function(b){this._featureLayerTemplateOptions.push({label:b.templates[0].name,value:b.templates[0].name})})))},updateScenarioOptions:function(b){var e;e=k(".esriCTCostingInfoScenarioOptions",this.domNode);g.forEach(e,a.hitch(this,function(a){x.byNode(a).set("options",b)}));this.scenarios=b},_setCostEquation:function(b){var a;this.layer&&this.layer.layerObject&&
this.layer.layerObject.geometryType&&(a=this.layer.layerObject.geometryType,"esriGeometryPolyline"===a||"esriGeometryPolygon"===a?b.set("value","{MEASURE}"):b.set("value","{TOTALCOUNT}"))},validateCostEquation:function(b){return y.validateEquation(b)},getUpdatedCostingInfo:function(){var b,e=[],c={};b=this._addCostingInfoLayerTable.getRows();g.forEach(b,a.hitch(this,function(b){b.featureTemplateFields&&b.costEquationInput&&b.geographyFields&&b.scenarioFields&&(c={},b.featureTemplateFields&&(c.featureTemplate=
b.featureTemplateFields.get("value")),b.costEquationInput&&(c.costEquation=b.costEquationInput.get("value")),b.geographyFields&&(c.geography=b.geographyFields.get("value")),b.scenarioFields&&(c.scenario=b.scenarioFields.get("value")),e.push(c))}));return e},_addCopyRowActionIcon:function(b){var e,d;e=k(".action-item-parent",b)[0];d=k(".jimu-icon-edit",b)[0];setTimeout(function(){k(".action-item-parent",b)[0]&&z.set(k(".action-item-parent",b)[0],"width","60px")},100);e&&(b.copyDiv=c.create("div",{"class":"action-item jimu-float-leading row-edit-div jimu-icon jimu-icon-copy",
title:this.nls.costingInfo.copyRowTitle},e),c.place(b.copyDiv,d,"after"),this.own(q(b.copyDiv,"click",a.hitch(this,this._copyRow,b))))},_copyRow:function(b){this._addLayerRow(!1,b);this._setCopyLayerValues(b)},_setCopyLayerValues:function(b){var a=this._addCostingInfoLayerTable.getRows()[b.rowIndex+1];a.featureTemplateFields.set("value",b.featureTemplateFields.get("value"));a.costEquationInput.set("value",b.costEquationInput.get("value"));a.geographyFields.set("value",b.geographyFields.get("value"));
a.scenarioFields.set("value",b.scenarioFields.get("value"))},updateGeographyOptions:function(b){b&&(this.geographies=b);b=k(".esriCTCostingTemplateGeography",this.domNode);g.forEach(b,a.hitch(this,function(b){x.byNode(b).set("options",a.clone(this.geographies));x.byNode(b).startup()}))}})})},"widgets/CostAnalysis/setting/EditCostEquation":function(){define("dojo/_base/declare jimu/dijit/Popup jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./EditCostEquation.html dojo/_base/lang dojo/on dojo/dom-class dojo/query dojo/dom-attr".split(" "),
function(t,r,u,n,h,m,g,a,f,d,q){return t([u,n,h],{templateString:m,popup:null,baseClass:"jimu-widget-cost-analysis-edit-equation",constructor:function(a){g.mixin(this,a)},postMixInProperties:function(){this.nls.common={};g.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.popup=null;this.inherited(arguments);this._init()},_init:function(){this._createEditLayerRowPopup()},_createEditLayerRowPopup:function(){var a;this.popup=new r({titleLabel:this.layerTitle+": "+this.existingRowValues.featureTemplateValue,
content:this.domNode,width:600,height:515,autoHeight:!0,"class":this.baseClass,buttons:[{label:this.nls.common.ok,onClick:g.hitch(this,"onOkButtonClicked")},{label:this.nls.common.cancel,classNames:["jimu-btn-vacation"],onClick:g.hitch(this,"onCancelButtonClicked")}]});a=d(".title-label",this.popup.domNode)[0];q.set(a,"title",this.layerTitle+": "+this.existingRowValues.featureTemplateValue);this._setRowPopupValues()},onOkButtonClicked:function(){f.contains(this.costEquationValue.domNode,"esriCTCostEquationError")?
alert(this.nls.costingInfo.validCostEquationMessage):(this.currentRow.costEquationInput.set("value",this.costEquationValue.getValue()),this.popup.close())},onCancelButtonClicked:function(){this.popup.close()},_setRowPopupValues:function(){var d,c;d=""===this.existingRowValues.geographyValue?this.nls.costingInfo.noneValue:this.existingRowValues.geographyValue;c=""===this.existingRowValues.scenarioValue?this.nls.costingInfo.noneValue:this.existingRowValues.scenarioValue;this.geographyValue.set("value",
d);this.scenarioValue.set("value",c);this.costEquationValue.set("value",this.existingRowValues.costEquationValue);a(this.costEquationValue,"KeyUp",g.hitch(this,function(a){this._costEquationKeyUp(a)}));this.costEquationHint.innerHTML=this.nls.costingInfo.hintText},_costEquationKeyUp:function(a){var c;c=this.costEquationValue.domNode;f.contains(c,"esriCTCostEquationError")&&f.remove(c,"esriCTCostEquationError");this.validateCostEquation(a.currentTarget.value)||f.add(c,"esriCTCostEquationError")}})})},
"widgets/CostAnalysis/utils":function(){define("esri/request esri/geometry/geometryEngine dojo/Deferred dojo/_base/lang jimu/dijit/Message dojo/_base/array".split(" "),function(t,r,u,n,h,m){var g={};g.units={feet:{lengthUnit:"feet",areaUnit:"square-feet",bufferUnit:"UNIT_FOOT",lengthAbbr:window.jimuNls.units.feetAbbr,areaAbbr:window.jimuNls.units.squareFeetAbbr},meters:{lengthUnit:"meters",areaUnit:"square-meters",bufferUnit:"UNIT_METER",lengthAbbr:window.jimuNls.units.metersAbbr,areaAbbr:window.jimuNls.units.squareMetersAbbr},
miles:{lengthUnit:"miles",areaUnit:"square-miles",bufferUnit:"UNIT_STATUTE_MILE",lengthAbbr:window.jimuNls.units.milesAbbr,areaAbbr:window.jimuNls.units.squareMilesAbbr},yards:{lengthUnit:"yards",areaUnit:"square-yards",bufferUnit:"UNIT_SURVEY_YARD",lengthAbbr:window.jimuNls.units.yardsAbbr,areaAbbr:window.jimuNls.units.squareYardsAbbr},kilometers:{lengthUnit:"kilometers",areaUnit:"square-kilometers",bufferUnit:"UNIT_KILOMETER",lengthAbbr:window.jimuNls.units.kilometersAbbr,areaAbbr:window.jimuNls.units.squareKilometerAbbr}};
g.switchToTab=function(a,f){a.selectTab(f)};g.removeNegativeExponents=function(a){return 1<a.toString().toLowerCase().split("e-").length?0:a};g.applyRounding=function(a,f){var d;if(isNaN(f)||null===f)f=2;d=Math.pow(10,f);a=Math.round(a*d)/d;return a=a.toFixed(f)};g.getLengthOfGeometry=function(a,f){var d,g;d=0;(g=r.simplify(a))&&(d=a.spatialReference.isWebMercator()||4326===a.spatialReference.wkid?r.geodesicLength(g,f):r.planarLength(g,f));return d};g.getAreaOfGeometry=function(a,f){var d,g;g=r.simplify(a);
d=0;g&&(d=a.spatialReference.isWebMercator()||4326===a.spatialReference.wkid?r.geodesicArea(g,f):r.planarArea(g,f));return d};g.deleteFeatures=function(a,f){var d=new u;t({url:a+"/deleteFeatures",content:{where:f,f:"json"}},{usePost:!0}).then(n.hitch(this,function(a){d.resolve(a)}),function(){d.reject(!1)});return d.promise};g.getUnitsAbbreviation=function(a,f){var d="";if("esriGeometryPolygon"===a||"polygon"===a)d=g.units[f].areaAbbr;else if("esriGeometryPolyline"===a||"polyline"===a)d=g.units[f].lengthAbbr;
return d};g.roundProjectCostValue=function(a,f){var d=0;f=parseFloat(f);switch(a){case "nearestWholeNumber":d=f.toFixed();break;case "nearestTen":d=eval(f.toFixed())/10;d=10*eval(d.toFixed());break;case "nearestHundred":d=eval(f.toFixed())/100;d=100*eval(d.toFixed());break;case "nearestThousand":d=eval(f.toFixed())/1E3;d=1E3*eval(d.toFixed());break;case "nearestTenThousands":d=eval(f.toFixed())/1E4;d=1E4*eval(d.toFixed());break;default:d=f.toFixed(2)}return d};g.getPrjAssetTableFields=function(a){var f=
{};m.forEach(a.fields,n.hitch(this,function(a){"ASSETGUID"===a.name.toUpperCase()?f.ASSETGUID=a.name:"COSTEQUATION"===a.name.toUpperCase()?f.COSTEQUATION=a.name:"SCENARIO"===a.name.toUpperCase()?f.SCENARIO=a.name:"TEMPLATENAME"===a.name.toUpperCase()?f.TEMPLATENAME=a.name:"GEOGRAPHYGUID"===a.name.toUpperCase()?f.GEOGRAPHYGUID=a.name:"PROJECTGUID"===a.name.toUpperCase()&&(f.PROJECTGUID=a.name)}));f.OBJECTID=a.objectIdField;return f};g.getPrjLayerFields=function(a){var f={};m.forEach(a.fields,n.hitch(this,
function(a){"PROJECTNAME"===a.name.toUpperCase()?f.PROJECTNAME=a.name:"DESCRIPTION"===a.name.toUpperCase()?f.DESCRIPTION=a.name:"TOTALASSETCOST"===a.name.toUpperCase()?f.TOTALASSETCOST=a.name:"GROSSPROJECTCOST"===a.name.toUpperCase()?f.GROSSPROJECTCOST=a.name:"GLOBALID"===a.name.toUpperCase()&&(f.GLOBALID=a.name)}));return f};g.getPrjMultiplierFields=function(a){var f={};m.forEach(a.fields,n.hitch(this,function(a){"DESCRIPTION"===a.name.toUpperCase()?f.DESCRIPTION=a.name:"TYPE"===a.name.toUpperCase()?
f.TYPE=a.name:"VALUE"===a.name.toUpperCase()?f.VALUE=a.name:"COSTINDEX"===a.name.toUpperCase()?f.COSTINDEX=a.name:"PROJECTGUID"===a.name.toUpperCase()&&(f.PROJECTGUID=a.name)}));f.OBJECTID=a.objectIdField;return f};g.showMessage=function(a){(new h({message:a})).message=a};g.evaluate=function(a){return(new Function("return "+a))()};g.validateEquation=function(a){var f;if(""===a||-1<a.indexOf("\x26")||-1<a.indexOf("|")||-1<a.indexOf(","))return!1;a=a.replace(/{measure}/ig,1);a=a.replace(/{totalmeasure}/ig,
1);a=a.replace(/{totalcount}/ig,1);if(-1!==a.indexOf("{")||-1!==a.indexOf("}"))return!1;try{return f=g.evaluate(a),isFinite(f)?!0:!1}catch(d){return!1}};return g})},"widgets/CostAnalysis/setting/StatisticsSettings":function(){define("dojo/_base/declare jimu/BaseWidget jimu/dijit/SimpleTable dojo/on dojo/_base/array dojo/query dojo/dom-construct dijit/form/Select dijit/form/ValidationTextBox dijit/_WidgetsInTemplateMixin dojo/text!./StatisticsSettings.html dojo/_base/lang dojo/store/Memory dojo/dom-class dijit/registry dojo/_base/html dojo/dom-style".split(" "),
function(t,r,u,n,h,m,g,a,f,d,q,k,c,l,v,x,p){return t([r,d],{templateString:q,baseClass:"jimu-widget-cost-analysis-statistics-settings",_layerNameStore:null,_commonStatisticsStoreOption:null,_polygonStatisticsStoreOption:null,_polylineStatisticsStoreOption:null,_pointLayerStatisticsStore:null,_polygonLayerStatisticsStore:null,_polylineLayerStatisticsStore:null,_layerFieldStore:{},_shapeFields:"shape_length shape_area shape__length shape__area shape.len shape.area".split(" "),constructor:function(b){k.mixin(this,
b)},postMixInProperties:function(){this.nls.common={};k.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._polylineLayerStatisticsStore=this._polygonLayerStatisticsStore=this._pointLayerStatisticsStore=this._polylineStatisticsStoreOption=this._polygonStatisticsStoreOption=this._commonStatisticsStoreOption=this._layerNameStore=null;this._layerFieldStore={};this.inherited(arguments);this._init();this._handleClickEvent()},_handleClickEvent:function(){this._addButtonClick();this._crossButtonClick();
this._upButtonClick();this._downButtonClick()},_init:function(){this._createStatisticsStoreOptions();this._createStatisticsTable();this._layerNameStore||this._createLayerNameStore();this._attachNodeEvents();this._setConfig();this._displayAddStatisticsButtonOrLabel();this._handleActionButtonVisibility()},_displayAddStatisticsButtonOrLabel:function(){this.showActionButtonsInColumn?l.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"):l.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden")},_setConfig:function(){this.config&&
this.config.statisticsSettings&&0<this.config.statisticsSettings.length&&h.forEach(this.config.statisticsSettings,k.hitch(this,function(b){this._addLayerRow(b)}))},getConfig:function(){var b,a;b=this._statisticsLayerTable.getRows();a=[];h.forEach(b,k.hitch(this,function(b){a.push({id:b.layerNameDropDown.getValue(),type:b.statisticsTypeDropdown.getValue(),field:b.layerFieldDropdown.getValue(),label:b.statisticsLabelTextBox.getValue()})}));return a},_createStatisticsStoreOptions:function(){this._commonStatisticsStoreOption=
[{name:this.nls.statisticsType.averageLabel,value:"avg"},{name:this.nls.statisticsType.countLabel,value:"count"},{name:this.nls.statisticsType.maxLabel,value:"max"},{name:this.nls.statisticsType.minLabel,value:"min"},{name:this.nls.statisticsType.summationLabel,value:"sum"}];this._polygonStatisticsStoreOption=[{name:this.nls.statisticsType.areaLabel,value:"area"}];this._polylineStatisticsStoreOption=[{name:this.nls.statisticsType.lengthLabel,value:"length"}]},_attachNodeEvents:function(){0===this._layerNameStore.data.length?
(l.remove(this.noEditableLayersAvailable,"esriCTHidden"),l.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),l.add(this.statisticsLayerTableNode,"esriCTHidden")):(l.add(this.noEditableLayersAvailable,"esriCTHidden"),l.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),l.remove(this.statisticsLayerTableNode,"esriCTHidden"));this.own(n(this.btnAddStatisticsNode,"click",k.hitch(this,function(){this._layerNameStore.data.length&&(this._addStatisticsBtnClicked(),this.resetAddNewStatisticsDropdown())})))},
_createStatisticsTable:function(){var b;this._statisticsLayerTable=new u({fields:[{name:"editable",title:this.nls.statisticsSettings.selectDeselectAllTitle,type:"checkbox",editable:!1,width:this.showActionButtonsInRow?"16px":"0%",hidden:!this.showActionButtonsInRow},{name:"field",title:this.nls.common.layer,type:"empty",editable:!1,width:"30%"},{name:"field",title:this.nls.common.type,type:"empty",editable:!0,width:this.showActionButtonsInRow?"19%":"18%"},{name:"field",title:this.nls.statisticsSettings.fieldNameTitle,
type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.statisticsSettings.statisticsTitle,type:"empty",editable:!1,width:this.showActionButtonsInRow?"55px":"20%"},{name:"actions",title:this.nls.common.actions,width:"10%",type:"actions",actions:["up","down","delete"],hidden:!this.showActionButtonsInColumn}],selectable:!1});this._statisticsLayerTable.placeAt(this.statisticsLayerTableNode);this._statisticsLayerTable.startup();(b=m(".esriCTAddLayerTableNode th .label")[0])&&l.add(b,"esriCTHidden")},
_addButtonClick:function(){!0===this.showActionButtonsInRow?(l.remove(this.btnAddNode,"esriCTHidden"),this.own(n(this.btnAddNode,"click",k.hitch(this,function(){this._layerNameStore.data.length&&(this._addStatisticsBtnClicked(),this._handleActionButtonVisibility(),this.resetAddNewStatisticsDropdown())})))):l.add(this.btnAddNode,"esriCTHidden")},_crossButtonClick:function(){l.remove(this.btnCrossNode,"esriCTHidden");this.own(n(this.btnCrossNode,"click",k.hitch(this,this._deleteLayerRow)))},_upButtonClick:function(){l.remove(this.btnUpNode,
"esriCTHidden");this.own(n(this.btnUpNode,"click",k.hitch(this,function(){var b,a;if(!l.contains(this.btnUpNode,"esriCTStatisticsUpIconDisable")){a=this._statisticsLayerTable.getRows();var c=this._statisticsLayerTable.getData();h.forEach(c,k.hitch(this,function(c,e){c.editable&&(b=a[e])}));this._statisticsLayerTable.onBeforeRowUp(b)&&(c=h.indexOf(a,b),0<c&&(c=a[c-1]))&&(x.place(b,c,"before"),this._statisticsLayerTable.updateUI(),this._statisticsLayerTable.emit("row-up",b))}})))},_downButtonClick:function(){l.remove(this.btnDownNode,
"esriCTHidden");this.own(n(this.btnDownNode,"click",k.hitch(this,function(){var b,a;if(!l.contains(this.btnDownNode,"esriCTStatisticsDownIconDisable")){a=this._statisticsLayerTable.getRows();var c=this._statisticsLayerTable.getData();h.forEach(c,k.hitch(this,function(c,e){c.editable&&(b=a[e])}));this._statisticsLayerTable.onBeforeRowDown(b)&&(c=h.indexOf(a,b),c<a.length-1&&(c=a[c+1]))&&(x.place(b,c,"after"),this._statisticsLayerTable.updateUI(),this._statisticsLayerTable.emit("row-down",b))}})))},
_deleteLayerRow:function(){var b=this._statisticsLayerTable.getRows(),a=this._statisticsLayerTable.getData();h.forEach(a,k.hitch(this,function(a,c){a.editable&&this._statisticsLayerTable.deleteRow(b[c])}));0===this._statisticsLayerTable.getRows().length&&(a=m("th .checkbox")[0],l.contains(a,"checked")&&l.remove(a,"checked"));this._handleActionButtonVisibility()},_checkEditCapabilities:function(b){var a;return(a=b&&b.capabilities?b.capabilities:null)&&-1!==a.indexOf("Delete")&&-1!==a.indexOf("Create")&&
-1!==a.indexOf("Update")&&b.globalIdField?!0:!1},_addStatisticsBtnClicked:function(){var b;this._addLayerRow();b=m(".simple-table-title .jimu-checkbox",this.domNode)[0];n(v.byNode(b),"change",k.hitch(this,function(){setTimeout(k.hitch(this,function(){this._handleActionButtonVisibility()}),0)}))},_handleActionButtonVisibility:function(){var b,a,c=0,d;b=this._statisticsLayerTable.getRows();d=m(".simple-table-title .jimu-checkbox",this.domNode)[0];d=v.byNode(d);h.some(this._statisticsLayerTable.getRows(),
k.hitch(this,function(b){a=m(".jimu-checkbox",b)[0];v.byNode(a).checked&&c++}));0===c?l.replace(this.btnCrossNode,"esriCTDeleteStatisticsIconDisable","esriCTDeleteStatisticsIcon"):l.replace(this.btnCrossNode,"esriCTDeleteStatisticsIcon","esriCTDeleteStatisticsIconDisable");b&&1===c?(l.replace(this.btnUpNode,"esriCTStatisticsUpIcon","esriCTStatisticsUpIconDisable"),l.replace(this.btnDownNode,"esriCTStatisticsDownIcon","esriCTStatisticsDownIconDisable")):(l.replace(this.btnUpNode,"esriCTStatisticsUpIconDisable",
"esriCTStatisticsUpIcon"),l.replace(this.btnDownNode,"esriCTStatisticsDownIconDisable","esriCTStatisticsDownIcon"));0===b.length?(d.set("status",!1),l.add(d.domNode,"jimu-state-disabled")):(d.set("status",!0),l.remove(d.domNode,"jimu-state-disabled"))},_addLayerRow:function(b){var a,c,d;a=this._statisticsLayerTable.addRow({});c=m(".simple-table-cell",a.tr);d=m(".simple-table-cell .jimu-checkbox",a.tr)[0];c&&(d&&n(v.byNode(d),"change",k.hitch(this,function(){this._handleActionButtonVisibility()})),
a=a.tr,this._addLayerNameDropdown(c[1],a,b),this._addStatisticsDropdown(c[2],a,b),this._addLayerFieldDropdown(c[3],a,b),this._addStatisticsLabelTextBox(c[4],a,b))},_onLayerNameChange:function(b,a,c){var e;this._layerNameStore.data.length&&(e=this._layerNameStore.data[this._layerNameStore.index[b]].geometryType,e=this._getStatisticsTypeStore(e),a.statisticsTypeDropdown.setStore(e),c&&c.type&&a.statisticsTypeDropdown.set("value",c.type),c=a.statisticsTypeDropdown.getValue(),b=this._layerNameStore.data[this._layerNameStore.index[b]].value,
this._layerFieldStore[b]||this._createFieldStore(b),a.layerFieldDropdown.setStore(this._layerFieldStore[b]),a.layerFieldDropdown.reset(),this._onStatisticsTypeChange(c,a))},_onStatisticsTypeChange:function(b,a,c){"count"===b||"length"===b||"area"===b?l.add(a.layerFieldDropdown.domNode,"esriCTHidden"):(l.remove(a.layerFieldDropdown.domNode,"esriCTHidden"),c&&c.field&&a.layerFieldDropdown.set("value",c.field));this._resetStatisticsTypeWidth(a)},_addLayerNameDropdown:function(b,c,d){b=g.create("div",
{"class":"esriCTDropDownContainer"},b);c.layerNameDropDown=new a({name:"layerSelect",store:this._layerNameStore,labelAttr:"name","class":"esriCTLayerNameDropdown"},b);d&&d.id&&c.layerNameDropDown.set("value",d.id);this.own(n(c.layerNameDropDown,"click",k.hitch(this,function(){this._resetLayerNameWidth(c)})));this.own(n(c.layerNameDropDown,"change",k.hitch(this,function(b){this._resetLayerNameWidth(c);this._onLayerNameChange(b,c,d)})));c.layerNameDropDown.startup()},_createLayerNameStore:function(){var b,
a,d=[];b=[];d=[this.config.projectSettings.costingGeometryLayer||"",this.config.projectSettings.projectLayer||""];this.config.layerSettings.length&&(a=this.config.layerSettings,h.forEach(a,k.hitch(this,function(a){d.push(a.id);var c=this._getFeatureLayerGeometryType(a.id);a.editable&&c&&b.push({name:a.title,value:a.id,geometryType:c})})));a=this.map.webMapResponse.itemInfo.itemData.operationalLayers;h.forEach(a,k.hitch(this,function(a){"ArcGISFeatureLayer"===a.layerType&&this._checkEditCapabilities(a.layerObject)&&
-1===d.indexOf(a.id)&&b.push({name:a.title,value:a.id,geometryType:a.resourceInfo.geometryType})}));this._layerNameStore=new c({idProperty:"value",data:b});this._updateLayerNameOptions()},_updateLayerNameOptions:function(){var b,a;b=m(".esriCTLayerNameDropdown",this.domNode);h.forEach(b,k.hitch(this,function(b){a=v.byNode(b).get("value");v.byNode(b).set("store",this._layerNameStore);v.byNode(b).set("value",a)}));0===this._layerNameStore.data.length?(l.remove(this.noEditableLayersAvailable,"esriCTHidden"),
l.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),l.add(this.statisticsLayerTableNode,"esriCTHidden")):(l.add(this.noEditableLayersAvailable,"esriCTHidden"),l.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),l.remove(this.statisticsLayerTableNode,"esriCTHidden"))},_getFeatureLayerGeometryType:function(b){var a=h.filter(this.map.webMapResponse.itemInfo.itemData.operationalLayers,k.hitch(this,function(a){return b===a.id}));return a.length&&a[0].layerObject?a[0].layerObject.geometryType:
null},_createStatisticsTypeStore:function(){this._pointLayerStatisticsStore||this._polygonLayerStatisticsStore||this._polylineLayerStatisticsStore||(this._createPointGeometryStatisticsStore(),this._createPolygonGeometryStatisticsStore(),this._createPolylineGeometryStatisticsStore())},_getStatisticsTypeStore:function(b){switch(b){case "esriGeometryPolygon":return this._polygonLayerStatisticsStore;case "esriGeometryPolyline":return this._polylineLayerStatisticsStore;case "esriGeometryPoint":return this._pointLayerStatisticsStore}},
_addStatisticsDropdown:function(b,c,d){var e;b=g.create("div",{"class":"esriCTDropDownContainer"},b);this._createStatisticsTypeStore();e=c.layerNameDropDown._getSelectedOptionsAttr().item.geometryType;e=this._getStatisticsTypeStore(e);c.statisticsTypeDropdown=new a({name:"statisticsTypeSelect",store:e,labelAttr:"name","class":"esriCTStatisticsTypeDropdown"},b);this.own(n(c.statisticsTypeDropdown,"click",k.hitch(this,function(){this._resetStatisticsTypeWidth(c)})));this.own(n(c.statisticsTypeDropdown,
"change",k.hitch(this,function(b){this._resetStatisticsTypeWidth(c);this._onStatisticsTypeChange(b,c,d)})));c.statisticsTypeDropdown.startup()},_createPointGeometryStatisticsStore:function(){this._pointLayerStatisticsStore=new c({idProperty:"value",data:this._commonStatisticsStoreOption})},_createPolygonGeometryStatisticsStore:function(){this._polygonLayerStatisticsStore=new c({idProperty:"value",data:this._commonStatisticsStoreOption.concat(this._polygonStatisticsStoreOption)})},_createPolylineGeometryStatisticsStore:function(){this._polylineLayerStatisticsStore=
new c({idProperty:"value",data:this._commonStatisticsStoreOption.concat(this._polylineStatisticsStoreOption)})},_createFieldStore:function(b){var a,d;a=[];d=["esriFieldTypeDouble","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSmallFloat"];this._layerFieldStore[b]||(h.forEach(this.map._layers[b].fields,k.hitch(this,function(b){-1<d.indexOf(b.type)&&-1===this._shapeFields.indexOf(b.name.toLowerCase())&&a.push({name:b.alias||b.name,value:b.name})})),0===a.length&&a.push({name:"\x26nbsp",
value:null}),this._layerFieldStore[b]=new c({idProperty:"value",data:a}))},_addLayerFieldDropdown:function(b,c){var d;b=g.create("div",{"class":"esriCTDropDownContainer"},b);d=c.layerNameDropDown._getSelectedOptionsAttr().value;this._createFieldStore(d);c.layerFieldDropdown=new a({name:"layerFieldDropdown",store:this._layerFieldStore[d],labelAttr:"name","class":"esriCTStatisticsFieldDropdown"},b);this.own(n(c.layerFieldDropdown,"click",k.hitch(this,function(){this._resetLayerFieldWidth(c)})));this.own(n(c.layerFieldDropdown,
"change",k.hitch(this,function(){this._resetLayerFieldWidth(c)})));c.layerFieldDropdown.startup();b=c.statisticsTypeDropdown.getValue();this._onStatisticsTypeChange(b,c)},_addStatisticsLabelTextBox:function(b,a,c){b=g.create("div",{"class":"esriCTTextBoxContainer"},b);a.statisticsLabelTextBox=new f({"class":"esriCTLayerLabelTextBox"},b);c&&c.label&&a.statisticsLabelTextBox.set("value",c.label);a.statisticsLabelTextBox.startup()},_updateStatisticsTable:function(b){var a,c;b.layerId?b.editable?a=b.layerId:
c=b.layerId:(a=b.lastSelectedId,c=b.currentSelectedLayerId);c&&(b=this._statisticsLayerTable.getRows(),h.forEach(b,k.hitch(this,function(b){b.layerNameDropDown&&b.layerNameDropDown.get("value")===c&&this._statisticsLayerTable.deleteRow(b)})),this._layerNameStore.remove(c));a&&""!==c&&(b=this.layerInfosObj.getLayerInfoById(a).layerObject,this._layerNameStore.put({name:b.name,value:a,geometryType:b.geometryType}));this._updateLayerNameOptions()},resetAddNewStatisticsDropdown:function(){var b,a,c,d,
f;if(b=m(".simple-table-field.field",this._statisticsLayerTable.domNode))b[0]&&(a=p.getComputedStyle(b[0])),b[1]&&(c=p.getComputedStyle(b[1])),b[2]&&(d=p.getComputedStyle(b[2]));b=m(".esriCTLayerNameDropdown",this._statisticsLayerTable.domNode);h.forEach(b,k.hitch(this,function(b){(b=m(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",b))&&b[0]&&(f=this.showActionButtonsInColumn?59:30,b[0].style.width=parseInt(a.width,10)-f+"px")}));b=m(".esriCTStatisticsTypeDropdown",this._statisticsLayerTable.domNode);
h.forEach(b,k.hitch(this,function(b){(b=m(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",b))&&b[0]&&(f=this.showActionButtonsInColumn?59:30,b[0].style.width=parseInt(c.width,10)-f+"px")}));b=m(".esriCTStatisticsFieldDropdown",this._statisticsLayerTable.domNode);h.forEach(b,k.hitch(this,function(b){(b=m(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",b))&&b[0]&&(f=this.showActionButtonsInColumn?59:30,b[0].style.width=parseInt(d.width,10)-f+"px")}))},_resetLayerNameWidth:function(b){var a,
c;(a=m(".simple-table-field.field",this._statisticsLayerTable.domNode))&&a[0]&&(c=p.getComputedStyle(a[0]));b=m(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",b.layerNameDropDown.domNode);a=this.showActionButtonsInColumn?59:30;b&&b[0]&&(b[0].style.width=parseInt(c.width,10)-a+"px")},_resetStatisticsTypeWidth:function(b){var a,c;(c=m(".simple-table-field.field",this._statisticsLayerTable.domNode))&&c[1]&&(a=p.getComputedStyle(c[1]));b=m(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",
b.statisticsTypeDropdown.domNode);c=this.showActionButtonsInColumn?59:30;b&&b[0]&&(b[0].style.width=parseInt(a.width,10)-c+"px")},_resetLayerFieldWidth:function(b){var a,c;(a=m(".simple-table-field.field",this._statisticsLayerTable.domNode))&&a[2]&&(c=p.getComputedStyle(a[2]));b=m(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",b.layerFieldDropdown.domNode);a=this.showActionButtonsInColumn?59:30;b&&b[0]&&(b[0].style.width=parseInt(c.width,10)-a+"px")}})})},"widgets/CostAnalysis/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/CostAnalysis/setting/GeneralSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.measurementUnitLabel}"\x3e${nls.generalSettings.measurementUnitLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"measurementUnitInputNode"\x3e\r\n        \x3coption value\x3d"feet"\x3e${nls.units.feet.label}\x3c/option\x3e\r\n        \x3coption value\x3d"meters"\x3e${nls.units.meters.label}\x3c/option\x3e\r\n        \x3coption value\x3d"miles"\x3e${nls.units.miles.label}\x3c/option\x3e\r\n        \x3coption value\x3d"yards"\x3e${nls.units.yards.label}\x3c/option\x3e\r\n        \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers.label}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.currencyLabel}"\x3e${nls.generalSettings.currencyLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"maxLength:\'3\'" data-dojo-attach-point\x3d"currencyInputNode" trim\x3d"true"\r\n        required\x3d"true"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.roundCostLabel}"\x3e${nls.generalSettings.roundCostLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"roundCostInputNode"\x3e\r\n        \x3coption value\x3d"twoDecimalPoint"\x3e${nls.generalSettings.roundCostValues.twoDecimalPoint}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestWholeNumber"\x3e${nls.generalSettings.roundCostValues.nearestWholeNumber}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestTen"\x3e${nls.generalSettings.roundCostValues.nearestTen}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestHundred"\x3e${nls.generalSettings.roundCostValues.nearestHundred}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestThousand"\x3e${nls.generalSettings.roundCostValues.nearestThousand}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestTenThousands"\x3e${nls.generalSettings.roundCostValues.nearestTenThousands}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cfieldset class\x3d"esriCTProjectOutputSettingsFieldset"\x3e\r\n    \x3clegend class\x3d"esriCTProjectOutputSettingsLegend" title\x3d"${nls.generalSettings.projectOutputSettings}"\x3e\r\n      ${nls.generalSettings.projectOutputSettings} \x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTFullWidth esriCTFullHeight esriCTProjectSettingsContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTProjectSettingsOutputLeftContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTProjectAreaTypeContainer esriCTVerticalCenterAlignLabel esriCTEllipsis" title\x3d"${nls.generalSettings.typeOfProjectAreaLabel}"\x3e${nls.generalSettings.typeOfProjectAreaLabel}:\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTProjectAreaTypeInputContainer"\x3e\r\n          \x3cdiv class\x3d""\x3e\r\n            \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"projectAreaTypeInputNode"\x3e\r\n              \x3coption value\x3d"outline"\x3e${nls.generalSettings.projectAreaType.outline}\x3c/option\x3e\r\n              \x3coption value\x3d"buffer"\x3e${nls.generalSettings.projectAreaType.buffer}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTProjectSettingsOutputRightContainer esriCTHidden" data-dojo-attach-point\x3d"projectSettingsOutputRightContainerNode"\x3e\r\n        \x3cdiv class\x3d"esriCTBufferDistanceLabelContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTBufferDistanceLabel esriCTVerticalCenterAlignLabel esriCTEllipsis" title\x3d"${nls.generalSettings.bufferDistanceLabel}"\x3e${nls.generalSettings.bufferDistanceLabel}:\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTBufferDistanceInputContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/NumberTextBox" disabled\x3dtrue data-dojo-attach-point\x3d"bufferDistanceInputNode"\r\n            trim\x3d"true" required\x3d"true" data-dojo-props\x3d""\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTProjectMeasurementUnitContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTVerticalCenterAlignLabel esriCTEllipsis esriCTBufferDistanceUnit" data-dojo-attach-point\x3d"bufferDistanceUnit"\x3e${nls.units.feet.label}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ProjectSettings.html":'\x3cdiv\x3e\r\n\t\x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n\t\t\x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n\t\t\t${nls.projectSettings.costingGeometrySectionTitle}\r\n\t\t\x3c/legend\x3e\r\n\t\t\x3cdiv class\x3d"esriCTNote esriCTFullWidth"\x3e${nls.projectSettings.costingGeometrySectionNote}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Costing Geometry Layer Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.costingGeometryLayerLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.costingGeometryLayerLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Costing Geometry Later Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"costingGeometryLayerDropDown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"costingGeometryHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Field to Label Geography Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.fieldLabelGeography}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.fieldLabelGeography}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Field to Label Geography Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"fieldToLabelGeography" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"fieldToLabelGeographyHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/fieldset\x3e\r\n\t\x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n\t\t\x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n\t\t\t${nls.projectSettings.projectTableSectionTitle}\r\n\t\t\x3c/legend\x3e\r\n\t\t\x3cdiv class\x3d"esriCTNote esriCTFullWidth"\x3e${nls.projectSettings.projectTableSectionNote}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Assets Table Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectAssetsTableLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectAssetsTableLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Assets Table Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"projectAssetsTable" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectAssetsTableHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Multiplier Additional Cost Table Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectMultiplierTableLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectMultiplierTableLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Multiplier Additional Cost Table Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"projectMultiplierTable" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectMultiplierTableHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Layer Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectLayerLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectLayerLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Layer Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer esriCTProjectLayerDropdown" data-dojo-attach-point\x3d"projectLayerDropDown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectLayerHelp"\x3e\x3c/div\x3e\r\n\t\t\t\x3c!--Configure Fields Settings--\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTConfigureFieldsContainer"\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!--Configured Fields Table--\x3e\r\n\t\t\x3cdiv class\x3d"esriCTConfiguredFieldsTable esriCTHidden" data-dojo-attach-point\x3d"configuredFieldsTable"\x3e\x3c/div\x3e\r\n\t\x3c/fieldset\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/CostAnalysis/setting/LayerSettings.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"layerSettingsMainContainer"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerSettingsTableNode" data-dojo-attach-point\x3d"layerSettingsTableNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHidden esriCTNoAssetLayersAvailable" data-dojo-attach-point\x3d"noAssetLayersAvailable"\x3e\r\n      ${nls.layerSettings.noAssetLayersAvailable}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/CostingInfo.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n    \x3c!--Add Layers section --\x3e\r\n    \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n        \x3cdiv class\x3d"esriCTManageScenarioButtonContainer"\x3e\r\n            \x3cdiv class\x3d"esriCTMangeScenarios"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"btnManageScenarios" \r\n                class\x3d"esriCTBtnAddSection esriCTEllipsis"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e${nls.costingInfo.manageScenariosTitle}\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHidden esriCTNoEditableLayersAvailable" data-dojo-attach-point\x3d"noEditableLayersAvailable"\x3e\r\n                    ${nls.costingInfo.noEditableLayersAvailable}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"costingTemplateContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ManageScenarios.html":'\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTPopupFields esriCTEllipsis"\x3e ${nls.costingInfo.scenarioNameLabel}\x3c/div\x3e\r\n        \x3cdiv style\x3d"width:180px" data-dojo-attach-point\x3d"scenarioNameNode" required\x3d"true" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\x3c/div\x3e\r\n        \x3cdiv style\x3d"width:120px" class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"addBtnNode" title\x3d"${nls.costingInfo.addBtnLabel}"\x3e${nls.costingInfo.addBtnLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTAddScenarioNameTable" data-dojo-attach-point\x3d"addScenarioNameTableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/CostingTemplate.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTLayerNameContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTLayerLabel esriCTEllipsis" data-dojo-attach-point\x3d"layerName"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"btnCostingTemplateNode" class\x3d"esriCTBtnAddSection esriCTEllipsis"\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e ${nls.costingInfo.addCostingTemplateLabel}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"addLayerTableNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/EditCostEquation.html":'\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTPopupFields esriCTEllipsis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel"\x3e\r\n          ${nls.costingInfo.geographyTitle}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTCostEquationFieldContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/TextBox" disabled\x3dtrue data-dojo-attach-point\x3d"geographyValue"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel"\x3e\r\n          ${nls.costingInfo.scenarioTitle}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTCostEquationFieldContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/TextBox" disabled\x3dtrue data-dojo-attach-point\x3d"scenarioValue"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel "\x3e\r\n          ${nls.costingInfo.costEquationTitle}\x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth esriCTCostEquationInput" spellcheck\x3d"false" data-dojo-type\x3d"dijit/form/Textarea" data-dojo-attach-point\x3d"costEquationValue"\r\n            required\x3d"true"\x3e\r\n          \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTFullWidth"\x3e\r\n      \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"costEquationHint"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/StatisticsSettings.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n    \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n        \x3cdiv\x3e\r\n            \x3c!--Add New Statistics button--\x3e\r\n            \x3cdiv class\x3d"esriCTStatisticsContainer" data-dojo-attach-point\x3d"btnAddStatisticsNodeWrapper"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"btnAddStatisticsNode" class\x3d"esriCTBtnStatisticsAddSection"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddStatisticsIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnStatisticsAddLabel"\x3e ${nls.statisticsSettings.addStatisticsLabel}\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"statisticsLayerTableNode"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTNoEditableLayersAvailable" data-dojo-attach-point\x3d"noEditableLayersAvailable"\x3e\r\n                ${nls.costingInfo.noEditableLayersAvailable}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Add/delete/reorder buttons--\x3e\r\n    \x3cdiv class\x3d"esriCTStatisticsButtonParentDiv"\x3e\r\n        \x3cdiv class\x3d"esriCTAddStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnAddNode" title\x3d"${nls.statisticsSettings.addNewStatisticsText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDeleteStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnCrossNode"\r\n            title\x3d"${nls.statisticsSettings.deleteStatisticsText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsUpIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnUpNode" title\x3d"${nls.statisticsSettings.moveStatisticsUpText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsDownIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnDownNode" title\x3d"${nls.statisticsSettings.moveStatisticsDownText}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/Setting.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\t\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"configurationTabParentContainer"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"generalSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"projectSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"layerSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"costingInfoNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"statisticsSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/css/style.css":".jimu-widget-cost-analysis-general-settings .esriCTFieldContainer {float: left; padding: 0px 0px 20px 0px;}.jimu-widget-cost-analysis-general-settings .esriCTDropDownContainer {width: 75%; float: right;}.jimu-widget-cost-analysis-general-settings .esriCTGeneralSettingsLabel {width: 25%; float: left; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsFieldset {margin: 20px 0px 0px 0px; border: 1px solid #D2DAE2;}.jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsLegend {margin-left: 10px; font-weight: bold;}.jimu-widget-cost-analysis-general-settings .esriCTProjectFieldContainer {float: left;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabel {float: right; width: 100%; text-align: center; padding-left: 5px; max-width: 214px;}.jimu-widget-cost-analysis-general-settings .esriCTVerticalCenterAlignLabel {line-height: 30px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsContainer {overflow: hidden; padding: 15px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeContainer {float: left; width: 48%; max-width: 214px; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeInputContainer {width: 52%; float: left;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabelContainer {float: left; width: 50%; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceInputContainer {float: left; width: 20%;}.jimu-widget-cost-analysis-general-settings .esriCTProjectMeasurementUnitContainer {width: 30%; float: left; padding-left: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputRightContainer {float: right; width: 50%}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputLeftContainer {float: left; width: 50%;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceUnit {max-width: 130px;}.esriRtl .jimu-widget-cost-analysis-settings .esriCTTabNode {padding-left: 20px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTFieldContainer {float: right; padding: 0px 0px 20px 0px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTTabNode {padding-left: 20px; padding-right: 0px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTGeneralSettingsLabel {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputLeftContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputRightContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeContainer {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabelContainer {float: right; padding-right: 0px; padding-left: 5px; text-align: center;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceInputContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectMeasurementUnitContainer {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsLegend {margin-left: 0px; margin-right: 10px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabel {padding-right: 5px; padding-left: 0px;}.jimu-widget-cost-analysis-project-settings {width: 100%; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTFieldSet {height: auto; width: 100%; margin-bottom: 10px; padding: 20px 20px 0 20px; border: 1px solid #D2DAE2;}.jimu-widget-cost-analysis-project-settings .esriCTFieldSetLegend {font-weight: bold;}.jimu-widget-cost-analysis-project-settings .esriCTNote {padding-bottom: 20px; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-cost-analysis-project-settings .esriCTHelpIcon {height: 30px; width: 20px; background-repeat: no-repeat; background-position: center center; background-image: url(images/help.png); display: inline-block; vertical-align: top; margin: 0 5px; cursor: pointer;}.jimu-widget-cost-analysis-project-settings .esriCTRowContainer {margin-bottom: 20px; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTLabelContainer {width: 30%; float: left; line-height: 30px; padding: 0 10px 0 0;}.jimu-widget-cost-analysis-project-settings .esriCTDropDownContainer {width: calc( 70% - 30px); float: left; box-sizing: border-box;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsContainer {width: 35%; float: left; padding: 0 10px;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsLabel {width: calc(100% - 36px); line-height: 30px; text-align: right; padding: 0 0 0 10px; float: right;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsCheckBox {margin: 5px 10px; float: right;}.jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable {width: 70%; float: right; margin-bottom: 20px;}.claro .jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable .dijitSelect {height: 27px; margin-top: 1px; width: 99%; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTProjectSettingsFieldsDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 280px; float: left;}.claro .jimu-widget-cost-analysis-project-settings .dijitSelect .dijitInputField {overflow: hidden;}.jimu-widget-cost-analysis-project-settings .esriCTProjectLayerDropdown .dijitSelectLabel {text-align: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTLabelContainer {float: right; padding: 0 0 0 10px;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTDropDownContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsCheckBox {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsLabel {float: left; padding: 0 10px 0 0; text-align: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTProjectLayerDropdown .dijitSelectLabel, .esriRtl .jimu-widget-cost-analysis-project-settings .esriCTProjectSettingsFieldsDropdown .dijitSelectLabel {text-align: right;}.claro .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsTableNode .dijitSelect {width: 99%; height: 27px; float: left;}.jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsFieldsDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 213px;}.jimu-widget-cost-analysis-layer-settings .esriCTNoAssetLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-layer-settings .esriCTDropDownContainer {float: left;}.jimu-widget-cost-analysis-layer-settings .esriCTFieldError {float: left; margin-left: 8px; line-height: 0; margin-top: 4px; cursor: pointer;}.esriRtl .jimu-widget-cost-analysis-layer-settings .esriCTFieldError {float: right; margin-right: 8px;}.esriRtl .claro .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsTableNode .dijitSelect {float: right;}.esriRtl .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsFieldsDropdown .dijitSelectLabel {text-align: right;}.jimu-widget-cost-analysis-costing-info .esriCTLayerLabel {padding-left: 0px; float: left; text-align: center; vertical-align: middle; padding-right: 10px; max-width: 60%;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTMangeScenarios {float: right;}.jimu-widget-cost-analysis-costing-info .esriCTLayerNameContainer {float: left; width: 100%;}.jimu-widget-cost-analysis-costing-info .esriCTManageScenarioButtonContainer {float: right; width: 50%;}.jimu-widget-cost-analysis-costing-info .esriCTLayerTableWrapper {padding-bottom: 20px;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitSelect {width: 100%; height: 28px; float: left;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitTextBox .dijitInputInner {height: 20px; float: left;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitTextBox {height: 26px; float: left;}.jimu-widget-cost-analysis-costing-info .esriCTHelpIcon {height: 36px; width: 20px; background-repeat: no-repeat; background-position: center center; background-image: url(images/help.png); display: inline-block; vertical-align: top; position: absolute; right: 5px;}.jimu-widget-cost-analysis-costing-info .esriCTDropDownContainer {float: left;}.jimu-widget-cost-analysis-edit-equation .esriCTFieldContainer {overflow: hidden; padding: 0px 0px 5px 0px;}.jimu-widget-cost-analysis-edit-equation .esriCTEditCostEquationLabel {width: 40%; float: left; padding-right: 5px;}.jimu-widget-cost-analysis-edit-equation .esriCTVerticalCenterAlignLabel {line-height: 30px;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationFieldContainer {width: 60%; float: right;}.jimu-widget-cost-analysis-edit-equation .esriCTFullWidth {width: 100%;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationInput {height: 70px !important;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationError {border-color: red !important;}.jimu-widget-cost-analysis-edit-equation .esriCTHint {margin: 5px 5px 10px 0px; float: right; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateFeatureTemplate .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateGeography .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-costing-info .esriCTCostingInfoScenarioOptions .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitSelect {width: 99%;}.jimu-widget-cost-analysis-costing-info .jimu-icon-copy {background-image: url(images/copy.png); background-repeat: no-repeat; background-position: center center; width: 16px; height: 16px; padding-left: 10px; padding-right: 10px;}.jimu-widget-cost-analysis-manage-scenarios .title-label, .jimu-widget-cost-analysis-edit-equation .title-label {width: calc(100% - 30px); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-cost-analysis-manage-scenarios .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px; overflow: hidden;}.jimu-widget-cost-analysis-manage-scenarios .esriCTPopupFields {width: 28%; float: left; line-height: 30px; padding-right: 5px;}.jimu-widget-cost-analysis-manage-scenarios .esriCTAddScenarioNameTable {margin-top: 10px;}.jimu-widget-cost-analysis-manage-scenarios .jimu-simple-table {max-height: 240px !important;}.jimu-widget-cost-analysis-costing-info .esriCTNoEditableLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .jimu-simple-table .simple-table-field {position: relative; padding-right: 25px;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTLayerNameContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTMangeScenarios {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTLayerLabel {padding-right: 0px; float: right; padding-left: 10px;}.esriRtl .jimu-widget-cost-analysis-manage-scenarios .esriCTPopupFields {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-edit-equation .esriCTEditCostEquationLabel {float: right; padding-left: 5px; padding-right: 0px;}.esriRtl .jimu-widget-cost-analysis-edit-equation .esriCTCostEquationFieldContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-template .esriCTCancelDialogPopup {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateFeatureTemplate .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateGeography .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingInfoScenarioOptions .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTHelpIcon {right: auto; left: 5px;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTManageScenarioButtonContainer {float: left;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnStatisticsAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-statistics-settings .esriCTHidden {display: none;}.jimu-widget-cost-analysis-statistics-settings .esriCTNoEditableLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnAddStatisticsIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnStatisticsAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-statistics-settings .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-cost-analysis-statistics-settings .esriCTLayerLabelTextBox {width: 100%; height: 29px; float: left;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsContainer {float: left; width: 40%;}.jimu-widget-cost-analysis-statistics-settings .esriCTDropDownContainer {width: 75%; float: right;}.jimu-widget-cost-analysis-statistics-settings .esriCTLayerNameDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 213px;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsTypeDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 104px;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsFieldDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.claro .jimu-widget-cost-analysis-statistics-settings .esriCTAddLayerTableNode .dijitSelect {height: 28px; min-width: 100%; float: left;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsContainer {float: right;}.esriRtl .claro .jimu-widget-cost-analysis-statistics-settings .esriCTAddLayerTableNode .dijitSelect {height: 28px; min-width: 100%;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTLayerNameDropdown .dijitSelectLabel {text-align: right; width: 201px;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsTypeDropdown .dijitSelectLabel {text-align: right; width: 96px;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsFieldDropdown .dijitSelectLabel {text-align: right; width: 131px;}.jimu-widget-cost-analysis-settings .jimu-tab3 {height: 100%; overflow: hidden;}.jimu-widget-cost-analysis-settings .jimu-viewstack {height: calc(100% - 45px); overflow: auto;}.jimu-widget-cost-analysis-settings .esriCTTabNode {padding-right: 20px; margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-cost-analysis-settings .esriCTFullWidth {width: 100%;}.jimu-widget-cost-analysis-settings .esriCTFullHeight {height: 100%;}.jimu-widget-cost-analysis-settings .esriCTEllipsis, .jimu-widget-cost-analysis-manage-scenarios .esriCTEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-cost-analysis-settings .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px;}.jimu-widget-cost-analysis-settings .esriCTHidden {display: none;}.jimu-widget-cost-analysis-costing-template .esriCTCancelDialogPopup {width: 13px; height: 12px; padding-right: 5px; text-align: right; cursor: pointer; float: right; background-repeat: no-repeat; background-position: center center; background-image: url(images/close.png);}.jimu-widget-cost-analysis-costing-template .esriCTDialogText {padding: 5px;}.jimu-btn {line-height: 30px !important;}input[type\x3dtext]::-ms-clear {display: none;}",
"*now":function(t){t(['dojo/i18n!*preload*widgets/CostAnalysis/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dojo/Evented jimu/dijit/TabContainer3 ./GeneralSettings ./ProjectSettings ./LayerSettings ./CostingInfo ./StatisticsSettings dojo/_base/lang dojo/on jimu/dijit/Message jimu/LayerInfos/LayerInfos ../utils".split(" "),function(t,r,u,n,h,m,g,a,f,d,q,k,c,l){return t([r,u],{baseClass:"jimu-widget-cost-analysis-settings",_configurationTabParentContainer:null,_generalSettingsTab:null,_projectSettingsTab:null,_layerSettingsTab:null,_costingInfoTab:null,_statisticsSettingsTab:null,
_layerInfosObj:null,postMixInProperties:function(){this.nls.units={feet:{label:window.jimuNls.units.feet,abbreviation:window.jimuNls.units.feetAbbr},meters:{label:window.jimuNls.units.meters,abbreviation:window.jimuNls.units.metersAbbr},miles:{label:window.jimuNls.units.miles,abbreviation:window.jimuNls.units.milesAbbr},yards:{label:window.jimuNls.units.yards,abbreviation:window.jimuNls.units.yardsAbbr},kilometers:{label:window.jimuNls.units.kilometers,abbreviation:window.jimuNls.units.kilometersAbbr}}},
postCreate:function(){c.getInstance(this.map,this.map.webMapResponse.itemInfo).then(d.hitch(this,function(a){this._layerInfosObj=a}));this._initConfiguration();this.setConfig(this.config)},setConfig:function(){this._layerSettingsTab.setConfig()},getConfig:function(){var a;a=this._generalSettingsTab.validate();if(a.isValid)this.config.generalSettings=this._generalSettingsTab.getConfig();else return this._showMessage(a.errorMessage),l.switchToTab(this._configurationTabParentContainer,this.nls.generalSettings.tabTitle),
!1;a=this._projectSettingsTab.validate();if(a.isValid)this.config.projectSettings=this._projectSettingsTab.getConfig();else return this._showMessage(a.errorMessage),l.switchToTab(this._configurationTabParentContainer,this.nls.projectSettings.tabTitle),!1;this.config.layerSettings=this._layerSettingsTab.getConfig();a=this._costingInfoTab.validate();if(a.isValid)this.config.costingInfoSettings=this._costingInfoTab.getConfig().costingInfoData,this.config.scenarios=this._costingInfoTab.getConfig().scenarios;
else return this._showMessage(a.errorMessage),l.switchToTab(this._configurationTabParentContainer,this.nls.costingInfo.tabTitle),!1;this.config.statisticsSettings=this._statisticsSettingsTab.getConfig();return this.config},_initConfiguration:function(){this._initTabs();this._initGeneralSettings();this._initProjectSettings();this._initLayerSettings();this._initCostingInfo();this._initStatisticsSettings()},_initTabs:function(){this._configurationTabParentContainer=new n({tabs:[{title:this.nls.generalSettings.tabTitle,
content:this.generalSettingsNode},{title:this.nls.projectSettings.tabTitle,content:this.projectSettingsNode},{title:this.nls.layerSettings.tabTitle,content:this.layerSettingsNode},{title:this.nls.costingInfo.tabTitle,content:this.costingInfoNode},{title:this.nls.statisticsSettings.tabTitle,content:this.statisticsSettingsNode}]},this.configurationTabParentContainer);this.own(q(this._configurationTabParentContainer,"tabChanged",d.hitch(this,function(){this._configurationTabParentContainer.containerNode.scrollTop=
0})));this._configurationTabParentContainer.startup()},_initGeneralSettings:function(){this._generalSettingsTab=new h({nls:this.nls,map:this.map,config:this.config});this._generalSettingsTab.placeAt(this.generalSettingsNode)},_initProjectSettings:function(){this._projectSettingsTab=new m({nls:this.nls,map:this.map,config:this.config.projectSettings,layerInfosObj:this._layerInfosObj,appUtils:l});this._projectSettingsTab.placeAt(this.projectSettingsNode);this._projectSettingsTab.on("onLayerSelected",
d.hitch(this,function(a){this._layerSettingsTab&&(this._layerSettingsTab.updateLayerSettingsTable(a),this._costingInfoTab._updateCostingInfoTable(a),this._statisticsSettingsTab._updateStatisticsTable(a))}));this._projectSettingsTab.on("onDuplicateLayerSelect",d.hitch(this,function(a){this._showMessage(a)}));this._projectSettingsTab.on("onGeographyFieldChange",d.hitch(this,function(a,c){if(this._costingInfoTab)if(c&&""!==c)this._costingInfoTab.getGeographyOptions(a,c).then(d.hitch(this,function(a){this._costingInfoTab.onGeographyFieldUpdate(a)}));
else this._costingInfoTab.onGeographyFieldUpdate([{label:this.nls.costingInfo.noneValue,value:""}])}))},_initLayerSettings:function(){this._layerSettingsTab=new g({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj});this._layerSettingsTab.placeAt(this.layerSettingsNode);q(this._layerSettingsTab,"onLayerSettingUpdate",d.hitch(this,function(a){this._costingInfoTab._updateCostingInfoTable(a);this._statisticsSettingsTab._updateStatisticsTable(a)}))},_initCostingInfo:function(){this._costingInfoTab=
new a({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj});this._costingInfoTab.placeAt(this.costingInfoNode)},_initStatisticsSettings:function(){this._statisticsSettingsTab=new f({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj,showActionButtonsInColumn:!0,showActionButtonsInRow:!1});this._statisticsSettingsTab.placeAt(this.statisticsSettingsNode)},_showMessage:function(a){(new k({message:a})).message=a}})});