// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(m,k,f,n,a,b,e){var g={_defaultStandbyParams:{image:e.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(e){if(e=this._normalizeParams(e))return e=new b(g._toStandbyParams(e)),a.place(e.domNode,f.doc.body),g._createHandle(e)},_normalizeParams:function(a){if(a){if(a.target)return a;
if("string"===typeof a){var b=m.byId(a);a=b?b.domNode:n.byId(a)}else a=a.domNode?a.domNode:n.byId(a);if(a)return{target:a}}},_toStandbyParams:function(a){a.imageUrl&&(a.image=a.imageUrl);a.backgroundColor&&(a.color=a.backgroundColor);a.backgroundOpacity&&(a.opacity=a.backgroundOpacity);a.fadeDuration&&(a.duration=a.fadeDuration);return k.mixin({},g._defaultStandbyParams,a)},_createHandle:function(a){return{show:function(){a&&a.show()},hide:function(){a&&a.hide()},destroy:function(){a&&(a.destroy(),
a=null)}}}};return g})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(m,k,f,n,a,b,e,g,p,l,r,d,h,c,q,t,u){m.experimental("dojox.widget.Standby");return k("dojox.widget.Standby",[q,t],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),
imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(c){if(!this._started){if("string"===typeof this.target){var y=u.byId(this.target);this.target=y?y.domNode:b.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,e.set(this._imageNode,"src",this.image),e.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;l.set(this._underlayNode,
{display:"none",backgroundColor:this.color});l.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=d.body()&&d.body().appendChild(this.domNode);7==a("ie")&&(this._ieFixNode=g.create("div"),l.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),d.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(y){console.error(y)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
l.set(this._centerNode,"display","none");l.set(this._underlayNode,"display","none");7==a("ie")&&this._ieFixNode&&(d.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var c=e.get(d.body(),"dir");c&&(c=c.toLowerCase());var h,q=this._scrollerWidths(),b=this.target,t=l.get(this._centerNode,"display");l.set(this._centerNode,
"display","block");var u=p.position(b,!0);if(b===d.body()||b===d.doc)u=r.getBox(),u.x=u.l,u.y=u.t;var g=p.getMarginBox(this._centerNode);l.set(this._centerNode,"display",t);this._ieFixNode&&(h=-this._ieFixNode.offsetTop/1E3,u.x=Math.floor((u.x+.9)/h),u.y=Math.floor((u.y+.9)/h),u.w=Math.floor((u.w+.9)/h),u.h=Math.floor((u.h+.9)/h));var f=l.get(b,"zIndex"),k=t=f;if("auto"===this.zIndex)if("auto"!=f)t=parseInt(t,10),k=parseInt(k,10);else{var n=b;if(n&&n!==d.body()&&n!==d.doc)for(n=b.parentNode,h=-1E5;n&&
n!==d.body();)(f=l.get(n,"zIndex"))&&"auto"!==f&&(f=parseInt(f,10),h<f&&(h=f,t=f+1,k=f+1)),n=n.parentNode}else t=parseInt(this.zIndex,10),k=parseInt(this.zIndex,10);l.set(this._centerNode,"zIndex",k);l.set(this._underlayNode,"zIndex",t);if((t=b.parentNode)&&t!==d.body()&&b!==d.body()&&b!==d.doc){n=u.h;k=u.w;b=p.position(t,!0);this._ieFixNode&&(h=-this._ieFixNode.offsetTop/1E3,b.x=Math.floor((b.x+.9)/h),b.y=Math.floor((b.y+.9)/h),b.w=Math.floor((b.w+.9)/h),b.h=Math.floor((b.h+.9)/h));b.w-=t.scrollHeight>
t.clientHeight&&0<t.clientHeight?q.v:0;b.h-=t.scrollWidth>t.clientWidth&&0<t.clientWidth?q.h:0;"rtl"===c&&(a("opera")?(u.x+=t.scrollHeight>t.clientHeight&&0<t.clientHeight?q.v:0,b.x+=t.scrollHeight>t.clientHeight&&0<t.clientHeight?q.v:0):a("ie")?b.x+=t.scrollHeight>t.clientHeight&&0<t.clientHeight?q.v:0:a("webkit"));b.w<u.w&&(u.w-=b.w);b.h<u.h&&(u.h-=b.h);var m=b.y,A=b.y+b.h,C=u.y,J=u.y+n,c=b.x;h=b.x+b.w;var f=u.x,N=u.x+k;if(J>m&&C<m)u.y=b.y,n-=m-C,u.h=n<b.h?n:u.h-2*(t.scrollWidth>t.clientWidth&&
0<t.clientWidth?q.h:0);else if(C<A&&J>A)u.h=A-C;else if(J<=m||C>=A)u.h=0;if(N>c&&f<c)u.x=b.x,k-=c-f,u.w=k<b.w?k:u.w-2*(t.scrollHeight>t.clientHeight&&0<t.clientHeight?q.w:0);else if(f<h&&N>h)u.w=h-f;else if(N<=c||f>=h)u.w=0}0<u.h&&0<u.w?(l.set(this._underlayNode,{display:"block",width:u.w+"px",height:u.h+"px",top:u.y+"px",left:u.x+"px"}),q=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(q),a("ie")||(q="MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),
this._cloneStyles(q,this)),q=u.h/2-g.h/2,t=u.w/2-g.w/2,u.h>=g.h&&u.w>=g.w?l.set(this._centerNode,{top:q+u.y+"px",left:t+u.x+"px",display:"block"}):l.set(this._centerNode,"display","none")):(l.set(this._underlayNode,"display","none"),l.set(this._centerNode,"display","none"));if(null===this._resizeCheck){var O=this;this._resizeCheck=setInterval(function(){O._size()},100)}}},_cloneStyles:function(c){f.forEach(c,function(c){l.set(this._underlayNode,c,l.get(this.target,c))},this)},_fadeIn:function(){var a=
this,d=h.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:0,end:a.opacity}}}),b=h.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){a.onShow();delete a._anim}});this._anim=c.combine([d,b]);this._anim.play()},_fadeOut:function(){var a=this,d=h.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:a.opacity,end:0}},onEnd:function(){l.set(this.node,{display:"none",zIndex:"-1000"})}}),
b=h.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){l.set(this.node,{display:"none",zIndex:"-1000"});a.onHide();a._enableOverflow();delete a._anim}});this._anim=c.combine([d,b]);this._anim.play()},_ignore:function(c){c&&n.stop(c)},_scrollerWidths:function(){var c=g.create("div");l.set(c,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var a=g.create("div");
l.set(a,{width:"200px",height:"10px"});c.appendChild(a);d.body().appendChild(c);a=p.getContentBox(c);l.set(c,"overflow","scroll");var b=p.getContentBox(c);d.body().removeChild(c);return{v:a.w-b.w,h:a.h-b.h}},_setTextAttr:function(c){this.text=this._textNode.innerHTML=c},_setColorAttr:function(c){l.set(this._underlayNode,"backgroundColor",c);this.color=c},_setImageTextAttr:function(c){e.set(this._imageNode,"alt",c);this.imageText=c},_setImageAttr:function(c){e.set(this._imageNode,"src",c);this.image=
c},_setCenterIndicatorAttr:function(c){this.centerIndicator=c;"image"===c?(this._centerNode=this._imageNode,l.set(this._textNode,"display","none")):(this._centerNode=this._textNode,l.set(this._imageNode,"display","none"))},_setTargetAttr:function(c){if("string"===typeof c){var a=u.byId(c);this._set("target",a?a.domNode:b.byId(c))}else this._set("target",c)},_disableOverflow:function(){if(this.target===d.body()||this.target===d.doc){this._overflowDisabled=!0;var c=d.body();this._oldOverflow=c.style&&
c.style.overflow?l.get(c,"overflow"):"";if(a("ie")&&!a("quirks")){if(c.parentNode&&c.parentNode.style&&c.parentNode.style.overflow)this._oldBodyParentOverflow=c.parentNode.style.overflow;else try{this._oldBodyParentOverflow=l.get(c.parentNode,"overflow")}catch(B){this._oldBodyParentOverflow="scroll"}l.set(c.parentNode,"overflow","hidden")}l.set(c,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var c=d.body();a("ie")&&!a("quirks")&&(c.parentNode.style.overflow=
this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);l.set(c,"overflow",this._oldOverflow);if(a("webkit")){var b=g.create("div",{style:{height:"2px"}});c.appendChild(b);setTimeout(function(){c.removeChild(b)},0)}delete this._oldOverflow}}})})},"esri/toolbars/edit":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/has dojo/dom-construct dojo/dom-style ../kernel ../lang ../sniff ./_toolbar ./_Box ./_GraphicMover ./_VertexEditor ./TextEditor ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/TextSymbol ../graphic".split(" "),
function(m,k,f,n,a,b,e,g,p,l,r,d,h,c,q,t,u,y,B,G,E){var I=k(h,{declaredClass:"esri.toolbars.Edit",constructor:function(c,a){this._map=c;this._tool=0;if(this._map.loaded)this._scratchGL=c.graphics;else var d=n.connect(this._map,"onLoad",this,function(){n.disconnect(d);d=null;this._scratchGL=this._map.graphics});c=e("esri-mobile");this._defaultOptions=f.mixin({vertexSymbol:new y(y.STYLE_CIRCLE,c?20:12,new B(B.STYLE_SOLID,new b([0,0,0,.5]),1),new b([128,128,128])),ghostVertexSymbol:new y(y.STYLE_CIRCLE,
c?18:10,new B(B.STYLE_SOLID,new b([0,0,0,.5]),1),new b([255,255,255,.75])),ghostLineSymbol:new B(B.STYLE_DOT,new b([128,128,128]),2),allowDeleteVertices:!0,allowAddVertices:!0,rotateHandleOffset:c?24:16,boxLineSymbol:new B(B.STYLE_DASH,new b([64,64,64]),1),boxHandleSymbol:new y(y.STYLE_SQUARE,c?16:9,new B(B.STYLE_SOLID,new b([0,0,0,.5]),1),new b([255,255,255,.75])),textAnchorSymbol:new y(y.STYLE_CIRCLE,10,null,new b([255,0,0]))},a||{})},activate:function(c,a,d){this.deactivate();this._graphic=a;this._options=
f.mixin(f.mixin({},this._defaultOptions),d||{});var b=I.MOVE;d=I.EDIT_VERTICES;var h=I.SCALE,q=I.ROTATE,t=I.EDIT_TEXT,y=!1,e=!1,B=!1,u=this._map,g=u.spatialReference,G=a.geometry.spatialReference;this._geo=!(!g||!G||g.equals(G)||!g.isWebMercator()||4326!==G.wkid);this._isTextPoint=this._prepareTextSymbolEditing(a,c);(c&b)===b&&(y=this._enableMove(a));b=(c&h)===h;q=(c&q)===q;if(b||q)B=this._enableBoxEditing(a,b,q);(c&d)===d&&(e=this._enableVertexEditing(a));(c&t)===t&&this._enableTextEditing(a);if(!(y||
e||B))throw Error("[esri.toolbars.Edit::activate] Unable to activate the tool. Check if the tool is valid for the given geometry type.");if(this._tool=c)this._mapPanEndHandle=n.connect(u,"onPanEnd",this,this._mapPanEndHandler),this._mapExtChgHandle=n.connect(u,"onExtentChange",this,this._mapExtentChangeHandler),this.onActivate(this._tool,a);u.snappingManager&&(y||e)&&u.snappingManager._startSelectionLayerQuery()},deactivate:function(){this._isTextPoint=null;var c=this._tool,a=this._graphic;if(c){var d=
!!this._modified;this._clear();n.disconnect(this._mapPanEndHandle);n.disconnect(this._mapExtChgHandle);this._graphic=this._geo=this._mapPanEndHandle=this._mapExtChgHandle=null;this.onDeactivate(c,a,{isModified:d});this._map.snappingManager&&this._map.snappingManager._stopSelectionLayerQuery()}},refresh:function(){this._refreshMoveables(!0)},getCurrentState:function(){return{tool:this._tool,graphic:this._graphic,isModified:!!this._modified}},onActivate:function(c,a){},onDeactivate:function(c,a,d){},
onGraphicMoveStart:function(c){},onGraphicFirstMove:function(c){this._modified=!0},onGraphicMove:function(c,a){},onGraphicMoveStop:function(c,a){},onGraphicClick:function(c,a){},onVertexMoveStart:function(c,a){},onVertexFirstMove:function(c,a){this._modified=!0},onVertexMove:function(c,a,d){},onVertexMoveStop:function(c,a,d){},onVertexAdd:function(c,a){this._modified=!0},onVertexClick:function(c,a){},onVertexMouseOver:function(c,a){},onVertexMouseOut:function(c,a){},onVertexDelete:function(c,a){this._modified=
!0},onTextEditStart:function(c,a){},onTextEditEnd:function(c){},onScaleStart:function(c){},onScaleFirstMove:function(c){this._modified=!0},onScale:function(c,a){},onScaleStop:function(c,a){},onRotateStart:function(c){},onRotateFirstMove:function(c){this._modified=!0},onRotate:function(c,a){},onRotateStop:function(c,a){},_eventMap:{activate:["tool","graphic"],deactivate:["tool","graphic","info"],"graphic-move-start":["graphic"],"graphic-first-move":["graphic"],"graphic-move":["graphic","transform"],
"graphic-move-stop":["graphic","transform"],"graphic-click":["graphic","info"],"vertex-move-start":["graphic","vertexinfo"],"vertex-first-move":["graphic","vertexinfo"],"vertex-move":["graphic","vertexinfo","transform"],"vertex-move-stop":["graphic","vertexinfo","transform"],"vertex-add":["graphic","vertexinfo"],"vertex-click":["graphic","vertexinfo"],"vertex-mouse-over":["graphic","vertexinfo"],"vertex-mouse-out":["graphic","vertexinfo"],"vertex-delete":["graphic","vertexinfo"],"scale-start":["graphic"],
"scale-first-move":["graphic"],scale:["graphic","info"],"scale-stop":["graphic","info"],"rotate-start":["graphic"],"rotate-first-move":["graphic"],rotate:["graphic","info"],"rotate-stop":["graphic","info"]},_prepareTextSymbolEditing:function(c,a){if("point"===c.geometry.type||"multipoint"===c.geometry.type){var d=c.getLayer(),b=d.renderer,d=c.symbol||d._getSymbol(c);!d&&(b.hasVisualVariables("sizeInfo",!1)||b.hasVisualVariables("colorInfo",!1)||b.hasVisualVariables("opacityInfo",!1))&&b.addBreak&&
b.infos&&1===b.infos.length&&(d=b.infos[0].symbol||b.defaultSymbol);if(d&&"textsymbol"===d.type){if((a&I.SCALE)===I.SCALE||(a&I.ROTATE)===I.ROTATE||(a&I.EDIT_TEXT)===I.EDIT_TEXT){c.setSymbol(new G(d.toJson()));var h=this;this._textSymbolEditor?(this._textSymbolEditor.createForm(c),this._textSymbolEditor.show()):this._options&&this._options.textSymbolEditor?(this._textSymbolEditor=this._options.textSymbolEditor,this._textSymbolEditor.on("symbol-change",function(){h._boxEditor&&h._boxEditor.refresh()})):
m(["../dijit/SymbolEditor"],function(a){if(!h._textSymbolEditor){var d;d=h._options.textSymbolEditorHolder?g.create("div",null,h._options.textSymbolEditorHolder):g.create("div",null,h._map.root);h._textSymbolEditor=new a({graphic:c},d);a=h._textSymbolEditor.domNode.parentNode.id;p.set(h._textSymbolEditor.domNode,{position:"map_root"===a?"absolute":"relative",left:"map_root"===a?h._map.width/2-100+"px":"5px",top:"20px","z-index":50});h._textSymbolEditor.startup();h._textSymbolEditor.createForm(c);
h._textSymbolEditor.show();h._textSymbolEditor.on("symbol-change",function(){h._boxEditor&&h._boxEditor.refresh()})}})}if((a&I.MOVE)===I.MOVE||(a&I.ROTATE)===I.ROTATE||(a&I.SCALE)===I.SCALE)this._textAnchor=new E(c.geometry,this._options.textAnchorSymbol),this._scratchGL.add(this._textAnchor);return!0}}return!1},_enableMove:function(c){var a=this._map;switch(c.geometry.type){case "point":case "polyline":case "polygon":return this._graphicMover=new q(c,a,this,this._textAnchor),!0}return!1},_enableVertexEditing:function(c){var a=
this._map;switch(c.geometry.type){case "multipoint":case "polyline":case "polygon":return this._vertexEditor=t.create(c,a,this),!0}return!1},_enableBoxEditing:function(a,d,b){var h=this._map,q=a.geometry.type;return"polyline"===q||"polygon"===q||this._isTextPoint?(this._boxEditor=new c(a,h,this,d,b,this._options.uniformScaling,this._isTextPoint),!0):!1},_enableTextEditing:function(c){return this._isTextPoint?(this._textEditor=new u(c,this._map,this),n.connect(this._textEditor,"onEditStart",f.hitch(this,
function(){this._textAnchor&&(this._textAnchor.getLayer().remove(this._textAnchor),this._textAnchor=null);this._map.disableKeyboardNavigation();this._disableMove();this._disableBoxEditing()})),!0):!1},_disableMove:function(){var c=this._graphicMover;c&&(c.destroy(),this._graphicMover=null)},_disableVertexEditing:function(){var c=this._vertexEditor;c&&(c.destroy(),this._vertexEditor=null)},_disableBoxEditing:function(){var c=this._boxEditor;c&&(c.destroy(),this._boxEditor=null)},_disableTextEditing:function(){this._textEditor&&
(this._textEditor.destroy(),this._textEditor=null);this._map.enableKeyboardNavigation()},_disableSymbolEditing:function(){this._textSymbolEditor&&this._textSymbolEditor.hide()},_clear:function(){this._disableMove();this._disableVertexEditing();this._disableBoxEditing();this._disableTextEditing();this._disableSymbolEditing();this._textAnchor&&(this._textAnchor.getLayer().remove(this._textAnchor),this._textAnchor=null);this._tool=0;this._modified=!1},_mapPanEndHandler:function(){this._refreshMoveables()},
_mapExtentChangeHandler:function(c,a,d){d&&this._refreshMoveables()},_refreshMoveables:function(c){var d=a.filter([this._graphicMover,this._vertexEditor,this._boxEditor],r.isDefined);a.forEach(d,function(a){a.refresh(c)})},_beginOperation:function(c){a.forEach(this._getAffectedTools(c),function(c){c.suspend()})},_endOperation:function(c){a.forEach(this._getAffectedTools(c),function(c){c.resume()})},_getAffectedTools:function(c){var d=[];switch(c){case "MOVE":d=[this._vertexEditor,this._boxEditor];
break;case "VERTICES":d=[this._boxEditor];break;case "BOX":d=[this._vertexEditor]}return d=a.filter(d,r.isDefined)}});f.mixin(I,{MOVE:1,EDIT_VERTICES:2,SCALE:4,ROTATE:8,EDIT_TEXT:16});e("extend-esri")&&f.setObject("toolbars.Edit",I,l);return I})},"esri/toolbars/_Box":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/has dojo/dom-style dojox/gfx/Moveable dojox/gfx/matrix ../kernel ../lang ../geometry/Point ../geometry/Polyline ../symbols/SimpleMarkerSymbol ../geometry/webMercatorUtils ../geometry/jsonUtils ../graphic".split(" "),
function(m,k,f,n,a,b,e,g,p,l,r,d,h,c,q,t,u){m=m(null,{declaredClass:"esri.toolbars._Box",constructor:function(c,a,d,b,h,q,t){this._graphic=c;this._map=a;this._toolbar=d;this._scale=b;this._rotate=h;this._defaultEventArgs={};this._scaleEvent="Scale";this._rotateEvent="Rotate";this._uniformScaling=q;c=d._options;this._markerSymbol=c.boxHandleSymbol;this._lineSymbol=c.boxLineSymbol;this._moveStartHandler=k.hitch(this,this._moveStartHandler);this._firstMoveHandler=k.hitch(this,this._firstMoveHandler);
this._moveStopHandler=k.hitch(this,this._moveStopHandler);this._moveHandler=k.hitch(this,this._moveHandler);this._isTextPoint=t;this._init()},destroy:function(){this._cleanUp();this._graphic=this._map=this._toolbar=this._markerSymbol=this._lineSymbol=null},refresh:function(){this._draw()},suspend:function(){f.forEach(this._getAllGraphics(),function(c){c.hide()})},resume:function(){f.forEach(this._getAllGraphics(),function(c){c.show()});this._draw()},_init:function(){this._draw()},_cleanUp:function(){this._connects&&
f.forEach(this._connects,n.disconnect);var c=this._toolbar._scratchGL;this._anchors&&f.forEach(this._anchors,function(a){c.remove(a.graphic);(a=a.moveable)&&a.destroy()});this._box&&c.remove(this._box);this._box=this._anchors=this._connects=null},_draw:function(){if(this._graphic.getDojoShape()){var c=this._map,a=this._toolbar._scratchGL,b=this._getBoxCoords(),q=new h(c.spatialReference),t=k.clone(f.filter(b,function(c,a){return 8!==a&&0===a%2}));t[0]&&t.push([t[0][0],t[0][1]]);q.addPath(t);this._rotate&&
q.addPath([b[1],b[8]]);this._box?this._box.setGeometry(q):(this._box=new u(q,this._lineSymbol),a.add(this._box));this._anchors?f.forEach(this._anchors,function(a,h){this._scale||(h=8);var q=new d(b[h],c.spatialReference);a.graphic.setGeometry(q);var q=a.moveable,t=a.graphic.getDojoShape();t&&(q?t!==q.shape&&(q.destroy(),a.moveable=this._getMoveable(a.graphic,h)):a.moveable=this._getMoveable(a.graphic,h))},this):(this._anchors=[],this._connects=[],f.forEach(b,function(b,h){!this._scale&&8>h||(b=new d(b,
c.spatialReference),b=new u(b,this._markerSymbol),this._isTextPoint&&1===h%2&&b.hide(),a.add(b),this._anchors.push({graphic:b,moveable:this._getMoveable(b,h)}))},this))}else this._cleanUp()},_getBoxCoords:function(c){var a=this._map,d,b=[],h,q,t;if(this._isTextPoint){d=this._graphic.getNode().getBoundingClientRect();var e=a.__container.getBoundingClientRect();d=[{x:d.left-e.left,y:d.top-e.top},{x:d.right-e.left,y:d.top-e.top},{x:d.right-e.left,y:d.bottom-e.top},{x:d.left-e.left,y:d.bottom-e.top}]}else d=
this._getTransformedBoundingBox(this._graphic);f.forEach(d,function(d,e,y){h=d;(q=y[e+1])||(q=y[0]);t={x:(h.x+q.x)/2,y:(h.y+q.y)/2};c||(h=a.toMap(h),t=a.toMap(t));b.push([h.x,h.y]);b.push([t.x,t.y])});this._rotate&&(d=k.clone(b[1]),d=c?{x:d[0],y:d[1]}:a.toScreen({x:d[0],y:d[1],spatialReference:a.spatialReference}),d.y-=this._toolbar._options.rotateHandleOffset,c||(d=a.toMap(d)),b.push([d.x,d.y]));return b},_getTransformedBoundingBox:function(c){var a=this._map,b=c.geometry.getExtent(),h=c.geometry.spatialReference;
c=new d(b.xmin,b.ymax,h);b=new d(b.xmax,b.ymin,h);c=a.toScreen(c);b=a.toScreen(b);return[{x:c.x,y:c.y},{x:b.x,y:c.y},{x:b.x,y:b.y},{x:c.x,y:b.y}]},_getAllGraphics:function(){var c=[this._box];this._anchors&&f.forEach(this._anchors,function(a){c.push(a.graphic)});return c=f.filter(c,r.isDefined)},_getMoveable:function(c,a){var d=c.getDojoShape();if(d)return c=new g(d),c._index=a,this._connects.push(n.connect(c,"onMoveStart",this._moveStartHandler)),this._connects.push(n.connect(c,"onFirstMove",this._firstMoveHandler)),
this._connects.push(n.connect(c,"onMoveStop",this._moveStopHandler)),c.onMove=this._moveHandler,(d=d.getEventSource())&&e.set(d,"cursor",this._toolbar._cursors["box"+a]),c},_moveStartHandler:function(c){this._toolbar["on"+(8===c.host._index?this._rotateEvent:this._scaleEvent)+"Start"](this._graphic)},_firstMoveHandler:function(c){this._toolbar._deactivateScrollWheel();var a=c.host._index,d=this._wrapOffset=c.host.shape._wrapOffsets[0]||0,b=this._graphic.getLayer()._getTransform(),h;c=f.map(this._getBoxCoords(!0),
function(c){return{x:c[0]+d,y:c[1]}});h=this._isTextPoint?this._map.toScreen(this._graphic.geometry):{x:c[1].x,y:c[3].y};this._centerCoord=p.multiplyPoint(p.invert(b),h);if(8===a)h=p.multiplyPoint(p.invert(b),c[1]),this._isTextPoint&&(this._centerCoord=this._deNormalizePoint(this._centerCoord,h)),this._startLine=[this._centerCoord,h],this._moveLine=k.clone(this._startLine);else if(h=p.multiplyPoint(p.invert(b),c[a]),b=p.multiplyPoint(p.invert(b),c[(a+4)%8]),this._isTextPoint&&(this._centerCoord=this._deNormalizePoint(this._centerCoord,
h)),this._firstMoverToAnchor=Math.sqrt((h.x-this._centerCoord.x)*(h.x-this._centerCoord.x)+(h.y-this._centerCoord.y)*(h.y-this._centerCoord.y)),this._startBox=b,this._startBox.width=c[4].x-c[0].x,this._startBox.height=c[4].y-c[0].y,this._moveBox=k.clone(this._startBox),this._xfactor=h.x>b.x?1:-1,this._yfactor=h.y>b.y?1:-1,1===a||5===a)this._xfactor=0;else if(3===a||7===a)this._yfactor=0;this._toolbar._beginOperation("BOX");this._toolbar["on"+(8===a?this._rotateEvent:this._scaleEvent)+"FirstMove"](this._graphic)},
_moveHandler:function(c,a){c=c.host._index;var d=this._defaultEventArgs,b,h,q;d.angle=0;d.scaleX=1;d.scaleY=1;if(8===c)b=this._startLine,h=this._moveLine,q=h[1],q.x+=a.dx,q.y+=a.dy,a=this._getAngle(b,h),this._isTextPoint&&(a+=this._graphic.symbol.angle),h=p.rotategAt(a,b[0]),this._graphic.getDojoShape().setTransform(h),d.transform=h,d.angle=a,d.around=b[0];else{b=this._startBox;h=this._moveBox;h.width+=a.dx*this._xfactor;h.height+=a.dy*this._yfactor;this._uniformScaling||this._isTextPoint?(b=h.x+
this._xfactor*h.width,h=h.y+this._yfactor*h.height,b=Math.sqrt((b-this._centerCoord.x)*(b-this._centerCoord.x)+(h-this._centerCoord.y)*(h-this._centerCoord.y)),this._scaleRatio=a=q=b/this._firstMoverToAnchor,b=this._centerCoord):(a=h.width/b.width,q=h.height/b.height,b={x:b.x,y:b.y});if(isNaN(a)||Infinity===a||-Infinity===a)a=1;if(isNaN(q)||Infinity===q||-Infinity===q)q=1;h=p.scaleAt(a,q,b);if(this._isTextPoint){var t=p.rotategAt(this._graphic.symbol.angle,b);this._graphic.getDojoShape().setTransform([t,
h])}else this._graphic.getDojoShape().setTransform(h);d.transform=h;d.scaleX=a;d.scaleY=q;d.around=b}this._toolbar["on"+(8===c?this._rotateEvent:this._scaleEvent)](this._graphic,d)},_moveStopHandler:function(c){this._toolbar._activateScrollWheel();var a=this._graphic,d=this._toolbar,b=d._geo?q.geographicToWebMercator(a.geometry):a.geometry,h=b.spatialReference,e=a.getDojoShape(),u=e.getTransform(),y=a.getLayer()._getTransform();this._isTextPoint?(a=this._graphic.symbol,8===c.host._index?a.angle+=
this._getAngle(this._startLine,this._moveLine):a.font.setSize(Math.round(a.font.size*this._scaleRatio*100)/100),this._graphic.setSymbol(a)):(b=b.toJson(),this._updateSegments(b.paths||b.rings,u,y,h),e.setTransform(null),b=t.fromJson(b),a.setGeometry(d._geo?q.webMercatorToGeographic(b,!0):b));this._draw();this._startLine=this._moveLine=this._startBox=this._moveBox=this._xfactor=this._yfactor=null;d._endOperation("BOX");this._defaultEventArgs.transform=u;d["on"+(8===c.host._index?this._rotateEvent:
this._scaleEvent)+"Stop"](this._graphic,this._defaultEventArgs)},_updateSegments:function(c,a,d,b){var h=this._map,q=this._wrapOffset||0;f.forEach(c,function(c){f.forEach(c,function(c){this._updatePoint(c,b,q,p,h,d,a)},this)},this)},_updatePoint:function(c,a,d,b,h,q,t){a=h.toScreen({x:c[0],y:c[1],spatialReference:a},!0);a.x+=d;a=b.multiplyPoint([q,t,b.invert(q)],a);a.x-=d;d=h.toMap(a);c[0]=d.x;c[1]=d.y},_getAngle:function(c,a){return 180*Math.atan2(a[0].y-a[1].y,a[0].x-a[1].x)/Math.PI-180*Math.atan2(c[0].y-
c[1].y,c[0].x-c[1].x)/Math.PI},_deNormalizePoint:function(c,a){var d=this._map._getFrameWidth();if(-1===d)return c;for(c={x:c.x,y:c.y};Math.abs(c.x-a.x)>=d;)c.x=c.x<a.x?c.x+d:c.x-d;var b=Math.abs(c.x-a.x);Math.abs(c.x-a.x+d)<b?c.x+=d:Math.abs(c.x-a.x-d)<b&&(c.x-=d);return c}});b("extend-esri")&&k.setObject("toolbars._Box",m,l);return m})},"dojox/gfx/Moveable":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/event dojo/topic dojo/touch dojo/dom-class dojo/_base/window ./Mover dojo/mouse".split(" "),
function(m,k,f,n,a,b,e,g,p,l){return k("dojox.gfx.Moveable",null,{constructor:function(a,d){this.shape=a;this.delay=d&&0<d.delay?d.delay:0;this.mover=d&&d.mover?d.mover:p;this.leftButtonOnly=d&&d.leftButtonOnly;this.events=[this.shape.on(b.press,m.hitch(this,"onMouseDown"))]},destroy:function(){f.forEach(this.events,function(a){a.remove()});this.events=this.shape=null},onMouseDown:function(a){this.delay?(this.events.push(this.shape.on(b.move,m.hitch(this,"onMouseMove")),this.shape.on(b.release,m.hitch(this,
"onMouseUp"))),this._lastX=a.clientX,this._lastY=a.clientY):this.leftButtonOnly&&!l.isLeft(a)||new this.mover(this.shape,a,this);n.stop(a)},onMouseMove:function(a){var d=a.clientY;if(Math.abs(a.clientX-this._lastX)>this.delay||Math.abs(d-this._lastY)>this.delay)this.onMouseUp(a),new this.mover(this.shape,a,this);n.stop(a)},onMouseUp:function(a){this.events.pop().remove()},onMoveStart:function(b){a.publish("/gfx/move/start",b);e.add(g.body(),"dojoMove")},onMoveStop:function(b){a.publish("/gfx/move/stop",
b);e.remove(g.body(),"dojoMove")},onFirstMove:function(a){},onMove:function(a,d,b){this.onMoving(a,d,b);this.shape.applyLeftTransform(d);this.onMoved(a,d)},onMoving:function(a,d){},onMoved:function(a,d){}})})},"dojox/gfx/Mover":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/on dojo/touch dojo/_base/event".split(" "),function(m,k,f,n,a,b){return f("dojox.gfx.Mover",null,{constructor:function(e,g,f){this.shape=e;this.lastX=g.clientX;this.lastY=g.clientY;e=this.host=f;g=
document;f=n(g,a.move,m.hitch(this,"onFirstMove"));this.events=[n(g,a.move,m.hitch(this,"onMouseMove")),n(g,a.release,m.hitch(this,"destroy")),n(g,"dragstart",m.hitch(b,"stop")),n(g,"selectstart",m.hitch(b,"stop")),f];if(e&&e.onMoveStart)e.onMoveStart(this)},onMouseMove:function(a){var e=a.clientX,f=a.clientY;this.host.onMove(this,{dx:e-this.lastX,dy:f-this.lastY},a);this.lastX=e;this.lastY=f;b.stop(a)},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove()},destroy:function(){k.forEach(this.events,
function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.shape=null}})})},"esri/toolbars/_GraphicMover":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/json dojo/dom-style dojox/gfx/Moveable dojox/gfx/Mover dojox/gfx/matrix ../kernel ../PointerEvents ../sniff ../geometry/webMercatorUtils ../geometry/ScreenPoint ../geometry/Point".split(" "),function(m,k,f,n,a,b,e,g,p,l,r,d,h,c){var q=m(null,{declaredClass:"esri.toolbars._GraphicMover",
constructor:function(c,a,d,b){this.graphic=c;this.map=a;this.toolbar=d;this.tempPt=b;this._enableGraphicMover();this._moved=!1},refresh:function(c){var a=this.graphic.getDojoShape();!a||!c&&a._hostGraphic||(this._disableGraphicMover(),this._enableGraphicMover())},destroy:function(){this._disableGraphicMover()},hasMoved:function(){return this._moved},_enableGraphicMover:function(){var c=this.graphic,d=c.getDojoShape();d&&(d._hostGraphic=c,this._moveable=new b(d,{mover:q.Mover}),this._moveStartHandle=
f.connect(this._moveable,"onMoveStart",this,this._moveStartHandler),this._firstMoveHandle=f.connect(this._moveable,"onFirstMove",this,this._firstMoveHandler),this._movingHandle=f.connect(this._moveable,"onMoving",this,this._movingHandler),this._moveStopHandle=f.connect(this._moveable,"onMoveStop",this,this._moveStopHandler),(c=d.getEventSource())&&a.set(c,"cursor",this.toolbar._cursors.move))},_disableGraphicMover:function(){var c=this._moveable;if(c){f.disconnect(this._moveStartHandle);f.disconnect(this._firstMoveHandle);
f.disconnect(this._movingHandle);f.disconnect(this._moveStopHandle);var d=c.shape;d&&(d._hostGraphic=null,(d=d.getEventSource())&&a.set(d,"cursor","inherit"));c.destroy()}this._moveable=null},_moveStartHandler:function(){var c=this.graphic,a=this.map;this._startTx=c.getDojoShape().getTransform();"point"===this.graphic.geometry.type&&a.snappingManager&&a.snappingManager._setUpSnapping();this.toolbar.onGraphicMoveStart(c)},_firstMoveHandler:function(){this.toolbar._beginOperation("MOVE");this.toolbar.onGraphicFirstMove(this.graphic)},
_movingHandler:function(c,a,d){c=c.shape.getTransform();a=this.map;var b;r("esri-pointer")?b=a.navigationManager.pointerEvents._processTouchEvent(d,d):d&&"pointermove"===d.type&&(b=l.prototype._processTouchEvent.call({map:a},d,d));b&&a.snappingManager&&a.snappingManager._onSnappingMouseMoveHandler(b);this.tempPt&&this.tempPt.getDojoShape().setTransform(c);this.toolbar.onGraphicMove(this.graphic,c)},_moveStopHandler:function(a){var b=this.graphic,q=this.toolbar,e=this.map,t=q._geo?d.geographicToWebMercator(b.geometry):
b.geometry,f=t.type,l=b.getDojoShape(),k=l.getTransform();if(n.toJson(k)!==n.toJson(this._startTx)){this._moved=!0;switch(f){case "point":var f=[k,g.invert(this._startTx)],r;e.snappingManager&&(r=e.snappingManager._snappingPoint);t=r||e.toMap(g.multiplyPoint(f,e.toScreen(t,!0)));e.snappingManager&&e.snappingManager._killOffSnapping();break;case "polyline":t=this._updatePolyGeometry(t,t.paths,k);break;case "polygon":t=this._updatePolyGeometry(t,t.rings,k)}l.setTransform(null);b.setGeometry(q._geo?
d.webMercatorToGeographic(t,!0):t);this.tempPt&&this.tempPt.setGeometry(new c(b.geometry.toJson()))}else this._moved=!1;q._endOperation("MOVE");q.onGraphicMoveStop(b,k);this._moved||(a=a.__e,e=this.map.position,a=new h(a.pageX-e.x,a.pageY-e.y),q.onGraphicClick(b,{screenPoint:a,mapPoint:this.map.toMap(a)}))},_updatePolyGeometry:function(c,a,d){var b=this.map,h=c.getPoint(0,0),b=b.toMap(b.toScreen(h).offset(d.dx,d.dy));d=b.x-h.x;for(var h=b.y-h.y,q,e,t,b=0;b<a.length;b++)for(e=a[b],q=0;q<e.length;q++)t=
c.getPoint(b,q),c.setPoint(b,q,t.offset(d,h));return c}});q.Mover=m(e,{declaredClass:"esri.toolbars._Mover",constructor:function(c,a,d){this.__e=a}});r("extend-esri")&&(k.setObject("toolbars._GraphicMover",q,p),k.setObject("toolbars._Mover",q.Mover,p));return q})},"esri/toolbars/_VertexEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/has dijit/Menu dijit/MenuItem ../kernel ./_VertexMover ../geometry/Point ../geometry/jsonUtils dojo/i18n!../nls/jsapi".split(" "),
function(m,k,f,n,a,b,e,g,p,l,r,d){var h=m(null,{declaredClass:"esri.toolbars._GraphicVertexEditor",constructor:function(c,a,d){this.graphic=c;this.map=a;this.toolbar=d;c=d._options;this._symbol1=c.vertexSymbol;this._symbol2=c.ghostVertexSymbol;a=c.ghostLineSymbol;this._lineStroke={style:a.style,width:a.width,color:a.color};this._canDel=c.allowDeleteVertices;this._canAdd=c.allowAddVertices;this._addControllers()},destroy:function(){this._removeControllers()},refresh:function(c){c?(this._removeControllers(),
this._addControllers()):(this._refresh(this._vertexMovers),this._refresh(this._mpVertexMovers))},suspend:function(){this._suspended||this._removeControllers();this._suspended=!0},resume:function(){this._suspended&&this._addControllers();this._suspended=!1},_addControllers:function(){this._firstMoveHandle=f.connect(p,"onFirstMove",this,this._firstMoveHandler);this._moveStopHandle=f.connect(p,"onMoveStop",this,this._moveStopHandler);this._vertexMovers=this._add(this._getSegments(this.graphic.geometry),
this._symbol1);this._canAdd&&(this._mpVertexMovers=this._add(this._getMidpointSegments(this.graphic.geometry),this._symbol2,!0));var c=this._getGraphicsLayer();this._mouseOverHandle=f.connect(c,"onMouseOver",this,this._mouseOverHandler);this._mouseOutHandle=f.connect(c,"onMouseOut",this,this._mouseOutHandler);this._canDel&&(this._ctxMenu=new b({style:"font-size: 12px; margin-left: 5px; margin-top: 5px;"}),c=this._ctxDelete=new e({label:d.toolbars.edit.deleteLabel,iconClass:"vertexDeleteIcon",style:"outline: none;"}),
this._deleteHandle=f.connect(c,"onClick",this,this._deleteHandler),this._ctxMenu.addChild(c),this._ctxMenu.startup())},_removeControllers:function(){f.disconnect(this._firstMoveHandle);f.disconnect(this._moveStopHandle);f.disconnect(this._mouseOverHandle);f.disconnect(this._mouseOutHandle);f.disconnect(this._deleteHandle);this._ctxMenu&&(this._ctxDelete=null,this._unbindCtxNode(),this._ctxMenu.destroyRecursive());this._remove(this._vertexMovers);this._remove(this._mpVertexMovers);this._vertexMovers=
this._mpVertexMovers=null},_add:function(c,a,d){var b,h,q=this.graphic,e=[];for(b=0;b<c.length;b++){var t=c[b],f=[];for(h=0;h<t.length;h++)f.push(new p(t[h],a,q,b,h,t.length,this,d));e.push(f)}return e},_remove:function(c){c&&n.forEach(c,function(c){n.forEach(c,function(c){c.destroy()})})},_refresh:function(c){c&&n.forEach(c,function(c){n.forEach(c,function(c){c.refresh()})})},_isNew:function(c){return-1===n.indexOf(this._vertexMovers[c.segIndex],c)?!0:!1},_getGraphicsLayer:function(){return this.toolbar._scratchGL},
_deleteHandler:function(c){c=this._selectedMover;this._updateRelatedGraphic(c,c.relatedGraphic,c.graphic.geometry,c.segIndex,c.ptIndex,c.segLength,!1,!0);this._canAdd&&this._deleteMidpoints(c);this._deleteVertex(c);this.toolbar._endOperation("VERTICES")},_mouseOverHandler:function(c){c=c.graphic;var a=this._findMover(c);a&&(this.toolbar.onVertexMouseOver(this.graphic,a._getInfo()),a._placeholder||(this._selectedMover=a,this._canDel&&this._bindCtxNode(c.getDojoShape().getNode())))},_mouseOutHandler:function(c){if(c=
this._findMover(c.graphic))this.toolbar.onVertexMouseOut(this.graphic,c._getInfo())},_bindCtxNode:function(c){this._unbindCtxNode();this._ctxDelete.set("disabled",this._selectedMover.segLength<=this.minLength?!0:!1);this._ctxMenu.bindDomNode(c);this._bindNode=c},_unbindCtxNode:function(){var c=this._bindNode;c&&this._ctxMenu.unBindDomNode(c)},_findMover:function(c){var a,d=[];a=this._mpVertexMovers;n.forEach(this._vertexMovers,function(c){d=d.concat(c)});a&&n.forEach(a,function(c){d=d.concat(c)});
for(a=0;a<d.length;a++){var b=d[a];if(b.graphic===c)return b}},_firstMoveHandler:function(c){!this._isNew(c)&&this._canAdd&&this._hideRelatedMidpoints(c);this.toolbar._beginOperation("VERTICES")},_moveStopHandler:function(c,a){var d=this._isNew(c);a&&(a.dx||a.dy)?(this._updateRelatedGraphic(c,c.relatedGraphic,c.graphic.geometry,c.segIndex,c.ptIndex,c.segLength,d),this._canAdd&&(d?this._addMidpoints(c):(this._repositionRelatedMidpoints(c),this._showRelatedMidpoints(c))),this.toolbar._endOperation("VERTICES")):
!d&&this._canAdd&&this._showRelatedMidpoints(c)},_showRelatedMidpoints:function(c){var a=this._getAdjacentMidpoints(c.ptIndex,c.segLength),d=this._mpVertexMovers[c.segIndex];for(c=0;c<a.length;c++){var b=d[a[c]];b.graphic.show();b.refresh()}},_hideRelatedMidpoints:function(c){var a=this._getAdjacentMidpoints(c.ptIndex,c.segLength),d=this._mpVertexMovers[c.segIndex];for(c=0;c<a.length;c++)d[a[c]].graphic.hide()},_repositionRelatedMidpoints:function(c){var a,d=this._getAdjacentMidpoints(c.ptIndex,c.segLength),
b=this._mpVertexMovers[c.segIndex];for(a=0;a<d.length;a++){var h=this._getAdjacentVertices(d[a],c.segLength),e=c.relatedGraphic.geometry.getPoint(c.segIndex,h[0]),h=c.relatedGraphic.geometry.getPoint(c.segIndex,h[1]),e=new l({x:(e.x+h.x)/2,y:(e.y+h.y)/2,spatialReference:e.spatialReference.toJson()});b[d[a]].graphic.setGeometry(e)}},_addMidpoints:function(c){var a=c.segIndex,d=c.ptIndex,b=c.segLength,h=d+1,e,f=b+1;this._mpVertexMovers[a].splice(d,1);var g=this._vertexMovers[a];for(e=0;e<h;e++)g[e].segLength+=
1;for(e=h;e<g.length;e++)g[e].ptIndex+=1,g[e].segLength+=1;c.ptIndex=h;c.segLength=g.length+1;g.splice(h,0,c);c.graphic.setSymbol(this._symbol1);g=this._mpVertexMovers[a];for(e=0;e<d;e++)g[e].segLength+=1;for(e=d;e<b-1;e++)g[e].ptIndex+=1,g[e].segLength+=1;h=this._getAdjacentVertices(d,f);a=this._getAdjacentVertices(d+1,f);b=c.relatedGraphic.geometry.getPoint(c.segIndex,h[0]);e=c.relatedGraphic.geometry.getPoint(c.segIndex,h[1]);h=new l({x:(b.x+e.x)/2,y:(b.y+e.y)/2,spatialReference:b.spatialReference.toJson()});
b=c.relatedGraphic.geometry.getPoint(c.segIndex,a[0]);e=c.relatedGraphic.geometry.getPoint(c.segIndex,a[1]);a=new l({x:(b.x+e.x)/2,y:(b.y+e.y)/2,spatialReference:b.spatialReference.toJson()});b=new p(h,this._symbol2,this.graphic,c.segIndex,d,f,this,!0);c=new p(a,this._symbol2,this.graphic,c.segIndex,d+1,f,this,!0);g.splice(d,0,b,c)},_deleteVertex:function(c){var a,d=c.ptIndex,b=this._vertexMovers[c.segIndex];for(a=0;a<d;a++)--b[a].segLength;for(a=d+1;a<b.length;a++){var h=b[a];--h.ptIndex;--h.segLength}b.splice(d,
1);a=c._getInfo();c.destroy();this.toolbar.onVertexDelete(this.graphic,a)}});k.mixin(h,{create:function(c,a,d){switch(c.geometry.type){case "multipoint":return new h.MultipointVertexEditor(c,a,d);case "polyline":return new h.PolylineVertexEditor(c,a,d);case "polygon":return new h.PolygonVertexEditor(c,a,d)}}});h.MultipointVertexEditor=m(h,{declaredClass:"esri.toolbars._MultipointVertexEditor",minLength:1,constructor:function(){this._moveStartHandle=f.connect(p,"onMoveStart",this,this._moveStartHandler);
f.disconnect(this._firstMoveHandle)},destroy:function(){this.inherited(arguments);f.disconnect(this._moveStartHandle)},_getSegments:function(c){var a=c.points,d=[],b=c.spatialReference;for(c=0;c<a.length;c++){var h=a[c];d.push(new l({x:h[0],y:h[1],spatialReference:b.toJson()}))}return[d]},_getMidpointSegments:function(c){return[]},_getControlPoints:function(c,a,d,b,h){return[]},_getGraphicsLayer:function(){return this.graphic._graphicsLayer},_mouseOverHandler:function(c){var a=c.graphic;if(c=this._findMover(c))this.toolbar.onVertexMouseOver(a,
c._getInfo()),this._selectedMover=c,this._canDel&&this._bindCtxNode(c.graphic.getDojoShape().getNode())},_mouseOutHandler:function(c){var a=c.graphic;if(c=this._findMover(c))this.toolbar.onVertexMouseOut(a,c._getInfo())},_findMover:function(c){var a=[].concat(this._vertexMovers[0]),d=c.target;for(c=0;c<a.length;c++){var b=a[c];if(b.graphic.getDojoShape().getNode()===d)return b}},_moveStartHandler:function(c){var a=c.ptIndex,d=c.segLength-1,b=c.relatedGraphic.geometry.points;c=b.splice(a,1);b.push(c[0]);
b=this._vertexMovers[0];for(c=d;c>a;c--)--b[c].ptIndex;c=b.splice(a,1);b.push(c[0]);c[0].ptIndex=d},_moveStopHandler:function(c){this._updateRelatedGraphic(c,c.relatedGraphic,c.graphic.geometry,c.segIndex,c.ptIndex,c.segLength);this.toolbar._endOperation("VERTICES")},_updateRelatedGraphic:function(c,a,d,b,h,e,f,g){c=a.geometry;g?c.removePoint(h):c.setPoint(h,d);a.setGeometry(c)},_deleteMidpoints:function(c){}});h.PolylineVertexEditor=m(h,{declaredClass:"esri.toolbars._PolylineVertexEditor",minLength:2,
_getSegments:function(c){var a,d,b=c.paths,h=[];for(a=0;a<b.length;a++){var e=b[a],g=[];for(d=0;d<e.length;d++)g.push(c.getPoint(a,d));h.push(g)}return h},_getMidpointSegments:function(c){var a,d,b=c.paths,h=[],e=c.spatialReference;for(a=0;a<b.length;a++){var g=b[a],f=[];for(d=0;d<g.length-1;d++){var k=c.getPoint(a,d),r=c.getPoint(a,d+1),k=new l({x:(k.x+r.x)/2,y:(k.y+r.y)/2,spatialReference:e.toJson()});f.push(k)}h.push(f)}return h},_getControlPoints:function(c,a,d,b,h){var e=this.map,q,g;this._isNew(c)?
(c=b,b+=1,0<=c&&(q=e.toScreen(a.getPoint(d,c))),b<=h&&(g=e.toScreen(a.getPoint(d,b)))):(c=b-1,b+=1,0<=c&&(q=e.toScreen(a.getPoint(d,c))),b<h&&(g=e.toScreen(a.getPoint(d,b))));return[q,g]},_getAdjacentMidpoints:function(c,a){var d=[],b=c-1;0<=b&&d.push(b);c<a-1&&d.push(c);return d},_getAdjacentVertices:function(c,a){return[c,c+1]},_deleteMidpoints:function(c){var a=this._mpVertexMovers[c.segIndex],d=a.length-1,b=this._getAdjacentMidpoints(c.ptIndex,c.segLength).sort(),h,e=b[0];for(h=0;h<e;h++)--a[h].segLength;
for(h=e+1;h<a.length;h++){var g=a[h];--g.ptIndex;--g.segLength}if(1===b.length)a.splice(e,1)[0].destroy();else for(g=this._getAdjacentVertices(e,d),h=c.relatedGraphic.geometry.getPoint(c.segIndex,g[0]),g=c.relatedGraphic.geometry.getPoint(c.segIndex,g[1]),h=new l({x:(h.x+g.x)/2,y:(h.y+g.y)/2,spatialReference:h.spatialReference.toJson()}),c=new p(h,this._symbol2,this.graphic,c.segIndex,e,d,this,!0),a=a.splice(e,b.length,c),h=0;h<a.length;h++)a[h].destroy()},_updateRelatedGraphic:function(c,a,d,b,h,
e,g,f){c=a.geometry;g?c.insertPoint(b,h+1,r.fromJson(d.toJson())):f?c.removePoint(b,h):c.setPoint(b,h,r.fromJson(d.toJson()));a.setGeometry(c)}});h.PolygonVertexEditor=m(h,{declaredClass:"esri.toolbars._PolygonVertexEditor",minLength:3,_getSegments:function(c){var a,d,b=c.rings,h=[];for(a=0;a<b.length;a++){var e=b[a],g=[];for(d=0;d<e.length-1;d++)g.push(c.getPoint(a,d));h.push(g)}return h},_getMidpointSegments:function(c){var a,d,b=c.rings,h=[],e=c.spatialReference;for(a=0;a<b.length;a++){var g=b[a],
f=[];for(d=0;d<g.length-1;d++){var k=c.getPoint(a,d),r=c.getPoint(a,d+1),k=new l({x:(k.x+r.x)/2,y:(k.y+r.y)/2,spatialReference:e.toJson()});f.push(k)}h.push(f)}return h},_getControlPoints:function(c,a,d,b,h){var e=this.map;this._isNew(c)?c=b:(c=b-1,c=0>c?(h+c)%h:c);b=(b+1)%h;h=e.toScreen(a.getPoint(d,c));a=e.toScreen(a.getPoint(d,b));return[h,a]},_getAdjacentMidpoints:function(c,a){var d=c-1;return[0>d?(a+d)%a:d,c]},_getAdjacentVertices:function(c,a){return[c,(c+1)%a]},_deleteMidpoints:function(c){var a=
c.ptIndex,d=this._mpVertexMovers[c.segIndex],b=d.length-1,h=this._getAdjacentMidpoints(a,c.segLength).sort(),e,g;g=h[0];var f=h[h.length-1];if(0===a)for(e=this._getAdjacentVertices(b-1,b),a=c.relatedGraphic.geometry.getPoint(c.segIndex,e[0]),e=c.relatedGraphic.geometry.getPoint(c.segIndex,e[1]),a=new l({x:(a.x+e.x)/2,y:(a.y+e.y)/2,spatialReference:a.spatialReference.toJson()}),c=new p(a,this._symbol2,this.graphic,c.segIndex,b-1,b,this,!0),d.splice(f,1,c)[0].destroy(),d.splice(g,1)[0].destroy(),h=
0;h<d.length-1;h++)g=d[h],--g.ptIndex,--g.segLength;else{e=this._getAdjacentVertices(g,b);a=c.relatedGraphic.geometry.getPoint(c.segIndex,e[0]);e=c.relatedGraphic.geometry.getPoint(c.segIndex,e[1]);a=new l({x:(a.x+e.x)/2,y:(a.y+e.y)/2,spatialReference:a.spatialReference.toJson()});c=new p(a,this._symbol2,this.graphic,c.segIndex,g,b,this,!0);f=d.splice(g,h.length,c);for(h=0;h<f.length;h++)f[h].destroy();for(h=0;h<g;h++)--d[h].segLength;for(h=g+1;h<d.length;h++)g=d[h],--g.ptIndex,--g.segLength}},_updateRelatedGraphic:function(c,
a,d,b,h,e,g,f){c=a.geometry;g?c.insertPoint(b,h+1,r.fromJson(d.toJson())):f?(c.removePoint(b,h),0===h&&c.setPoint(b,e-1,r.fromJson(c.getPoint(b,0).toJson()))):(c.setPoint(b,h,r.fromJson(d.toJson())),0===h&&c.setPoint(b,e,r.fromJson(d.toJson())));a.setGeometry(c)}});a("extend-esri")&&(k.setObject("toolbars._GraphicVertexEditor",h,g),k.setObject("toolbars._MultipointVertexEditor",h.MultipointVertexEditor,g),k.setObject("toolbars._PolylineVertexEditor",h.PolylineVertexEditor,g),k.setObject("toolbars._PolygonVertexEditor",
h.PolygonVertexEditor,g));return h})},"esri/toolbars/_VertexMover":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/sniff dojo/dom-style dojox/gfx/Moveable ../kernel ../PointerEvents ../sniff ../geometry/Point ../graphic ../geometry/webMercatorUtils".split(" "),function(m,k,f,n,a,b,e,g,p,l,r,d){m=m(null,{declaredClass:"esri.toolbars.VertexMover",constructor:function(a,c,d,b,e,g,f,k){this.point=a;this.symbol=c;this.relatedGraphic=d;this.segIndex=b;this.ptIndex=e;this.segLength=
g;this.editor=f;this.map=f.map;this._scratchGL=f.toolbar._scratchGL;this._placeholder=k||!1;this._type=d.geometry.type;this._init();this._enable()},refresh:function(a){if(a||this._needRefresh())this._disable(),this._enable()},destroy:function(){this._disable();this.graphic&&this._scratchGL.remove(this.graphic);this.point=this.symbol=this.graphic=this.relatedGraphic=this.segIndex=this.ptIndex=this.segLength=this.editor=this.map=this._scratchGL=null},_init:function(){var a=new l(this.point.toJson()),
a=new r(a,this.symbol);switch(this._type){case "multipoint":a._shape=this.relatedGraphic.getDojoShape().children[this.ptIndex];break;case "polyline":case "polygon":this._scratchGL.add(a)}this.graphic=a},_enable:function(){var d=this.graphic.getDojoShape();d&&(d._hasMover=!0,this._moveable=this._getMoveable(d),(d=d.getEventSource())&&a.set(d,"cursor",this.editor.toolbar._cursors[this._placeholder?"move-gv":"move-v"]))},_disable:function(){var d=this._moveable;if(d){f.disconnect(this._startHandle);
f.disconnect(this._firstHandle);f.disconnect(this._movingHandle);f.disconnect(this._stopHandle);var c=d.shape;c&&(c=c.getEventSource())&&a.set(c,"cursor","inherit");d.destroy();this._moveable=null}},_needRefresh:function(){var a=this.graphic.getDojoShape(),c=!1;if(a)switch(this._type){case "multipoint":var d=this.relatedGraphic.getDojoShape();d&&(d=d.children[this.ptIndex],a!==d&&(this.graphic._shape=d,c=!0));break;case "polyline":case "polygon":c=!a._hasMover}return c},_getMoveable:function(a){a=
new b(a,n("mac")&&n("ff")&&!p("esri-touch")&&{leftButtonOnly:!0});this._startHandle=f.connect(a,"onMoveStart",this,this._moveStartHandler);this._firstHandle=f.connect(a,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=f.connect(a,"onMoving",this,this._movingHandler);this._stopHandle=f.connect(a,"onMoveStop",this,this._moveStopHandler);return a},_getPtIndex:function(){return this.ptIndex+(this._placeholder?1:0)},_getInfo:function(){return{graphic:this.graphic,isGhost:this._placeholder,
segmentIndex:this.segIndex,pointIndex:this._getPtIndex()}},_moveStartHandler:function(a){var c=this.map;c.snappingManager&&c.snappingManager._setUpSnapping();this.editor.toolbar._deactivateScrollWheel();a.shape.moveToFront();this.constructor.onMoveStart(this);this.editor.toolbar.onVertexMoveStart(this.relatedGraphic,this._getInfo())},_firstMoveHandler:function(a){var c=a.shape,d=this._getControlEdges(),b=this._scratchGL._div,h,e=[],g=a.host.shape._wrapOffsets[0]||0;for(h=0;h<d.length;h++){var f=d[h];
f.x1+=g;f.x2+=g;e.push([b.createLine({x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2}).setStroke(this.editor._lineStroke),f.x1,f.y1,f.x2,f.y2])}c._lines=e;a.shape.moveToFront();this.constructor.onFirstMove(this);this.editor.toolbar.onVertexFirstMove(this.relatedGraphic,this._getInfo())},_movingHandler:function(a,c,d){c=this.map;var b;p("esri-pointer")?b=c.navigationManager.pointerEvents._processTouchEvent(d,d):d&&"pointermove"===d.type&&(b=g.prototype._processTouchEvent.call({map:c},d,d));b&&c.snappingManager&&
c.snappingManager._onSnappingMouseMoveHandler(b);d=a.shape;a=d.getTransform();d=d._lines;for(b=0;b<d.length;b++)c=d[b],c[0].setShape({x1:c[1]+a.dx,y1:c[2]+a.dy,x2:c[3],y2:c[4]});this.editor.toolbar.onVertexMove(this.relatedGraphic,this._getInfo(),a)},_moveStopHandler:function(a){a=a.shape;var c=this.editor.toolbar,b=a.getTransform(),h=this.map,e=this.graphic,g=c._geo?d.geographicToWebMercator(e.geometry):e.geometry;c._activateScrollWheel();var f,k=a._lines;if(k){for(f=0;f<k.length;f++)k[f][0].removeShape();
a._lines=null}f=!1;var k=!0,l=this._getInfo();b&&(b.dx||b.dy)?this._placeholder&&(this._placeholder=!1,f=!0):k=!1;var r;h.snappingManager&&(r=h.snappingManager._snappingPoint);r=r||h.toMap(h.toScreen(g).offset(b.dx,b.dy));h.snappingManager&&h.snappingManager._killOffSnapping();a.setTransform(null);e.setGeometry(c._geo?d.webMercatorToGeographic(r,!0):r);this.constructor.onMoveStop(this,b);c.onVertexMoveStop(this.relatedGraphic,l,b);if(!k)c.onVertexClick(this.relatedGraphic,l);if(f)c.onVertexAdd(this.relatedGraphic,
this._getInfo())},_getControlEdges:function(){var a=this.map,c=this.relatedGraphic.geometry,d=this.segIndex,b=this.ptIndex,e=this.segLength,g=this._scratchGL._getTransform(),f=g.dx,g=g.dy,k=a.toScreen(this.graphic.geometry),a=k.x-f,k=k.y-g,l=[],c=this.editor._getControlPoints(this,c,d,b,e);c[0]&&l.push({x1:a,y1:k,x2:c[0].x-f,y2:c[0].y-g});c[1]&&l.push({x1:a,y1:k,x2:c[1].x-f,y2:c[1].y-g});return l}});p("extend-esri")&&k.setObject("toolbars.VertexMover",m,e);k.mixin(m,{onMoveStart:function(){},onFirstMove:function(){},
onMoveStop:function(){}});return m})},"esri/toolbars/TextEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/has dojo/dom-construct dojo/dom-class dojo/dom-style dojo/keys ../kernel".split(" "),function(m,k,f,n,a,b,e,g,p,l){m=m(null,{declaredClass:"esri.toolbars.TextEditor",constructor:function(a,d,b){this._graphic=a;this._map=d;this._toolbar=b;this._enable(this._graphic)},destroy:function(){this._disable()},onEditStart:function(){},onEditEnd:function(){},
_enable:function(a){this._editBox?(f.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null):(this._map.navigationManager.setImmediateClick(!0),this._addEditBoxHandler=f.connect(a.getLayer(),"onDblClick",this,function(d){this._map.navigationManager.setImmediateClick(!1);d.graphic==a&&(n.stop(d),f.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null,this._addTextBox(a))}))},_disable:function(){this._applyEdit();this._addEditBoxHandler&&(f.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=
null);this._removeTextBox();this.onEditEnd(this._graphic);this._toolbar.onTextEditEnd(this._graphic)},_addTextBox:function(a,d){if(!this._editBox){var h;a.symbol.text||(a.symbol.text="Tempt text",a.setSymbol(a.symbol),h="");var c=this._createInputTextStyle(a,this._map);""!==h&&(h=d||a.symbol.text);this._editBox=b.create("input",{type:"text",value:h});g.set(this._editBox,c);e.add(this._editBox,"esriTextEditorInput");this._map.container.appendChild(this._editBox);this._editBox.focus();this._editBoxKeyHandler=
f.connect(this._editBox,"onkeyup",k.hitch(this,function(a){a.keyCode!=p.ENTER&&a.keyCode!==p.TAB||this._disable()}));this._editBoxBlurHandler=f.connect(this._editBox,"onblur",k.hitch(this,function(a){this._disable()}));a.symbol.text="";a.setSymbol(a.symbol);a.hide();var q=this._editBox;this._disableBoxHandler||(this._disableBoxHandler=this._map.on("zoom-start",k.hitch(this,function(){this._disable()})));this._moveBoxHandler=this._map.on("pan",function(a){g.set(q,{left:this._editBoxLeft+a.delta.x+
"px",top:this._editBoxTop+a.delta.y+"px"})});this._moveBoxStartHandler=this._map.on("pan-start",function(){this._editBoxLeft=parseFloat(g.get(q,"left"));this._editBoxTop=parseFloat(g.get(q,"top"))});this.onEditStart(a,this._editBox);this._toolbar.onTextEditStart(a,this._editBox)}},_removeTextBox:function(){this._editBoxBlurHandler&&(f.disconnect(this._editBoxBlurHandler),this._editBoxBlurHandler=null);this._editBox&&(this._editBox.parentNode.removeChild(this._editBox),this._editBox=null);this._disableBoxHandler&&
(this._disableBoxHandler.remove(),this._disableBoxHandler=null);this._moveBoxHandler&&(this._moveBoxHandler.remove(),this._moveBoxHandler=null);this._moveBoxStartHandler&&(this._moveBoxStartHandler.remove(),this._moveBoxStartHandler=null);this._editBoxKeyHandler&&(f.disconnect(this._editBoxKeyHandler),this._editBoxKeyHandler=null)},_createInputTextStyle:function(a,d){d=a.getDojoShape().getTransformedBoundingBox();var b=a.symbol.font;return{"font-family":b.family,"font-size":b.size+"px","font-style":b.style,
"font-variant":b.variant,"font-weight":b.weight,left:d[0].x+"px",top:d[0].y+"px",width:Math.abs(d[0].x-d[1].x)/Math.cos(a.symbol.angle/180*Math.PI)+"px"}},_applyEdit:function(){if(this._editBox)if(this._editBox.value){this._graphic.show();var a=this._graphic.symbol;a.text=this._editBox.value;this._graphic.setSymbol(a)}else this._graphic.getLayer().remove(this._graphic)}});a("extend-esri")&&k.setObject("toolbars.TextEditor",m,l);return m})},"widgets/GriddedReferenceGraphic/js/GridSettings":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/on dojo/dom-style ./ColorPickerEditor ./FontSetting jimu/BaseWidget jimu/dijit/TabContainer dijit/_WidgetsInTemplateMixin dojo/text!../templates/GridSettings.html dojo/_base/lang dojo/Evented dojo/dom-class dijit/form/Select".split(" "),
function(m,k,f,n,a,b,e,g,p,l,r,d,h,c){return m([g,l,h],{baseClass:"jimu-widget-GRGDrafter-Settings",templateString:r,selectedGridSettings:{},_defaultColor:"#1a299c",_defaultTextSize:12,_defaultFont:{font:{fontFamily:"Arial",bold:!1,italic:!1,underline:!1},fontSize:12,textColor:"#2f4f4f"},gridSettingsOptions:{cellShape:["default","hexagon"],cellUnits:"meters kilometers miles nautical-miles yards feet".split(" "),labelStartPosition:["lowerLeft","lowerRight","upperLeft","upperRight"],labelType:["alphaNumeric",
"alphaAlpha","numeric"],labelTypeWithRefSys:["gridReferenceSystem","alphaNumeric","alphaAlpha","numeric"],labelDirection:["horizontal","vertical"],gridOrigin:["center","lowerLeft","lowerRight","upperLeft","upperRight"],referenceSystem:["MGRS","USNG"]},constructor:function(a){d.mixin(this,a)},startup:function(){this.tab=new p({tabs:[{title:this.nls.gridSettingsLabel,content:this.gridTab},{title:this.nls.labelSettingsLabel,content:this.labelTab}],selected:this.nls.gridTabLabel});this.tab.placeAt(this.tabsContainer);
this.tab.startup();this.gridOutlineColorPicker=new b({nls:this.nls},this.cellOutlineColorPicker);a.set(this.gridOutlineColorPicker.slider.domNode,"width","");this.gridOutlineColorPicker.setValues({color:this.config.grg.cellOutline.color,transparency:this.config.grg.cellOutline.transparency});this.gridOutlineColorPicker.startup();this.gridFillColorPicker=new b({nls:this.nls},this.cellFillColorPicker);a.set(this.gridFillColorPicker.slider.domNode,"width","");this.gridFillColorPicker.setValues({color:this.config.grg.cellFill.color,
transparency:this.config.grg.cellFill.transparency});this.gridFillColorPicker.startup();this.fontSetting=new e({config:this.config.grg.font||this._defaultFont,nls:this.nls},this.fontSettingNode);this.fontSetting.startup();this._loadOptionsForDropDown(this.cellShape,this.gridSettingsOptions.cellShape);this._loadOptionsForDropDown(this.labelStartPosition,this.gridSettingsOptions.labelStartPosition);this._loadOptionsForDropDown(this.cellUnits,this.gridSettingsOptions.cellUnits);this._loadOptionsForDropDown(this.labelType,
this.gridSettingsOptions.labelType);this._loadOptionsForDropDown(this.labelTypeWithRefSys,this.gridSettingsOptions.labelTypeWithRefSys);this._loadOptionsForDropDown(this.labelDirection,this.gridSettingsOptions.labelDirection);this._loadOptionsForDropDown(this.gridOrigin,this.gridSettingsOptions.gridOrigin);this._loadOptionsForDropDown(this.referenceSystem,this.gridSettingsOptions.referenceSystem);this.config.grg&&(this.cellShape.setValue(this.config.grg.cellShape),this.cellUnits.setValue(this.config.grg.cellUnits),
this.gridOrigin.setValue(this.config.grg.gridOrigin),this.labelType.setValue(this.config.grg.labelType),this.labelDirection.setValue(this.config.grg.labelDirection),this.labelStartPosition.setValue(this.config.grg.labelOrigin),this.referenceSystem.setValue(this.config.grg.referenceSystem),"hexagon"===this.cellShape.get("value")?(this.labelDirection.set("disabled",!0),this.labelDirection.setValue("horizontal")):this.labelDirection.set("disabled",!1));this.onGridsettingsChanged()},postCreate:function(){this.inherited(arguments);
c.add(this.domNode,"GRGDrafterSettingsContainer GRGDrafterFullWidth");this._handleClickEvents()},_handleClickEvents:function(){this.own(n(this.cellShape,"change",d.hitch(this,function(){"hexagon"===this.cellShape.get("value")?(this.labelDirection.set("disabled",!0),this.labelDirection.setValue("horizontal")):this.labelDirection.set("disabled",!1)})))},_loadOptionsForDropDown:function(a,c){var b=[],h;k.forEach(c,d.hitch(this,function(a){h=this.nls.gridSettings[a].hasOwnProperty("label")?{value:a,label:this.nls.gridSettings[a].label}:
{value:a,label:this.nls.gridSettings[a]};b.push(h)}));a.addOption(b)},_isSettingsChanged:function(){var a=!1;this.selectedGridSettings.cellShape!==this.cellShape.get("value")?a=!0:this.selectedGridSettings.labelStartPosition!==this.labelStartPosition.get("value")?a=!0:this.selectedGridSettings.cellUnits!==this.cellUnits.get("value")?a=!0:this.selectedGridSettings.labelType!==this.labelType.get("value")?a=!0:this.selectedGridSettings.labelTypeWithRefSys!==this.labelTypeWithRefSys.get("value")?a=!0:
this.selectedGridSettings.labelDirection!==this.labelDirection.get("value")?a=!0:this.selectedGridSettings.gridOrigin!==this.gridOrigin.get("value")?a=!0:this.selectedGridSettings.referenceSystem!==this.referenceSystem.get("value")?a=!0:this.selectedGridSettings.gridOutlineColor!==this.gridOutlineColorPicker.getValues().color?a=!0:this.selectedGridSettings.gridOutlineTransparency!==this.gridOutlineColorPicker.getValues().transparency?a=!0:this.selectedGridSettings.gridFillColor!==this.gridFillColorPicker.getValues().color?
a=!0:this.selectedGridSettings.gridFillTransparency!==this.gridFillColorPicker.getValues().transparency?a=!0:this.selectedGridSettings.fontSettings!==this.fontSetting.getConfig()&&(a=!0);return a},onClose:function(){if(this._isSettingsChanged())this.onGridsettingsChanged()},onGridsettingsChanged:function(){this.selectedGridSettings={cellShape:this.cellShape.get("value"),labelStartPosition:this.labelStartPosition.get("value"),cellUnits:this.cellUnits.get("value"),labelType:this.labelType.get("value"),
labelTypeWithRefSys:this.labelTypeWithRefSys.get("value"),labelDirection:this.labelDirection.get("value"),gridOrigin:this.gridOrigin.get("value"),referenceSystem:this.referenceSystem.get("value"),gridOutlineColor:this.gridOutlineColorPicker.getValues().color,gridOutlineTransparency:this.gridOutlineColorPicker.getValues().transparency,gridFillColor:this.gridFillColorPicker.getValues().color,gridFillTransparency:this.gridFillColorPicker.getValues().transparency,fontSettings:d.clone(this.fontSetting.getConfig())};
this.emit("gridSettingsChanged",this.selectedGridSettings)}})})},"widgets/GriddedReferenceGraphic/js/ColorPickerEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/on dojo/query dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/ColorPickerEditor.html dijit/form/HorizontalSlider jimu/dijit/ColorPickerPopup dijit/form/NumberSpinner".split(" "),function(m,k,f,n,a,b,e,g,p,l,r,d){return m([e,g,p],{_defaultColor:"#485566",
templateString:l,nls:null,postCreate:function(){this.colorPicker=new d({color:this._defaultColor,width:this._defaultWidth},this.colorPicker);this.colorPicker.startup();this.slider=new r({name:"slider",value:100,minimum:0,maximum:100,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;"},this.sliderBar);this.slider.startup();this.inherited(arguments)},startup:function(){this.own(n(this.slider,"change",k.hitch(this,function(a){!1===this._isSameVal()&&this.spinner.setValue(a)})));
this.own(n(this.spinner,"change",k.hitch(this,function(a){!1===this._isSameVal()&&100>=a&&this.slider.setValue(a)})));this._stylePolyfill();this.inherited(arguments)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var a=null,c=null;(c=this.colorPicker.getColor())&&c.toHex&&(a=c.toHex());c=this.spinner.getValue()/100;return{color:a,transparency:c}},setValues:function(a){if("object"===typeof a||"string"===typeof a)this.colorPicker.setColor(new f(a.color)),
a.transparency="undefined"===typeof a.transparency?0:100*a.transparency,this.slider.setValue(a.transparency),this.spinner.setValue(a.transparency)},_stylePolyfill:function(){var d=a(".dijitSliderLeftBumper",this.domNode)[0];d&&d.parentNode&&b.setStyle(d.parentNode,"background-color","#24b5cc")}})})},"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),
function(m,k,f,n,a,b,e,g,p,l,r){return m([k,f],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){p.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},
enable:function(){this._ENABLE=!0;a.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;a.addClass(this.domNode,"disable")},isPartOfPopup:function(d){var b=this.tooltipDialog.domNode;return d===b||a.isDescendant(d,b)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},_showTooltipDialog:function(){p.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.around?this.around:
this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){p.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var d=a.create("div");this.tooltipDialog=new g({content:d});a.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var h=new l({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,closeDialogWhenChange:!0},recordUID:this.recordUID,
onChange:n.hitch(this,function(a){a&&(a=new e(a),this.setColor(a),this.onChange(a))})});h.placeAt(d);h.startup();this.own(b(h,"close",n.hitch(this,function(){this._hideTooltipDialog()})));this.own(b(h,"change-style",n.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(b(this.domNode,"click",n.hitch(this,function(a){a.stopPropagation();a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==this._ENABLE&&this._showTooltipDialog()})));this.own(b(document,
"click",n.hitch(this,function(a){this.isPartOfPopup(a.srcElement||a.target)||this._hideTooltipDialog()})));this.picker=h},setColor:function(d){if(d instanceof e){null===this.color&&!0===this.showLabel&&this._changeLabel(d);var b=d.toHex();this.color=d;a.setStyle(this.domNode,"backgroundColor",b);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(b,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},_changeLabel:function(d){a.empty(this.domNode);
a.create("span",{innerHTML:d.toHex(),className:"color-label",style:{color:r.invertColor(d.toHex())}},this.domNode)},onChange:function(a){a&&this.showLabel&&this._changeLabel(a)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(a){this.domNode.title=a},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"widgets/GriddedReferenceGraphic/js/FontSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dojo/_base/array dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/FontSetting.html jimu/dijit/ColorPickerPopup dijit/form/HorizontalSlider ./TransparencyEditor dojo/store/Memory dijit/form/ComboBox jimu/dijit/CheckBox jimu/dijit/ImageChooser".split(" "),
function(m,k,f,n,a,b,e,g,p,l,r,d,h,c){return m([e,g,p,b],{templateString:l,nls:null,_FONTS:null,_MIN_TEXT_SIZE:12,_MAX_TEXT_SIZE:48,_INTERVAL_TEXT_SIZE:2,_DEFAULT_CONFIG:null,postCreate:function(){this.inherited(arguments);this._FONTS="Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";");this._DEFAULT_CONFIG={font:{fontFamily:this._FONTS[0],bold:!1,italic:!1,underline:!1},fontSize:"24",textColor:"#282828",haloSize:1,haloColor:"#FFFFFF",haloOn:!0,labelTransparency:1};
this.config=k.mixin(k.clone(this._DEFAULT_CONFIG),this.config);a.forEach(this._FONTS,k.hitch(this,function(a){this.fontSelect.addOption({value:a,label:a})}));for(var b=new c({}),e=this._MIN_TEXT_SIZE,g=this._MAX_TEXT_SIZE;e<=g;e+=this._INTERVAL_TEXT_SIZE)b.put({id:e,name:e});this.textSizeSelect.store=b;this.textSizeSelect.validator=k.hitch(this,function(){var a=this.textSizeSelect.getValue();return null!==a&&""!==a?!isNaN(a):!1});this.textSizeSlider=new d({name:"slider",value:0,minimum:this._MIN_TEXT_SIZE,
maximum:this._MAX_TEXT_SIZE,discreteValues:this.textSizeSelect.store.data.length+1,intermediateChanges:!0,showButtons:!1,style:"display: inline-block;"},this.sliderBar);this.textSizeSlider.startup();this.textColorPicker=new r({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showCoustomRecord:!0},recordUID:this.recordUID});this.textColorPicker.placeAt(this.textColorBtn);this.textColorPicker.startup();this.labelTransparency=new h({},this.transparencySlider);this.labelTransparency.startup();
b=new c({});e=1;for(g=10;e<=g;e+=1)b.put({id:e,name:e});this.haloSizeSelect.store=b;this.haloSizeSelect.validator=k.hitch(this,function(){var a=this.haloSizeSelect.getValue();return null!==a&&""!==a?!isNaN(a):!1});this.haloColorPicker=new r({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showCoustomRecord:!0}});this.haloColorPicker.placeAt(this.haloColorBtn);this.haloColorPicker.startup();this.own(f(this.fontSelect,"change",k.hitch(this,function(a){if(this.config.font.fontFamily!==
a)this.onSettingChange({font:{fontFamily:a,bold:this.config.font.bold,italic:this.config.font.italic,underline:this.config.font.underline}})})));this._initAppearance();this.own(f(this.bold,"click",k.hitch(this,function(){var a=!n.hasClass(this.bold,"selected");this.fontBtnClickd({bold:a});this.onSettingChange({font:{fontFamily:this.config.font.fontFamily,bold:a,italic:this.config.font.italic,underline:this.config.font.underline}})})));this.own(f(this.italic,"click",k.hitch(this,function(){var a=!n.hasClass(this.italic,
"selected");this.fontBtnClickd({italic:a});this.onSettingChange({font:{fontFamily:this.config.font.fontFamily,bold:this.config.font.bold,italic:a,underline:this.config.font.underline}})})));this.own(f(this.underline,"click",k.hitch(this,function(){var a=!n.hasClass(this.underline,"selected");this.fontBtnClickd({underline:a});this.onSettingChange({font:{fontFamily:this.config.font.fontFamily,bold:this.config.font.bold,italic:this.config.font.italic,underline:a}})})));this.own(f(this.textSizeSelect,
"change",k.hitch(this,function(a){this.config.fontSize!==a&&!1!==this.textSizeSelect.isValid()&&(this.setTextSize(a),this.onSettingChange({fontSize:a}))})));this.own(f(this.textSizeSlider,"change",k.hitch(this,function(a){this.config.fontSize!==a&&(this.setTextSize(Math.round(a)),this.onSettingChange({fontSize:a}))})));this.own(f(this.textColorPicker,"change",k.hitch(this,function(a){if(this.config.textColor!==a)this.onSettingChange({textColor:a.toHex()})})));this.own(this.labelTransparency.watch("transparency",
k.hitch(this,function(){this.onSettingChange({labelTransparency:this.labelTransparency.getValues().transparency})})));this.own(f(this.haloSizeSelect,"change",k.hitch(this,function(a){if(this.config.haloSize!==a&&!1!==this.haloSizeSelect.isValid())this.onSettingChange({haloSize:a})})));this.own(f(this.haloColorPicker,"change",k.hitch(this,function(a){if(this.config.haloColor!==a)this.onSettingChange({haloColor:a.toHex()})})));this.own(f(this.showHalo,"change",k.hitch(this,function(){this.onSettingChange({haloOn:this.showHalo.checked})})))},
startup:function(){this.inherited(arguments);this.setConfig(this.config);this.refresh()},onSettingChange:function(a){this.config=k.mixin(this.config,a);this.onChange(this.config)},onChange:function(a){this.emit("change",a)},refresh:function(){this.onSettingChange({})},isValid:function(){return!1===this.textSizeSelect.isValid()?!1:!0},getConfig:function(){return this.isValid()?this.config:!1},setConfig:function(a){if("undefined"!==a){"undefined"!==typeof a.font&&(this.config.font=a.font,this.config.font.fontFamily&&
this.fontSelect.set("value",this.config.font.fontFamily),this.fontBtnClickd(this.config.font));"undefined"!==typeof a.fontSize&&(this.config.fontSize=a.fontSize,this.setTextSize(this.config.fontSize));if("undefined"===typeof a.textColor||""===a.textColor)a.textColor=this._DEFAULT_CONFIG.textColor;this.config.textColor=a.textColor;if("undefined"===typeof a.labelTransparency||""===a.labelTransparency)a.labelTransparency=this._DEFAULT_CONFIG.labelTransparency;this.config.labelTransparency=a.labelTransparency;
this.labelTransparency.setValues({transparency:this.config.labelTransparency});if("undefined"===typeof a.haloSize||""===a.haloSize)a.haloSize=this._DEFAULT_CONFIG.haloSize;this.config.haloSize=a.haloSize;this.haloSizeSelect.set("value",a.haloSize);if("undefined"===typeof a.haloColor||""===a.haloColor)a.haloColor=this._DEFAULT_CONFIG.haloColor;this.config.haloColor=a.haloColor;n.setStyle(this.textColorPicker.domNode,"backgroundColor",this.config.textColor);this.textColorPicker.picker.refreshRecords();
this.textColorPicker.picker.setColor(this.config.textColor,!1,!0);n.setStyle(this.haloColorPicker.domNode,"backgroundColor",this.config.haloColor);this.haloColorPicker.picker.refreshRecords();this.haloColorPicker.picker.setColor(this.config.haloColor,!1,!0);if("undefined"===typeof a.haloOn||""===a.haloOn)a.haloOn=this._DEFAULT_CONFIG.haloOn;this.showHalo.set("checked",this.config.haloOn)}},setTextSize:function(a){a!==this.textSizeSelect.getValue()&&this.textSizeSelect.set("value",a);a!==this.textSizeSlider.getValue()&&
(a>this._MAX_TEXT_SIZE?a=this._MAX_TEXT_SIZE:a<this._MIN_TEXT_SIZE&&(a=this._MIN_TEXT_SIZE),this.textSizeSlider.set("value",a))},fontBtnClickd:function(a){!0===a.bold?n.addClass(this.bold,"selected"):!1===a.bold&&n.removeClass(this.bold,"selected");!0===a.italic?n.addClass(this.italic,"selected"):!1===a.italic&&n.removeClass(this.italic,"selected");!0===a.underline?n.addClass(this.underline,"selected"):!1===a.underline&&n.removeClass(this.underline,"selected")},_initAppearance:function(){this.appearance&&
(!1===this.appearance.bold&&n.addClass(this.bold,"hide"),!1===this.appearance.italic&&n.addClass(this.italic,"hide"),!1===this.appearance.underline&&n.addClass(this.underline,"hide"))}})})},"widgets/GriddedReferenceGraphic/js/TransparencyEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/query dojo/Stateful dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/TransparencyEditor.html dijit/form/HorizontalSlider dijit/form/NumberSpinner".split(" "),
function(m,k,f,n,a,b,e,g,p,l,r){return m([a,e,g,p],{templateString:l,transparency:1,postCreate:function(){this.slider=new r({name:"slider",value:0,minimum:0,maximum:100,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;"},this.sliderBar);this.slider.startup();this.inherited(arguments)},startup:function(){this.own(f(this.slider,"change",k.hitch(this,function(a){!1===this._isSameVal()&&(this.spinner.setValue(a),this._set("transparency",a/100))})));this.own(f(this.spinner,
"change",k.hitch(this,function(a){!1===this._isSameVal()&&100>=a&&(this.slider.setValue(a),this._set("transparency",a/100))})));this._stylePolyfill();this.inherited(arguments)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var a=null,a=this.spinner.getValue()/100;return{transparency:a}},setValues:function(a){if("object"===typeof a||"string"===typeof a)a.transparency="undefined"===typeof a.transparency?0:100*a.transparency,this.slider.setValue(a.transparency),
this.spinner.setValue(a.transparency)},_stylePolyfill:function(){var a=n(".dijitSliderLeftBumper",this.domNode)[0];a&&a.parentNode&&b.setStyle(a.parentNode,"background-color","#24b5cc")}})})},"widgets/GriddedReferenceGraphic/js/CoordinateInput":function(){define(["dojo/_base/declare","dijit/form/ValidationTextBox","./Coordinate"],function(m,k,f){return m("test",k,{required:!0,inputCoordinate:null,invalidMessage:"Blah Blah Blah",validateOnInput:!0,_validateOnInputSetter:function(f){this.validateOnInput=
"true"===f},clear:function(){this.set("validateOnInput",!0);this.set("value","");this.inputCoordinate.coordinateEsriGeometry=null},constructor:function(k){m.safeMixin(this,k);this.inherited(arguments);this.inputCoordinate=new f({nls:this.nls,appConfig:arguments[0].appConfig})},postMixinProperties:function(){},validator:function(f){if(!this.validateOnInput)return!0;this.inputCoordinate.set("inputString",f);this.set("invalidMessage",this.inputCoordinate.message);this.set("promptMessage",this.inputCoordinate.message);
return!0}})})},"widgets/GriddedReferenceGraphic/js/Coordinate":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/Stateful dojo/Deferred esri/geometry/Point esri/SpatialReference esri/geometry/webMercatorUtils jimu/dijit/Message ./util ./dialogConfirm ./ConfirmNotation".split(" "),function(m,k,f,n,a,b,e,g,p,l,r,d){return m([n],{formatPrefix:!1,_formatPrefixSetter:function(a){this.formatPrefix=a},inputString:null,_inputStringSetter:function(a){this.inputString=a},formatString:"YN XE",
_formatStringSetter:function(a){this.formatString=a},inputType:"UNKNOWN",formatType:"DD",_formatTypeSetter:function(a){this.formatType=a;this.getFormattedValue()},outputString:"",coordinateEsriGeometry:null,_coordinateEsriGeometrySetter:function(a){null!==a&&(this.coordinateEsriGeometry=a=4326!==a.spatialReference.wkid?g.webMercatorToGeographic(a):a,this.getFormattedValue())},constructor:function(a){m.safeMixin(this,a);this.util=new l(a)},getInputType:function(){this.inputTypeDef=new a;var h=this.util.getCleanInput(this.inputString);
this.util.getCoordinateType(h).then(f.hitch(this,function(a){if(a)if(1===a.length){var c=this.processCoordTextInput(h,a[0],!1);this.util.getXYNotation(c,a[0].conversionType).then(f.hitch(this,function(c){0>=c.length||!c[0][0]&&0!==c[0][0]?(this.hasError=!0,this.valid=!1):(this.valid=this.isManual=!0,this.formatType=a[0].conversionType,this.inputType=a[0].conversionType,this.coordinateEsriGeometry=new b(c[0][0],c[0][1],new e({wkid:4326})));this.message="Invalid Coordinate";this.inputTypeDef.resolve(this)}));
f.hitch(this,function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message="Invalid Coordinate";this.inputTypeDef.resolve(this)})}else{var g=new r({nls:this.nls,title:this.nls.comfirmInputNotation,content:new d(a,{nls:this.nls}),style:"width: 400px",hasSkipCheckBox:!1});g.show().then(f.hitch(this,function(){var c=k.filter(a,function(a){return a.name===g.content.comboOptions.get("value")}),d=this.processCoordTextInput(h,c[0],!1);this.util.getXYNotation(d,c[0].conversionType).then(f.hitch(this,
function(c){0>=c.length||!c[0][0]&&0!==c[0][0]?(this.hasError=!0,this.valid=!1,this.message="Invalid Coordinate"):(this.valid=this.isManual=!0,this.inputType=a[0].conversionType,this.formatType=a[0].conversionType,this.coordinateEsriGeometry=new b(c[0][0],c[0][1],new e({wkid:4326})),this.message="");this.inputTypeDef.resolve(this)}));f.hitch(this,function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message="Invalid Coordinate";this.inputTypeDef.resolve(this)})},function(){this.inputTypeDef.reject()}))}else this.hasError=
!0,this.valid=!1,this.inputType="UNKNOWN",this.message="Invalid Coordinate",this.inputTypeDef.resolve(this)}));return this.inputTypeDef.promise},processCoordTextInput:function(a,c,d){var b=c.pattern.exec(a),h,e,g,f,k,l,q,r,n,m,v=!1,w=c.name;switch(c.name){case "DD":h=b[2];e=b[7];g=b[10];f=b[16];k=b[3].replace(/[,:]/,".");l=b[11].replace(/[,:]/,".");w="DD";break;case "DDrev":h=b[11];e=b[16];g=b[2];f=b[8];k=b[12].replace(/[,:]/,".");l=b[3].replace(/[,:]/,".");w="DD";break;case "DDM":h=b[2];e=b[7];g=
b[10];f=b[15];k=b[3];q=b[4].replace(/[,:]/,".");l=b[11];r=b[12].replace(/[,:]/,".");w="DDM";break;case "DDMrev":h=b[10];e=b[15];g=b[2];f=b[7];k=b[11];q=b[12].replace(/[,:]/,".");l=b[3];r=b[4].replace(/[,:]/,".");w="DDM";break;case "DMS":h=b[2];e=b[8];g=b[11];f=b[17];k=b[3];q=b[4];n=b[5].replace(/[,:]/,".");l=b[12];r=b[13];m=b[14].replace(/[,:]/,".");w="DMS";break;case "DMSrev":h=b[11],e=b[17],g=b[2],f=b[8],k=b[12],q=b[13],n=b[14].replace(/[,:]/,"."),l=b[3],r=b[4],m=b[5].replace(/[,:]/,"."),w="DMS"}h&&
e?(v=!0,h=(new RegExp(/[Ss-]/)).test(h)?"-":"+"):h=h&&(new RegExp(/[Ss-]/)).test(h)?"-":e&&(new RegExp(/[Ss-]/)).test(e)?"-":"+";g&&f?(v=!0,g=(new RegExp(/[Ww-]/)).test(g)?"-":"+"):g=g&&(new RegExp(/[Ww-]/)).test(g)?"-":f&&(new RegExp(/[Ww-]/)).test(f)?"-":"+";v&&(d||new p({message:this.nls.prefixSuffixError}));switch(w){case "DD":a=h+k+","+g+l;break;case "DDM":a=h+k+" "+q+","+g+l+" "+r;break;case "DMS":a=h+k+" "+q+" "+n+","+g+l+" "+r+" "+m}return a},getInputTypeSync:function(){return null!==this.util.getCoordinateType(this.inputString)},
getFormattedValue:function(){this.coordinateEsriGeometry&&this.util.getCoordValues({x:this.coordinateEsriGeometry.x,y:this.coordinateEsriGeometry.y},this.formatType,6).then(f.hitch(this,function(a){this.set("outputString",this.getCoordUI(a))}))},getCoordUI:function(a){var c=this.get("formatPrefix"),b;switch(this.formatType){case "DD":a=this.util.getFormattedDDStr(a,this.formatString,c);b=a.formatResult;break;case "DDM":a=this.util.getFormattedDDMStr(a,this.formatString,c);b=a.formatResult;break;case "DMS":a=
this.util.getFormattedDMSStr(a,this.formatString,c);b=a.formatResult;break;case "USNG":a=this.util.getFormattedUSNGStr(a,this.formatString,c);b=a.formatResult;break;case "MGRS":a=this.util.getFormattedMGRSStr(a,this.formatString,c);b=a.formatResult;break;case "GARS":a=this.util.getFormattedGARSStr(a,this.formatString,c);b=a.formatResult;break;case "GEOREF":a=this.util.getFormattedGEOREFStr(a,this.formatString,c);b=a.formatResult;break;case "UTM":a=this.util.getFormattedUTMStr(a,this.formatString,
c);b=a.formatResult;break;case "UTM (H)":a=this.util.getFormattedUTMHStr(a,this.formatString,c),b=a.formatResult}return b}})})},"widgets/GriddedReferenceGraphic/js/util":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","esri/tasks/GeometryService"],function(m,k,f,n){return m(null,{constructor:function(a){this.appConfig=a.appConfig;this.nls=a.nls;(a=this.appConfig.geometryService)||(a="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geomService=
new n(a)},getCleanInput:function(a){a=a.replace(/\n/g,"");a=a.replace(/\s+/g," ").trim();return a.toUpperCase()},getCoordValues:function(a,b,e){var g=new f;a={sr:4326,coordinates:[[a.x,a.y]],conversionType:b.name?b.name:b,numOfDigits:e||6,rounding:!0,addSpaces:!1};switch(b){case "DD":a.numOfDigits=6;break;case "USNG":a.numOfDigits=5;break;case "MGRS":a.conversionMode="mgrsDefault";a.numOfDigits=5;break;case "UTM (H)":a.conversionType="utm";a.conversionMode="utmNorthSouth";a.addSpaces=!0;break;case "UTM":a.conversionType=
"utm";a.conversionMode="utmDefault";a.addSpaces=!0;break;case "GARS":a.conversionMode="garsDefault"}this.geomService.toGeoCoordinateString(a).then(function(a){g.resolve(a)},function(){g.resolve(null)});return g.promise},getXYNotation:function(a,b){var e=new f,g;g=b.name?b.name:b;b={sr:4326,conversionType:g,strings:[]};switch(g){case "DD":case "DDM":case "DMS":b.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");b.strings.push(a);break;case "USNG":b.strings.push(a);b.addSpaces=
"false";break;case "MGRS":b.conversionMode="mgrsNewStyle";b.strings.push(a);b.addSpaces="false";break;case "UTM (H)":b.conversionType="utm";b.conversionMode="utmNorthSouth";b.strings.push(a);break;case "UTM":b.conversionType="utm";b.conversionMode="utmDefault";b.strings.push(a);break;case "GARS":b.conversionMode="garsCenter";b.strings.push(a);break;case "GEOREF":b.strings.push(a)}this.geomService.fromGeoCoordinateString(b).then(function(a){e.resolve(a)},function(){e.resolve(null)});return e.promise},
getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,
/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,
/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(a){return a.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),
notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM (H)"}]},getCoordinateType:function(a){var b=this.getCleanInput(a);a=new f;var e=this.getNotations(),b=k.filter(e,function(a){return a.pattern.test(this.v)},{v:b});0<b.length?a.resolve(b):a.resolve(null);return a.promise},getFormattedDDStr:function(a,
b,e){var g={};g.sourceValue=a;g.sourceFormatString=b;a=a[0].split(/[ ,]+/);g.latdeg=a[0].replace(/[nNsS]/,"");g.londeg=a[1].replace(/[eEwW]/,"");e&&(g.latdeg="N"===a[0].slice(-1)?"+"+g.latdeg:"-"+g.latdeg,g.londeg="W"===a[1].slice(-1)?"-"+g.londeg:"+"+g.londeg);b=b.replace(/X/,g.londeg);b=b.replace(/[eEwW]/,a[1].slice(-1));b=b.replace(/[nNsS]/,a[0].slice(-1));b=b.replace(/Y/,g.latdeg);g.formatResult=b;return g},getFormattedDDMStr:function(a,b,e){var g={};g.sourceValue=a;g.sourceFormatString=b;g.parts=
a[0].split(/[ ,]+/);g.latdeg=g.parts[0];g.latmin=g.parts[1].replace(/[nNsS]/,"");g.londeg=g.parts[2];g.lonmin=g.parts[3].replace(/[eEwW]/,"");e&&(g.latdeg="N"===g.parts[1].slice(-1)?"+"+g.latdeg:"-"+g.latdeg,g.londeg="W"===g.parts[3].slice(-1)?"-"+g.londeg:"+"+g.londeg);a=b.replace(/[EeWw]/,g.parts[3].slice(-1));a=a.replace(/Y/,g.lonmin);a=a.replace(/X/,g.londeg);a=a.replace(/[NnSs]/,g.parts[1].slice(-1));a=a.replace(/B/,g.latmin);a=a.replace(/A/,g.latdeg);g.formatResult=a;return g},getFormattedDMSStr:function(a,
b,e){var g={};g.sourceValue=a;g.sourceFormatString=b;g.parts=a[0].split(/[ ,]+/);g.latdeg=g.parts[0];g.latmin=g.parts[1];g.latsec=g.parts[2].replace(/[NnSs]/,"");g.londeg=g.parts[3];g.lonmin=g.parts[4];g.lonsec=g.parts[5].replace(/[EWew]/,"");e&&(g.latdeg="N"===g.parts[2].slice(-1)?"+"+g.latdeg:"-"+g.latdeg,g.londeg="W"===g.parts[5].slice(-1)?"-"+g.londeg:"+"+g.londeg);a=b.replace(/A/,g.latdeg);a=a.replace(/B/,g.latmin);a=a.replace(/C/,g.latsec);a=a.replace(/X/,g.londeg);a=a.replace(/Y/,g.lonmin);
a=a.replace(/Z/,g.lonsec);a=a.replace(/[NnSs]/,g.parts[2].slice(-1));a=a.replace(/[EeWw]/,g.parts[5].slice(-1));g.formatResult=a;return g},getFormattedUSNGStr:function(a,b){var e={};e.sourceValue=a;e.sourceFormatString=b;a[0].match(/^[ABYZ]/)?e.gzd=a[0].match(/[ABYZ]/)[0].trim():e.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();e.grdsq=a[0].replace(e.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();e.easting=a[0].replace(e.gzd+e.grdsq,"").match(/^\d{1,5}/)[0].trim();e.northing=a[0].replace(e.gzd+e.grdsq,
"").match(/\d{1,5}$/)[0].trim();a=b.replace(/Y/,e.northing);a=a.replace(/X/,e.easting);a=a.replace(/S/,e.grdsq);a=a.replace(/Z/,e.gzd);e.formatResult=a;return e},getFormattedMGRSStr:function(a,b){var e={};e.sourceValue=a;e.sourceFormatString=b;a[0].match(/^[ABYZ]/)?e.gzd=a[0].match(/[ABYZ]/)[0].trim():e.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();e.grdsq=a[0].replace(e.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();e.easting=a[0].replace(e.gzd+e.grdsq,"").match(/^\d{1,5}/)[0].trim();e.northing=a[0].replace(e.gzd+
e.grdsq,"").match(/\d{1,5}$/)[0].trim();a=b.replace(/Y/,e.northing);a=a.replace(/X/,e.easting);a=a.replace(/S/,e.grdsq);a=a.replace(/Z/,e.gzd);e.formatResult=a;return e},getFormattedGARSStr:function(a,b){var e={};e.sourceValue=a;e.sourceFormatString=b;e.lon=a[0].match(/\d{3}/);e.lat=a[0].match(/[a-zA-Z]{2}/);a=a[0].match(/\d*$/);e.quadrant=a[0][0];e.key=a[0][1];b=b.replace(/K/,e.key);b=b.replace(/Q/,e.quadrant);b=b.replace(/Y/,e.lat);b=b.replace(/X/,e.lon);e.formatResult=b;return e},getFormattedGEOREFStr:function(a,
b){var e={};e.sourceValue=a;e.sourceFormatString=b;e.lon=a[0].match(/[a-zA-Z]{1}/)[0].trim();e.lat=a[0].replace(e.lon,"").match(/[a-zA-Z]{1}/)[0].trim();e.quadrant15lon=a[0].replace(e.lon+e.lat,"").match(/[a-zA-Z]{1}/)[0].trim();e.quadrant15lat=a[0].replace(e.lon+e.lat+e.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();a=a[0].replace(e.lon+e.lat+e.quadrant15lon+e.quadrant15lat,"");e.quadrant1lon=a.substr(0,a.length/2);e.quadrant1lat=a.substr(a.length/2,a.length);b=b.replace(/Y/,e.quadrant1lat);b=
b.replace(/X/,e.quadrant1lon);b=b.replace(/D/,e.quadrant15lat);b=b.replace(/C/,e.quadrant15lon);b=b.replace(/B/,e.lat);b=b.replace(/A/,e.lon);e.formatResult=b;return e},getFormattedUTMStr:function(a,b){var e={};e.sourceValue=a;e.sourceFormatString=b;e.parts=a[0].split(/[ ,]+/);e.zone=e.parts[0].replace(/[A-Z]/,"");e.bandLetter=e.parts[0].slice(-1);e.easting=e.parts[1];e.westing=e.parts[2];a=b.replace(/Y/,e.westing);a=a.replace(/X/,e.easting);a=a.replace(/B/,e.bandLetter);a=a.replace(/Z/,e.zone);e.formatResult=
a;return e},getFormattedUTMHStr:function(a,b){var e={};e.sourceValue=a;e.sourceFormatString=b;e.parts=a[0].split(/[ ,]+/);e.zone=e.parts[0].replace(/[A-Z]/,"");e.hemisphere=e.parts[0].slice(-1);e.easting=e.parts[1];e.westing=e.parts[2];a=b.replace(/Y/,e.westing);a=a.replace(/X/,e.easting);a=a.replace(/H/,e.hemisphere);a=a.replace(/Z/,e.zone);e.formatResult=a;return e},convertMetersToUnits:function(a,b){var e=0;switch(b.toLowerCase()){case "meters":e=a;break;case "feet":e=3.28084*a;break;case "kilometers":e=
.001*a;break;case "miles":e=6.21371E-4*a;break;case "nautical-miles":e=5.39957E-4*a;break;case "yards":e=1.09361*a}return e},convertToMeters:function(a,b){var e=a;switch(b){case "meters":e=a;break;case "feet":e=.3048*a;break;case "kilometers":e=1E3*a;break;case "miles":e=1609.34*a;break;case "nautical-miles":e=1852.001376036*a;break;case "yards":e=.9144*a}return e}})})},"widgets/GriddedReferenceGraphic/js/dialogConfirm":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Deferred dojo/dom-construct dijit/Dialog dijit/form/Button dijit/form/CheckBox".split(" "),
function(m,k,f,n,a,b,e){return k(a,{okButton:null,cancelButton:null,skipCheckBox:null,hasOkButton:!0,hasCancelButton:!0,hasSkipCheckBox:!0,hasUnderlay:!0,dfd:null,buttonNode:null,constructor:function(a){m.mixin(this,a)},postCreate:function(){this.inherited("postCreate",arguments);var a,f=!1;a=n.create("div",{className:"dijitDialogPaneContent dialogConfirm"},this.domNode,"last");this.hasSkipCheckBox&&(this.skipCheckBox=new e({checked:!1},n.create("div")),a.appendChild(this.skipCheckBox.domNode),n.create("label",
{"for":this.skipCheckBox.id,innerHTML:""},a));this.hasOkButton&&(this.okButton=new b({label:"OK",onClick:m.hitch(this,function(){f=this.hasSkipCheckBox?this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.resolve(f)})},n.create("div")),a.appendChild(this.okButton.domNode));this.hasCancelButton&&(this.cancelButton=new b({label:"Cancel",onClick:m.hitch(this,function(){f=this.hasSkipCheckBox?this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.cancel(f)})},n.create("div")),a.appendChild(this.cancelButton.domNode));
this.buttonNode=a},show:function(){this.inherited("show",arguments);this.hasUnderlay||n.destroy(this.id+"_underlay");return this.dfd=new f}})})},"widgets/GriddedReferenceGraphic/js/ConfirmNotation":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!../templates/ConfirmNotation.html"],function(m,k,f,n,a){return m([k,f,n],{templateString:a,numberOfInputs:0,selectOptions:{},constructor:function(a,e){m.safeMixin(this,e);this.numberOfInputs=
a.length;this.selectOptions=a},postCreate:function(){this.label1.innerHTML=this.numberOfInputs+" "+this.nls.notationsMatch;for(var a=0;a<this.selectOptions.length;a++)this.comboOptions.addOption({value:this.selectOptions[a].name,label:this.selectOptions[a].notationType})}})})},"widgets/GriddedReferenceGraphic/js/drawGRG":function(){define("esri/geometry/Point esri/geometry/Polygon esri/geometry/geometryEngine esri/graphic esri/geometry/webMercatorUtils esri/SpatialReference esri/geometry/Circle esri/request dojo/json ./geometryUtils".split(" "),
function(m,k,f,n,a,b,e,g,p,l){var r={createGRG:function(d,h,c,g,t,u,p,B,G,E,I,H,D){var q,y,v,w,A,C,J,N,O,K,W,Z=[],P=0,R=0,Q=g/2/Math.cos(30*Math.PI/180),aa,V=d;switch(p){case "upperLeft":"horizontal"===G?(q=h-1,y=-1,"numeric"!==B?v=0:(v=(h-1)*d,"hexagon"===E&&(v+=Math.floor(h/2)))):(q=-1,y=h-1,"numeric"!==B&&(v=h));break;case "upperRight":"horizontal"===G?(q=h-1,y=d,"numeric"!==B?v=d+1:(v=h*d+1,"hexagon"===E&&(v+=Math.floor(h/2)))):(v="numeric"!==B?h:h*(d+1),q=d,y=h-1);break;case "lowerRight":"horizontal"===
G?(q=0,y=d,v=d+1):(q=d,y=0,v=1);break;case "lowerLeft":"horizontal"===G?(v=q=0,y=-1):(q=-1,v=1,y=0)}var S=d*g/2,T;T="hexagon"===E?1===h%2?((h-1)/2*3*Q+Q)/2:(h/2*3*Q-Q/2)/2:h*t/2;for(var L=1;L<=h;L++){for(var M=1;M<=d;M++){if(H){var F=new k;if(1===L&&1===M)switch(102100===c.spatialReference.wkid&&(c=a.webMercatorToGeographic(c)),I){case "center":w=l.getDestinationPoint(c,180+u,T);w=l.getDestinationPoint(w,270+u,S);break;case "upperLeft":w=l.getDestinationPoint(c,180+u,2*T);break;case "upperRight":w=
l.getDestinationPoint(c,180+u,2*T);w=l.getDestinationPoint(w,270+u,2*S);break;case "lowerRight":w=l.getDestinationPoint(c,270+u,2*S);break;case "lowerLeft":w=c}"default"===E?(C=l.getDestinationPoint(w,0+u,t),J=l.getDestinationPoint(C,90+u,g),A=l.getDestinationPoint(J,180+u,t),F.addRing([[w.x,w.y],[C.x,C.y],[J.x,J.y],[A.x,A.y]]),w=A):(A=w,N=l.getDestinationPoint(A,0+u,Q),O=l.getDestinationPoint(N,60+u,Q),J=l.getDestinationPoint(O,120+u,Q),K=l.getDestinationPoint(J,180+u,Q),W=l.getDestinationPoint(K,
240+u,Q),F.addRing([[A.x,A.y],[N.x,N.y],[O.x,O.y],[J.x,J.y],[K.x,K.y],[W.x,W.y]]),w=l.getDestinationPoint(w,90+u,g));F=f.simplify(F);4326!==D.spatialReference.wkid&&(F=a.geographicToWebMercator(F));F=new n(F);1===M&&(aa="hexagon"===E?V===d?l.getDestinationPoint(N,300+u,Q):O:C)}else{F=new k(new b({wkid:102100}));4326===c.spatialReference.wkid&&(c=a.geographicToWebMercator(c));switch(I){case "center":P=c.x-S;R=c.y-T;break;case "upperLeft":P=c.x;R=c.y-2*T;break;case "upperRight":P=c.x-2*S;R=c.y-2*T;
break;case "lowerRight":P=c.x-2*S;R=c.y;break;case "lowerLeft":P=c.x,R=c.y}"default"===E?F.addRing([[P+(M-1)*g,R+(L-1)*t],[P+(M-1)*g,R+L*t],[P+M*g,R+L*t],[P+M*g,R+(L-1)*t],[P+(M-1)*g,R+(L-1)*t]]):(V===d?P=P+(M-1)*g+g/2:P+=(M-1)*g,R=R+Q+1.5*(L-1)*Q,A=new m([P,R],new b({wkid:102100})),J=new e(A,{radius:Q,numberOfPoints:6}),A=f.rotate(J,90,A),F.addRing(A.rings[0]));F=f.rotate(F,-1*u,c);102100!==D.spatialReference.wkid&&(F=a.webMercatorToGeographic(F));F=new n(F)}switch(p){case "upperLeft":"horizontal"===
G?(y+=1,v+=1):(q+=1,"numeric"===B&&(v=h*M-(L-1)));break;case "lowerLeft":"horizontal"===G?(y+=1,v+=1):(q+=1,"numeric"===B&&(v=h*(M-1)+L));break;case "upperRight":"horizontal"===G?(--v,--y):(--q,"numeric"===B&&(v-=d));break;case "lowerRight":"horizontal"===G?(--v,--y):(--q,"numeric"===B&&(v=h*(d-M)+L))}Z.push(r.addGraphicLabel(F,B,v,q,y))}w=aa;"hexagon"===E&&(V===d?d++:d--);switch(p){case "upperLeft":"horizontal"===G?(--q,v="numeric"!==B?0:"hexagon"===E?v-2*V-1:v-2*d,y=-1):(q=-1,y=h-(L+1),"numeric"!==
B&&(v=h-L));break;case "upperRight":"horizontal"===G?(--q,"numeric"!==B&&(v=d+1),y=d):(v="numeric"!==B?v-1:h*(d+1)-L,q=d,--y);break;case "lowerRight":"horizontal"===G?(q+=1,v="numeric"!==B?d+1:"hexagon"===E?v+2*V+1:v+2*d,y=d):(q=d,y+=1,v="numeric"!==B?v+1:d*L);break;case "lowerLeft":"horizontal"===G?(q+=1,"numeric"!==B&&(v=0),y=-1):(q=-1,"numeric"!==B&&(v+=1),y=L)}}return Z},convertNumberToLetters:function(a){for(var b="";0<=a;)b=String.fromCharCode(a%26+65)+b,a=Math.floor(a/26)-1;return b},checkGridSize:function(a,
b){return 2E3>a*b},getFeatureServiceParams:function(a,b){return{name:a,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"GRG",description:"",copyrightText:"",spatialReference:{wkid:102100},initialExtent:{xmin:b.extent.xmin,ymin:b.extent.ymin,xmax:b.extent.xmax,ymax:b.extent.ymax,spatialReference:{wkid:102100}},allowGeometryUpdates:!0,units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",
xssInputRule:"rejectInvalid"}}},getLayerParams:function(a,b,c,e){return{layers:[{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:0,name:a,type:"Feature Layer",displayField:"",description:"A GRG (Gridded Reference Graphic) is a grid overlay used for a commonreference point in many situations - from cordon and search operations to securityfor presidential inaugurations.",tags:"GRG",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,
allowOthersToDelete:!1,allowOthersToUpdate:!1},relationships:[],isDataVersioned:!1,supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,
supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},useStandardizedQueries:!1,geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,extent:{xmin:b.extent.xmin,ymin:b.extent.ymin,xmax:b.extent.xmax,ymax:b.extent.ymax,spatialReference:{wkid:102100}},drawingInfo:{renderer:{type:"simple",symbol:e},transparency:0,labelingInfo:[{labelExpression:"[grid]",labelExpressionInfo:{value:"{grid}"},format:null,fieldInfos:null,useCodedValues:!1,maxScale:0,minScale:0,where:null,sizeInfo:null,labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",
symbol:c}]},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!1,editable:!1,domain:null,defaultValue:null},{name:"grid",type:"esriFieldTypeString",alias:"grid",actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256}],indexes:[],
types:[],templates:[{name:"New Feature",description:"",drawingTool:"esriFeatureEditToolPolygon",prototype:{attributes:{grid:""}}}],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,capabilities:"Query,Editing,Create,Update,Delete"}]}},isNameAvailable:function(a,b,c){return g({url:a,content:{name:c,type:"Feature Service",token:b,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},
createFeatureService:function(a,b,c){return g({url:a,content:{f:"json",token:b,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:p.stringify(c),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},addDefinitionToService:function(a,b,c){return g({url:a,content:{token:b,addToDefinition:p.stringify(c),f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},labelReferenceGrid:function(a,b,c,e){for(var d=
-1,h=1,g,k=!0,l=null,q=[],p;0<a.length;)if(k){d++;"alphaNumeric"===b?h=1:"alphaAlpha"===b&&(g=0);var H=f.union(a);p=H.getExtent();var D;switch(c){case "lowerLeft":D=f.nearestCoordinate(H,new m(p.xmin,p.ymin,p.spatialReference));break;case "lowerRight":D=f.nearestCoordinate(H,new m(p.xmax,p.ymin,p.spatialReference));break;case "upperLeft":D=f.nearestCoordinate(H,new m(p.xmin,p.ymax,p.spatialReference));break;case "upperRight":D=f.nearestCoordinate(H,new m(p.xmax,p.ymax,p.spatialReference))}for(p=0;p<
a.length;p++)if(f.touches(a[p],D.coordinate)){l=a[p];q.push(r.addGraphicLabel(new n(a[p]),b,h,d,g));h++;g++;k=a.indexOf(a[p]);a.splice(k,1);k=!1;break}}else{k=!0;p=l.getExtent();var x;switch(c){case "lowerLeft":x=f.nearestCoordinate(l,new m(p.xmax,p.ymin,p.spatialReference));break;case "lowerRight":x=f.nearestCoordinate(l,new m(p.xmin,p.ymin,p.spatialReference));break;case "upperLeft":x=f.nearestCoordinate(l,new m(p.xmax,p.ymax,p.spatialReference));break;case "upperRight":x=f.nearestCoordinate(l,
new m(p.xmin,p.ymax,p.spatialReference))}for(H=0;H<a.length;H++){p=a[H].getExtent();var z;switch(c){case "lowerLeft":z=f.nearestCoordinate(a[H],new m(p.xmin,p.ymin,p.spatialReference));break;case "lowerRight":z=f.nearestCoordinate(a[H],new m(p.xmax,p.ymin,p.spatialReference));break;case "upperLeft":z=f.nearestCoordinate(a[H],new m(p.xmin,p.ymax,p.spatialReference));break;case "upperRight":z=f.nearestCoordinate(a[H],new m(p.xmax,p.ymax,p.spatialReference))}p=f.buffer(z.coordinate,"UTM"===e?1E4:e/5,
9001);if(f.contains(p,x.coordinate)){l=a[H];q.push(r.addGraphicLabel(new n(a[H]),b,h,d,g));h++;g++;k=a.indexOf(a[H]);a.splice(k,1);k=!1;break}}}return q},addGraphicLabel:function(a,b,c,e,g){e=r.convertNumberToLetters(e);g=r.convertNumberToLetters(g);var d={};switch(b){case "alphaNumeric":d.grid=e.toString()+c.toString();break;case "alphaAlpha":d.grid=e.toString()+"-"+g.toString();break;case "numeric":d.grid=c.toString()}a.setAttributes(d);return a},checkPolarRegion:function(a){var b=new k({rings:[[[-180,
84],[-180,90],[180,90],[180,84],[-180,84]],[[-180,-90],[-180,-80],[180,-80],[180,-90],[-180,-90]]],spatialReference:{wkid:4326}});return f.intersects(a,b)}};return r})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(m,k,f,n,a,b,e,g,p,l){m=m(b,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,
esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(b,d){b.center?d=b:(d=d||{},d.center=b);this.center=k.isArray(d.center)?new a(d.center[0],d.center[1]):d.center;this.radius=d.radius||1E3;this.radiusUnit=d.radiusUnit||l.METERS;this.geodesic=!0===d.geodesic?!0:!1;this.numberOfPoints=d.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=
[];this._ring=0;var a=this.radius*this._unitToMeters[this.radiusUnit],b=this._srType(this.center.spatialReference);if(this.geodesic){var e;switch(b){case "webMercator":e=g.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":e=this.center}a=this._createGeodesicCircle(e,a,this.numberOfPoints,e.spatialReference);"webMercator"===b&&(a=g.geographicToWebMercator(a))}else{var c;
"webMercator"===b||"projected"===b?c=a/this._convert2Meters(1,this.center.spatialReference):"geographic"===b&&(c=a/this._unitToMeters.esriDecimalDegrees);a=this._createPlanarCircle(this.center,c,this.numberOfPoints)}this.spatialReference=a.spatialReference;this.addRing(a.rings[0]);this.verifySR()},_createGeodesicCircle:function(a,d,h,c){for(var g=0,f=Math.PI/180,k=[],l;g<2*Math.PI;)l=e._directGeodeticSolver(a.y*f,a.x*f,g,d,c),k.push([l.x,l.y]),g+=Math.PI/(h/2);k.push(k[0]);return new b(k)},_createPlanarCircle:function(a,
d,e){for(var c=0,h=[],g,f;c<2*Math.PI;)g=a.x+Math.cos(c)*d,f=a.y+Math.sin(c)*d,h.push([g,f]),c+=Math.PI/(e/2);h.push(h[0]);a=new b(a.spatialReference);a.addRing(h);return a},_srType:function(a){return a.isWebMercator()?"webMercator":null!=p[a.wkid]||a.wkt&&0===a.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(a,b){if(null!=p[b.wkid])b=p.values[p[b.wkid]];else{b=b.wkt;var d=b.lastIndexOf(",")+1,c=b.lastIndexOf("]]");b=parseFloat(b.substring(d,c))}return a*b}});f("extend-esri")&&
k.setObject("geometry.Circle",m,n);return m})},"widgets/GriddedReferenceGraphic/js/geometryUtils":function(){define("esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/geometry/webMercatorUtils dojo/Deferred dojo/_base/array dojo/_base/lang esri/geometry/geometryEngine esri/SpatialReference esri/geometry/scaleUtils".split(" "),function(m,k,f,n,a,b,e,g,p,l){var r={getProjectedGeometry:function(b,e,c){var d,h;d=new a;n.canProject(b,e)?(h=n.project(b,e),d.resolve(h)):c.project([b],
e,function(a){h=a[0];d.resolve(h)});return d.promise},getDestinationPoint:function(a,b,c){var d=a.x*Math.PI/180,e=b*Math.PI/180;b=Math.sin(e);var e=Math.cos(e),h=.9966471893352243*Math.tan(a.y*Math.PI/180);a=1/Math.sqrt(1+h*h);var g=h*a,f=Math.atan2(h,e),h=a*b,k=1-h*h,l=2.7233160610984375E11*k/4.040829998465916E13,n=1+l/16384*(4096+l*(-768+l*(320-175*l))),r=l/1024*(256+l*(-128+l*(74-47*l))),D,x,z,v=c/(6356752.314245*n),w,A=0;do l=Math.cos(2*f+v),D=Math.sin(v),x=Math.cos(v),z=r*D*(l+r/4*(x*(-1+2*l*
l)-r/6*l*(-3+4*D*D)*(-3+4*l*l))),w=v,v=c/(6356752.314245*n)+z;while(1E-12<Math.abs(v-w)&&200>++A);if(200<=A)return null;c=g*D-a*x*e;c=Math.atan2(g*x+a*D*e,.9966471893352243*Math.sqrt(h*h+c*c));k=2.0955066654848088E-4*k*(4+.003352810664775694*(4-3*k));d=(d+(Math.atan2(D*b,a*x-g*D*e)-.003352810664775694*(1-k)*h*(v+k*D*(l+k*x*(-1+2*l*l))))+3*Math.PI)%(2*Math.PI)-Math.PI;c=180*c/Math.PI;d=180*d/Math.PI;return new m(d,c,new p(4326))},getInverseCalculations:function(a,b){var c=b.x*Math.PI/180-a.x*Math.PI/
180,d=.9966471893352243*Math.tan(a.y*Math.PI/180);a=1/Math.sqrt(1+d*d);var d=d*a,e=.9966471893352243*Math.tan(b.y*Math.PI/180);b=1/Math.sqrt(1+e*e);var e=e*b,h,g,f,k,l,p,n,r,m,z=c,v,w=0;do{h=Math.sin(z);g=Math.cos(z);f=b*h*b*h+(a*e-d*b*g)*(a*e-d*b*g);f=Math.sqrt(f);if(0==f)return 0;k=d*e+a*b*g;l=Math.atan2(f,k);p=a*b*h/f;n=1-p*p;r=k-2*d*e/n;isNaN(r)&&(r=0);m=2.0955066654848088E-4*n*(4+.003352810664775694*(4-3*n));v=z;z=c+.003352810664775694*(1-m)*p*(l+m*f*(r+m*k*(-1+2*r*r)))}while(1E-12<Math.abs(z-
v)&&200>++w);if(200<=w)return null;z=2.7233160610984375E11*n/4.040829998465916E13;w=z/1024*(256+z*(-128+z*(74-47*z)));c=Math.atan2(b*h,a*e-d*b*g);a=Math.atan2(a*h,-d*b+a*e*g);c=(c+2*Math.PI)%(2*Math.PI);a=(a+2*Math.PI)%(2*Math.PI);d=Number((6356752.314245*(1+z/16384*(4096+z*(-768+z*(320-175*z))))*(l-w*f*(r+w/4*(k*(-1+2*r*r)-w/6*r*(-3+4*f*f)*(-3+4*r*r))))).toFixed(3));c=180*c/Math.PI;a=180*a/Math.PI;return{distance:d,initialBearing:c,finalBearing:a}},getLineBetweenPoints:function(a){var d,c=[];b.forEach(a,
e.hitch(this,function(a){c.push([a.x,a.y])}));0<c.length&&(d=new k({paths:[c],spatialReference:{wkid:4326}}));return d},getAngleBetweenPoints:function(a,b){a=r.getInverseCalculations(a,b);return null===a?0:a.initialBearing},getDistanceBetweenPoints:function(a,b){a=r.getInverseCalculations(a,b);return null===a?0:a.distance},getLengthOfGeometry:function(a){return(a=g.simplify(a))?g.geodesicLength(a,9001):0},getAreaOfGeometry:function(a){var b;a=g.simplify(a);b={};a?(b.acres=g.geodesicArea(a,109402),
b.squareMeters=g.geodesicArea(a,109404),b.squareFeet=g.geodesicArea(a,109405),b.squareUsFeet=g.geodesicArea(a,109406)):(b.acres=0,b.squareMeters=0,b.squareFeet=0,b.squareUsFeet=0);return b},getPolyLineFromPaths:function(a){var b,c;b=new k(new p({wkid:4326}));for(c=0;c<a.length;c++)b.addPath(a[c]);return b},getPolygonFromPolyLines:function(a,b,c,g){var d,h,k;d=[];g=g?new f(new p(g)):new f(new p({wkid:4326}));for(h=0;h<a.length;h++)for(k=0;k<a[h].length;k++)d.push(a[h][k]);b?d.push(e.clone(d[0])):c&&
(d[d.length-1][0]=d[0][0],d[d.length-1][1]=d[0][1]);g.isClockwise(d)||d.reverse();g.addRing(d);return g},getPointsForArc:function(a,b,c,e){var d,h=[],g,f;d=b-a;b=parseInt(d,10);0>=b&&(b=1);g=Math.abs(d)/Math.abs(b);if(0<g)for(d=0;d<Math.abs(b)+1;d++)f=a+g*d,(f=r.getDestinationPoint(c,f,Math.abs(e)))&&h.push(f);return h},getArcParam:function(a){var b;b={};0>a.distance?0>a.radius?(b.bearing=a.initBearing+90,b.centerPoint=r.getDestinationPoint(a.chordMidPoint,b.bearing,a.centerAndChordDistance),b.startAngle=
r.getAngleBetweenPoints(b.centerPoint,a.chordEndPoint),b.endAngle=r.getAngleBetweenPoints(b.centerPoint,a.chordStartPoint)):(b.bearing=a.initBearing-90,b.centerPoint=r.getDestinationPoint(a.chordMidPoint,b.bearing,a.centerAndChordDistance),b.startAngle=r.getAngleBetweenPoints(b.centerPoint,a.chordStartPoint),b.endAngle=r.getAngleBetweenPoints(b.centerPoint,a.chordEndPoint)):0<a.radius?(b.bearing=a.initBearing+90,b.centerPoint=r.getDestinationPoint(a.chordMidPoint,b.bearing,a.centerAndChordDistance),
b.startAngle=r.getAngleBetweenPoints(b.centerPoint,a.chordStartPoint),b.endAngle=r.getAngleBetweenPoints(b.centerPoint,a.chordEndPoint)):(b.bearing=a.initBearing-90,b.centerPoint=r.getDestinationPoint(a.chordMidPoint,b.bearing,a.centerAndChordDistance),b.startAngle=r.getAngleBetweenPoints(b.centerPoint,a.chordEndPoint),b.endAngle=r.getAngleBetweenPoints(b.centerPoint,a.chordStartPoint));return b},removeNegativeExponents:function(a){return 1<a.toString().toLowerCase().split("e-").length?0:a},getChordLengthFromArcLength:function(a,
b){var c;a=Math.abs(a);c=Math.PI*Math.abs(b);b=Math.abs(b)*Math.sin(Math.abs(a)/Math.abs(b)/2);return a<=c?2*b:-2*b},getArcLengthFromChordLength:function(a,b){var c;c=Math.abs(a);b=Math.abs(b);c=2*Math.asin(c/(2*b))*b;0>a&&(c=2*Math.PI*b-c);return c},chordBearingToTangentBearing:function(a,b,c){var d;d=180/Math.PI*Math.acos(Math.abs(c)/2/Math.abs(b));b/=Math.abs(b);a=a+90*b-c/Math.abs(c)*b*d;return r.removeNegativeExponents(0>a?a+360:360<=a?a%360:a)},tangentBearingToChordBearing:function(a,b,c){var d;
d=180/Math.PI*Math.acos(Math.abs(c)/2/Math.abs(b));b/=Math.abs(b);a=a+90*b-c/Math.abs(c)*b*d;return r.removeNegativeExponents(0>a?a+360:360<=a?a%360:a)},getUnitValueForSR:function(a){switch(l.getUnitValueForSR(a)){case 1:return"meters";case 111194.87428468118:return"meters";case .3048:return"feet";case .3048006096:case .3048006096012192:return"uSSurveyFeet"}},getRotationAngleBetweenPoints:function(a,b){var c,d;a=n.project(a,new p(102100));b=n.project(b,new p(102100));c=b.x-a.x;a=b.y-a.y;b=180*Math.atan2(Math.abs(c),
Math.abs(a))/Math.PI;d=180*Math.atan2(Math.abs(a),Math.abs(c))/Math.PI;c=r.removeNegativeExponents(c);a=r.removeNegativeExponents(a);b=r.removeNegativeExponents(b);d=r.removeNegativeExponents(d);if(0===a){if(0===c)return 0;if(0<c)return 90;if(0>c)return 270}else if(0<a){if(0===c)return 0;if(0<c)return b;if(0>c)return 270+d}else if(0>a){if(0===c)return 180;if(0<c)return 90+d;if(0>c)return 180+b}},getScaleDistanceBetweenPoints:function(a,b){a=n.project(a,new p(102100));b=n.project(b,new p(102100));
a=g.distance(a,b,9001);return r.removeNegativeExponents(a)}};return r})},"widgets/GriddedReferenceGraphic/js/DrawFeedBack":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","./Feedback"],function(m,k,f,n){return m([n],{constructor:function(){this.syncEvents();this.inherited(arguments)},syncEvents:function(){f.subscribe("grg-center-point-input",k.hitch(this,this.onCenterPointManualInputHandler));f.subscribe("clear-points",k.hitch(this,this.clearPoints))},clearPoints:function(){this._points=
[];this.map.graphics.clear()},clearGraphics:function(){this.map.graphics.clear()},onCenterPointManualInputHandler:function(a){this._points=[];this._points.push(a.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(a)},_onClickHandler:function(a){this._points=[];var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);a=b||a.mapPoint;this._points.push(a.offset(0,0));this.set("startPoint",this._points[0]);this._drawEnd(a)},cleanup:function(){}})})},"widgets/GriddedReferenceGraphic/js/Feedback":function(){define(["dojo/_base/declare",
"dojo/Stateful","esri/toolbars/draw","esri/graphic"],function(m,k,f,n){return m([f,k],{startPoint:null,_setStartPoint:function(a){this._set("startPoint",a)},addStartGraphic:function(a,b,e){this.removeStartGraphic(e);this.startGraphic=new n(a,b);e.add(this.startGraphic)},removeStartGraphic:function(a){this.startGraphic&&a.remove(this.startGraphic);this.startGraphic=null}})})},"widgets/GriddedReferenceGraphic/js/EditOutputCoordinate":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/EditOutputCoordinate.html dijit/form/Select jimu/dijit/CheckBox".split(" "),
function(m,k,f,n,a,b,e,g,p){return m([b,e,g],{templateString:p,formats:{},ct:"DD",_setCtAttr:function(a){this.frmtSelect.set("value",a)},constructor:function(a){m.safeMixin(this,a)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",
customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},"UTM (H)":{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};a.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(this.frmtSelect.on("change",k.hitch(this,this.frmtSelectValueDidChange)));this.own(n(this.frmtVal,"change",k.hitch(this,this.formatValDidChange)));this.displayPrefixContainer()},
formatValDidChange:function(){var b=a.get(this.frmtVal,"value"),e=this.frmtSelect.get("value");this.formats[e].customFormat=b;this.formats[e].useCustom=!0;this.currentformat=b},frmtSelectValueDidChange:function(){var b=this.frmtSelect.get("value"),e=this.formats[b].useCustom?this.formats[b].customFormat:this.formats[b].defaultFormat;this.ct=b;a.set(this.frmtVal,"value",e);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.frmtSelect.get("value")){case "DD":case "DDM":case "DMS":f.set(this.prefixContainer,
{display:""});break;default:f.set(this.prefixContainer,{display:"none"})}}})})},"widgets/GriddedReferenceGraphic/js/geometry-utils":function(){define(["./constants","esri/geometry/webMercatorUtils","esri/geometry/Polyline","esri/geometry/Polygon"],function(m,k,f,n){return{toGeographic:function(a){return a.spatialReference.isWebMercator()?k.webMercatorToGeographic(a):a},toWebMercator:function(a){return a.spatialReference.isWebMercator()?a:k.geographicToWebMercator(a)},_latitudeToWebMercatorY:function(a){return m.GEOGRAPHIC_360/
2*(m.HALF_PI-2*Math.atan(Math.exp(-1*a/m.WGS84_EQUATORIAL_RADIUS)))/Math.PI},_longitudeToWebMercatorX:function(a){var b=m.GEOGRAPHIC_360,e=m.GEOGRAPHIC_360/2,g=m.WGS84_EQUATORIAL_RADIUS;return a/g*e/Math.PI-Math.floor((a/g*e/Math.PI+e)/b)*b},pointToGeographic:function(a){for(var b=a.x,e=a.y,g=(a=a.spatialReference.isWebMercator())?m.WEST_WEBMERCATOR_LIMIT:m.WEST_GEOGRAPHIC_LIMIT,f=a?m.EAST_WEBMERCATOR_LIMIT:m.EAST_GEOGRAPHIC_LIMIT,k=a?m.WEBMERCATOR_360:m.GEOGRAPHIC_360,n=0;b<=g;)b+=k,--n;for(;b>f;)b-=
k,n+=1;a&&(b=this._longitudeToWebMercatorX(b),e=this._latitudeToWebMercatorY(e));return{x:b,y:e,offsetX:n}},extentToPolygon:function(a){return new n({rings:[[[a.xmin,a.ymin],[a.xmax,a.ymin],[a.xmax,a.ymax],[a.xmin,a.ymax],[a.xmin,a.ymin]]],spatialReference:a.spatialReference})},polygonToPolyline:function(a){return new f({paths:a.rings,spatialReference:{wkid:a.spatialReference.wkid}})}}})},"widgets/GriddedReferenceGraphic/js/constants":function(){define([],function(){return{ZONE_WIDTH_DEGREES:6,ZONE_HEIGHT_DEGREES:8,
MIN_MGRS_LATITUDE:-80,MAX_MGRS_LATITUDE:84,POSITIVE_180:179.99999999,NEGATIVE_180:-179.99999999,WEST_GEOGRAPHIC_LIMIT:-180,EAST_GEOGRAPHIC_LIMIT:180,GEOGRAPHIC_360:360,WEST_WEBMERCATOR_LIMIT:-2.0037508342789244E7,EAST_WEBMERCATOR_LIMIT:2.0037508342789244E7,WEBMERCATOR_360:4.007501668557849E7,DEGREES_PER_RADIAN:57.29577951308232,RADIANS_PER_DEGREE:.017453292519943295,WGS84_EQUATORIAL_RADIUS:6378137,WGS84_HALF_EQUATORIAL_RADIUS:3189068.5,HALF_PI:1.5707963267948966}})},"widgets/GriddedReferenceGraphic/js/mgrs-utils":function(){define("dojo/json ./constants ./geometry-utils ./geometryUtils ./mgrs ./NonPolarGridZone ./VisibleGridZone ./GridPolygon esri/geometry/geometryEngine esri/geometry/Point esri/geometry/Polygon".split(" "),
function(m,k,f,n,a,b,e,g,p,l,r){Math.log10||(Math.log10=function(a){return Math.log(a)/Math.LN10});return{_ZonesDictionary:function(){var a,e,c,g="CDEFGHJKLMNPQRSTUVWX".split(""),f={},l=function(a,c){var d,e,f=a+g[c];if("32X"===f||"34X"===f||"36X"===f)return null;"31V"===f?d={xmin:0,ymin:56,xmax:3,ymax:64,id:f}:"32V"===f?d={xmin:3,ymin:56,xmax:12,ymax:64,id:f}:"31X"===f?d={xmin:0,ymin:72,xmax:9,ymax:84,id:f}:"33X"===f?d={xmin:9,ymin:72,xmax:21,ymax:84,id:f}:"35X"===f?d={xmin:21,ymin:72,xmax:33,ymax:84,
id:f}:"37X"===f?d={xmin:33,ymin:72,xmax:42,ymax:84,id:f}:(d=(a-1)*k.ZONE_WIDTH_DEGREES-180,a=a*k.ZONE_WIDTH_DEGREES-180,e=c*k.ZONE_HEIGHT_DEGREES+k.MIN_MGRS_LATITUDE,c=(c+1)*k.ZONE_HEIGHT_DEGREES+k.MIN_MGRS_LATITUDE,d=180===d?k.POSITIVE_180:d,d=-180===d?k.NEGATIVE_180:d,a=180===a?k.POSITIVE_180:a,a=-180===a?k.NEGATIVE_180:a,80===c&&(c=k.MAX_MGRS_LATITUDE),d={xmin:d,ymin:e,xmax:a,ymax:c,id:f});return new b(d)};for(a=1;60>=a;a++)for(e=0;e<g.length;e++)(c=l(a,e))&&(f[c.id]=c);for(a=1;60>=a;a++){var n=
[];for(e=0;e<g.length;e++)if(c=l(a,e))c=new r({rings:m.parse(m.stringify(c._rings))}),n.push(c);n=p.union(n);for(e=0;e<g.length;e++)(c=l(a,e))&&(f[c.id.fullZoneGeometry]=n)}return f}(),zonesFromExtent:function(a,b){var c,d,g,h,n,B,G,E,I,H=a.spatialReference.isWebMercator()?k.WEBMERCATOR_360:k.GEOGRAPHIC_360,D="CDEFGHJKLMNPQRSTUVWX".split(""),x=[];if(a.xmax-a.xmin>H)return x;var H=f.extentToPolygon(a),H=f.toWebMercator(H),z=f.pointToGeographic(new l([a.xmin,a.ymin],a.spatialReference)),v=f.pointToGeographic(new l([a.xmax,
a.ymax],a.spatialReference));a=z.y;g=v.y;E=z.offsetX;I=v.offsetX;for(var w=E;w<=I;w++)for(c=w>E?k.NEGATIVE_180:z.x,d=w<I?k.POSITIVE_180:v.x,h=Math.min(Math.max(Math.floor((a+80)/k.ZONE_HEIGHT_DEGREES),0),19),n=Math.min(Math.floor((g+80)/k.ZONE_HEIGHT_DEGREES),19),c=Math.floor((c+180)/k.ZONE_WIDTH_DEGREES),d=Math.min(Math.floor((d+180)/k.ZONE_WIDTH_DEGREES)+2,60);c<=d;c++)for(var A=h;A<=n;A++)if(B=D[A],B=c+B,this._ZonesDictionary[B]){G=m.parse(m.stringify(this._ZonesDictionary[B]._rings));for(var C=
0;C<G[0].length;C++)G[0][C][0]+=w*k.GEOGRAPHIC_360;G=new r({rings:G});(G=p.intersect(f.toWebMercator(G),H))&&x.push(new e({map:b,polygon:G,fullZoneGeometry:this._ZonesDictionary[B].fullZoneGeometry,offset:w,nonPolarGridZone:this._ZonesDictionary[B],utmZone:this._ZonesDictionary[B].utmZone,latitudeBand:this._ZonesDictionary[B].latitudeZone}))}return x},processZonePolygons:function(b,e,c){var d=[];c=f.toWebMercator(c);for(var g=0;g<b.length;g++){var h=b[g];if(h)var k=h.nonPolarGridZone.latitudeZone,
l=f.toGeographic(h.polygon.getExtent()),p=a.LLtoUTM(l.ymin,l.xmin,h.nonPolarGridZone.utmZone),n=a.LLtoUTM(l.ymin,l.xmax,h.nonPolarGridZone.utmZone),m=a.LLtoUTM(l.ymax,l.xmax,h.nonPolarGridZone.utmZone),l=a.LLtoUTM(l.ymax,l.xmin,h.nonPolarGridZone.utmZone),h={minE:Math.min(p[0],n[0],m[0],l[0]),maxE:Math.max(p[0],n[0],m[0],l[0]),minN:Math.min(p[1],n[1],m[1],l[1]),maxN:Math.max(p[1],n[1],m[1],l[1]),utmZone:h.nonPolarGridZone.utmZone,latitudeZone:k,polygon:h.polygon,offset:h.offset,fullZoneGeometry:f.extentToPolygon(h.nonPolarGridZone.extent)},
d=d.concat(this.handle100kGrids(h,e,c))}return d},handle100kGrids:function(b,e,c){var d=b.polygon,h=b.offset,l=b.utmZone,m=b.latitudeZone,B=b.fullZoneGeometry,G=b.minE,E=b.maxE,I=b.maxN,H=[],D,x,z,v,w;for(b=1E5*Math.floor(b.minN/1E5);b<I;b+=1E5)for(D=1E5*Math.floor(G/1E5);D<E;D+=1E5){w=a.findGridLetters(l,0>b+5E4?1E7+(b+5E4):b+5E4,D+5E4);z=[];for(x=D;x<=D+1E5;x+=1E4)v=a.UTMtoLL(b,x,l),z.push([v.lon,v.lat]);for(x=b;x<b+1E5;x+=1E4)v=a.UTMtoLL(x,D+1E5,l),z.push([v.lon,v.lat]);for(x=D+1E5;x>=D;x-=1E4)v=
a.UTMtoLL(b+1E5,x,l),z.push([v.lon,v.lat]);for(x=b+1E5;x>=b;x-=1E4)v=a.UTMtoLL(x,D,l),z.push([v.lon,v.lat]);for(x=0;x<z.length;x++)z[x][0]+=h*k.GEOGRAPHIC_360;x=new r([z]);z=n.getAngleBetweenPoints(x.getPoint(0,x.rings[0].length-1),x.getPoint(0,x.rings[0].length-2));v=p.rotate(f.extentToPolygon(c),-1*z);z=p.intersect(f.toWebMercator(x),f.toWebMercator(d));v=p.intersects(v,f.toWebMercator(x));if(z||v){var A;v&&(A=p.intersect(f.toWebMercator(x),f.toWebMercator(B)));w={clippedPolygon:z,unclippedPolygon:x,
clippedPolyToUTMZone:A,map:e,xmin:D,ymin:b,xmax:D+1E5,ymax:b+1E5,x:"",y:"",minMaxType:"utm",utmZone:l,latitudeZone:m,utmZonePoly:d,fullZoneGeometry:B,GZD:w,text:w};A&&(w=new g(w),H.push(w))}}return H},handleGridSquares:function(b,e,c,k){var d=[],h=b.utmZonePoly,m=b.latitudeZone,q=b.utmZone,G=b.fullZoneGeometry,E=b.GZD,I=b.xmin,H=b.xmax,D=b.ymin;b=b.ymax;var x,z,v,w,A,C,J,N=!0,O=!0;k=f.toWebMercator(k);for(x=Math.floor(D/c)*c;x<b;x+=c)for(z=Math.floor(I/c)*c;z<H;z+=c){w=[];C=a.UTMtoLL(x,z,q);w.push([C.lon,
C.lat]);v=a.UTMtoLL(x+c,z,q);w.push([v.lon,v.lat]);J=a.UTMtoLL(x+c,z+c,q);w.push([J.lon,J.lat]);J=a.UTMtoLL(x,z+c,q);w.push([J.lon,J.lat]);w.push([C.lon,C.lat]);w=new r([w]);J=p.intersect(f.toWebMercator(f.extentToPolygon(k)),f.toWebMercator(G));N&&O&&(A=n.getAngleBetweenPoints(new l(C.lon,C.lat),new l(v.lon,v.lat)),A=p.rotate(J,-1*A));C=p.intersect(f.toWebMercator(w),h);v=p.intersects(A,f.toWebMercator(w));var K;if(C||v){v&&(K=p.intersect(f.toWebMercator(w),f.toWebMercator(G)));v=E+this._padZero(z%
1E5/c,5-Math.log10(c)).toString()+this._padZero((0>D?1E7+x:x)%1E5/c,5-Math.log10(c)).toString();w={clippedPolygon:C,unclippedPolygon:w,fullZoneGeometry:G,clippedPolyToUTMZone:K,map:e,xmin:z,ymin:x,xmax:z+c,ymax:x+c,x:this._padZero(z%1E5/c,5-Math.log10(c)).toString(),y:this._padZero((0>D?1E7+x:x)%1E5/c,5-Math.log10(c)).toString(),minMaxType:"utm",utmZone:q,latitudeZone:m,GZD:E,utmZonePoly:h,text:v};if(!K)continue;N=new g(w);d.push(N)}O=N=!1}return d},_padZero:function(a,b){for(a=a.toString();a.length<
b;)a="0"+a;return a}}})},"widgets/GriddedReferenceGraphic/js/mgrs":function(){define(["esri/geometry/Point"],function(m){var k,f,n;k=6378137;f=.00669437999;n=f/(1-f);var a=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f));return{setSpheroid:function(b){b=b.toUpperCase();switch(b){case "AIRY 1830":k=6377563.396;f=.00667053999998536;break;case "AIRY MODIFIED":k=6377340.189;f=.00667053999998536;break;case "AVERAGE TERRESTRIAL SYSTEM 1977":k=6378135;f=.00669438499958795;break;case "AUSTRALIAN NATIONAL":k=6378160;
f=.00669454185458764;break;case "BESSEL 1841":k=6377397.155;f=.00667437223180214;break;case "BESSEL MODIFIED":k=6377492.018;f=.00667437223180214;break;case "BESSEL NAMIBIA":k=6377483.865;f=.00667437223180214;break;case "CLARKE 1858":k=6378293.639;f=.00678514600473303;break;case "NAD27":case "CLARKE 1866":k=6378206.4;f=.00676865799760964;break;case "CLARKE 1866 MICHIGAN":k=6378450.047;f=.00676865830738507;break;case "CLARKE 1880":k=6378249.138;f=.00680348101883452;break;case "CLARKE 1880 (ARC)":k=
6378249.145;f=.00680348101883452;break;case "CLARKE 1880 (BENOIT)":k=6378300.79;f=.00680348271028565;break;case "CLARKE 1880 (IGN)":k=6378249.2;f=.00680348767623919;break;case "CLARKE 1880 (RGS)":k=6378249.145;f=.00680351128284906;break;case "CLARKE 1880 (SGA)":k=6378249.2;f=.00680348860198551;break;case "EVEREST 1830 (DEFINITION)":k=6377299.36;f=.00663784663019969;break;case "EVEREST 1830 (MODIFIED)":k=6377304.063;f=.00663784663019969;break;case "EVEREST (ADJUSTMENT 1937)":k=6377276.345;f=.00663784663019969;
break;case "EVEREST (DEFINITION 1962)":k=6377301.243;f=.00663784606842344;break;case "EVEREST (DEFINITION 1967)":k=6377298.556;f=.00663784663019969;break;case "EVEREST (DEFINITION 1975)":k=6377299.151;f=.00663784606842344;break;case "NAD83":case "GEM GRAVITY POTENTIAL MODEL":case "GRS 1980":k=6378137;f=.00669438002290079;break;case "GRS 1967 \x3d INTERNATIONAL 1967":k=6378160;f=.00669460532856765;break;case "HELMERT 1906":k=6378200;f=.00669342162296594;break;case "INDONESIAN NATIONAL":k=6378160;f=
.0066946090804091;break;case "INTERNATIONAL 1924":k=6378388;f=.00672267002233332;break;case "INTERNATIONAL 1967":k=6378160;f=.00669454185458764;break;case "KRASOVSKY 1940":k=6378245;f=.00669342162296594;break;case "TRANSIT PRECISE EPHEMERIS":k=6378145;f=.00669454185458764;break;case "OSU 1986 GEOIDAL MODEL":k=6378136.2;f=.00669438006997852;break;case "OSU 1991 GEOIDAL MODEL":k=6378136.3;f=.00669438006997852;break;case "PLESSIS 1817":k=6376523;f=.00646954373789485;break;case "STRUVE 1860":k=6378298.3;
f=.00677435980080942;break;case "WAR OFFICE":k=6378300.583;f=.00674534331628926;break;case "NWL-10D \x3d\x3d WGS 1972":k=6378135;f=.00669431777826672;break;case "WGS 1972":k=6378135;f=.00669431777826672;break;case "WGS84":case "WGS 1984":k=6378137;f=.00669437999014132;break;case "WGS 1966":k=6378145;f=.00669454185458764;break;case "FISCHER 1960":k=6378166;f=.00669342162296594;break;case "FISCHER 1968":k=6378150;f=.00669342162296594;break;case "FISCHER MODIFIED":k=6378155;f=.00669342162296594;break;
case "HOUGH 1960":k=6378270;f=.00672267002233332;break;case "EVEREST MODIFIED 1969":k=6377295.664;f=.00663784663019969;break;case "WALBECK":k=6376896;f=.00659454809414964;break;case "GRS 1967 TRUNCATED":k=6378160,f=.00669454185458764}n=f/(1-f);a=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f))},getSpheroidList:function(){return"AIRY 1830;AIRY MODIFIED;AUSTRALIAN NATIONAL;AVERAGE TERRESTRIAL SYSTEM 1977;BESSEL 1841;BESSEL MODIFIED;BESSEL NAMIBIA;CLARKE 1858;CLARKE 1866 MICHIGAN;CLARKE 1866;CLARKE 1880 (ARC);CLARKE 1880 (BENOIT);CLARKE 1880 (IGN);CLARKE 1880 (RGS);CLARKE 1880 (SGA);CLARKE 1880;EVEREST (ADJUSTMENT 1937);EVEREST (DEFINITION 1962);EVEREST (DEFINITION 1967);EVEREST (DEFINITION 1975);EVEREST 1830 (DEFINITION);EVEREST 1830 (MODIFIED);EVEREST MODIFIED 1969;FISCHER 1960;FISCHER 1968;FISCHER MODIFIED;GEM GRAVITY POTENTIAL MODEL;GRS 1967 \x3d INTERNATIONAL 1967;GRS 1967 TRUNCATED;GRS 1980;HELMERT 1906;HOUGH 1960;INDONESIAN NATIONAL;INTERNATIONAL 1924;INTERNATIONAL 1967;KRASOVSKY 1940;NWL-10D \x3d\x3d WGS 1972;OSU 1986 GEOIDAL MODEL;OSU 1991 GEOIDAL MODEL;PLESSIS 1817;STRUVE 1860;TRANSIT PRECISE EPHEMERIS;WALBECK;WAR OFFICE;WGS 1966;WGS 1972;WGS 1984".split(";")},
getZoneNumber:function(a,e){a=parseFloat(a);e=parseFloat(e);if(360<e||-180>e){for(;-180>e;)e+=360;for(;180<e;)e-=360}e=e+180-360*Math.floor((e+180)/360)-180;var b=Math.floor((e+180)/6)+1;56<=a&&64>a&&3<=e&&12>e&&(b=32);72<=a&&84>a&&(0<=e&&9>e?b=31:9<=e&&21>e?b=33:21<=e&&33>e?b=35:33<=e&&42>e&&(b=37));return b},LLtoUTM:function(a,e,g){a=parseFloat(a);e=parseFloat(e);if(84<a||-80>a)return"undefined, ensure 84N \x3e Lat \x3e 80S";if(360<e||-180>e){for(;-180>e;)e+=360;for(;180<e;)e-=360}var b,l,m,d;b=
e+180-360*Math.floor((e+180)/360)-180;l=a*Math.PI/180;b=b*Math.PI/180;e=g?g:this.getZoneNumber(a,e);g=(6*(e-1)-180+3)*Math.PI/180;this.UTMLetterDesignator(a);a=k/Math.sqrt(1-f*Math.sin(l)*Math.sin(l));m=Math.tan(l)*Math.tan(l);d=n*Math.cos(l)*Math.cos(l);b=Math.cos(l)*(b-g);return[.9996*a*(b+(1-m+d)*b*b*b/6+(5-18*m+m*m+72*d-58*n)*b*b*b*b*b/120)+5E5,.9996*(k*((1-f/4-3*f*f/64-5*f*f*f/256)*l-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*l)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*l)-35*f*f*f/3072*Math.sin(6*
l))+a*Math.tan(l)*(b*b/2+(5-m+9*d+4*d*d)*b*b*b*b/24+(61-58*m+m*m+600*d-330*n)*b*b*b*b*b*b/720)),e]},LLtoUSNG:function(a,e,g,f){g=g||5;var b;b=f?f:this.getZoneNumber(a,e);a=parseFloat(a);e=parseFloat(e);var k=this.LLtoUTM(a,e,b);f=k[0];var d=k[1];0>a&&(d+=1E7);k=this.findGridLetters(b,d,f);b=Math.round(d)%1E5;f=Math.round(f)%1E5;b=Math.floor(b/Math.pow(10,5-g));f=Math.floor(f/Math.pow(10,5-g));a=this.getZoneNumber(a,e)+this.UTMLetterDesignator(a)+" "+k+" ";for(e=String(f).length;e<g;e++)a+="0";a+=
f+" ";for(e=String(b).length;e<g;e++)a+="0";return a+b},UTMLetterDesignator:function(a){a=parseFloat(a);return 84>=a&&72<=a?"X":72>a&&64<=a?"W":64>a&&56<=a?"V":56>a&&48<=a?"U":48>a&&40<=a?"T":40>a&&32<=a?"S":32>a&&24<=a?"R":24>a&&16<=a?"Q":16>a&&8<=a?"P":8>a&&0<=a?"N":0>a&&-8<=a?"M":-8>a&&-16<=a?"L":-16>a&&-24<=a?"K":-24>a&&-32<=a?"J":-32>a&&-40<=a?"H":-40>a&&-48<=a?"G":-48>a&&-56<=a?"F":-56>a&&-64<=a?"E":-64>a&&-72<=a?"D":-72>a&&-80<=a?"C":"Z"},findSet:function(a){a=parseInt(a,10);switch(a%6){case 0:return 6;
case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;default:return-1}},findGridLetters:function(a,e,g){a=parseInt(a,10);e=parseFloat(e);g=parseFloat(g);var b=1;for(e=Math.round(e);1E5<=e;)e-=1E5,b++;b%=20;e=0;for(g=Math.round(g);1E5<=g;)g-=1E5,e++;e%=8;return this.lettersHelper(this.findSet(a),b,e)},lettersHelper:function(a,e,g){0===e?e=19:e--;0===g?g=7:g--;switch(a){case 1:return a="ABCDEFGHJKLMNPQRSTUV","ABCDEFGH".charAt(g)+a.charAt(e);case 2:return a="FGHJKLMNPQRSTUVABCDE",
"JKLMNPQR".charAt(g)+a.charAt(e);case 3:return a="ABCDEFGHJKLMNPQRSTUV","STUVWXYZ".charAt(g)+a.charAt(e);case 4:return a="FGHJKLMNPQRSTUVABCDE","ABCDEFGH".charAt(g)+a.charAt(e);case 5:return a="ABCDEFGHJKLMNPQRSTUV","JKLMNPQR".charAt(g)+a.charAt(e);case 6:return a="FGHJKLMNPQRSTUVABCDE","STUVWXYZ".charAt(g)+a.charAt(e)}},UTMtoLL:function(b,e,g){e=parseFloat(e)-5E5;b=parseFloat(b);g=parseInt(g,10);b=b/.9996/(k*(1-f/4-3*f*f/64-5*f*f*f/256));b=b+(3*a/2-27*a*a*a/32)*Math.sin(2*b)+(21*a*a/16-55*a*a*a*
a/32)*Math.sin(4*b)+151*a*a*a/96*Math.sin(6*b);var p=k/Math.sqrt(1-f*Math.sin(b)*Math.sin(b)),l=Math.tan(b)*Math.tan(b),m=n*Math.cos(b)*Math.cos(b),d=e/(.9996*p);e=b-p*Math.tan(b)/(k*(1-f)/Math.pow(1-f*Math.sin(b)*Math.sin(b),1.5))*(d*d/2-(5+3*l+10*m-4*m*m-9*n)*d*d*d*d/24+(61+90*l+298*m+45*l*l-252*n-3*m*m)*d*d*d*d*d*d/720);e=180*e/Math.PI;b=(d-(1+2*l+m)*d*d*d/6+(5-2*m+28*l-3*m*m+8*n+24*l*l)*d*d*d*d*d/120)/Math.cos(b);b=6*(g-1)-180+3+180*b/Math.PI;g={};g.lat=e;g.lon=b;return g},USNGtoUTM:function(a,
e,g,f,k,m){g=1+"ABCDEFGHJKLMNPQRSTUVWXYZ".indexOf(g)%8;var b="CDEFGHJKLMNPQRSTUVWX".indexOf(e);f=a%2?"ABCDEFGHJKLMNPQRSTUV".indexOf(f):"FGHJKLMNPQRSTUVABCDE".indexOf(f);f=Number([0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6][b])+f/10;f<[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9][b]&&(f+=2);b={};b.N=1E6*f+Number(m)*Math.pow(10,5-m.length);b.E=1E5*g+Number(k)*Math.pow(10,5-k.length);b.zone=a;b.letter=e;return b},USNGtoLL:function(a){a=this.parseUSNG_str(a);var b=this.USNGtoUTM(a.zone,
a.ltr,a.sq1,a.sq2,a.east,a.north);"N">a.ltr&&(b.N-=1E7);b=this.UTMtoLL(b.N,b.E,a.zone);return[b.lat,b.lon]},parseUSNG_str:function(a){var b=[];a=a.toUpperCase();b=/%20/g;b=a.replace(b,"");b=/ /g;b=a.replace(b,"");if(7>b.length)return 0;a={};var f=0;a.zone=10*b.charAt(f++)+1*b.charAt(f++);a.ltr=b.charAt(f++);a.sq1=b.charAt(f++);a.sq2=b.charAt(f++);a.precision=(b.length-f)/2;a.east="";a.north="";for(var k=0;k<a.precision;k++)a.east+=b.charAt(f++);" "===b[f]&&f++;for(k=0;k<a.precision;k++)a.north+=b.charAt(f++);
return a},isUSNG:function(a){var b;a=a.toUpperCase();b=/%20/g;a=a.replace(b,"");b=/ /g;a=a.replace(b,"");if(15<a.length)return 0;b=/^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX]$/;if(a.match(b))return 0;b=/^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX][ABCDEFGHJKLMNPQRSTUVWXYZ][ABCDEFGHJKLMNPQRSTUV]([0-9][0-9]){0,5}/;return!a.match(b)||7>a.length?0:a},LLtoMGRS:function(a,e,f){return this.LLtoUSNG(a,e,f||5).replace(/ /g,"")},USNGtoPoint:function(a){a=this.USNGtoLL(a);return new m(a[1],a[0])},pointToUSNG:function(a,e){var b=a.getLatitude();
a=a.getLongitude();return this.LLtoUSNG(b,a,e)},LLtoUSNG_nad27:function(a,e,f){return this.LLtoUSNG(a,e,f||5)+" (NAD27)"}}})},"widgets/GriddedReferenceGraphic/js/NonPolarGridZone":function(){define(["dojo/_base/declare","dojo/json","./constants","esri/geometry/Polygon","esri/geometry/Extent"],function(m,k,f,n,a){return m(null,{extent:null,id:null,utmZone:null,latitudeZone:null,_rings:[],constructor:function(b){var e=b.id.match(/(\d+)|([A-Za-z]+)/g);this.id=b.id;this.utmZone=1*e[0];this.latitudeZone=
e[1];this.extent=new a({xmin:b.xmin,ymin:b.ymin,xmax:b.xmax,ymax:b.ymax,spatialReference:b.spatialReference||{wkid:4326}});b=[this.extent.xmin,this.extent.ymin];this._rings=[[b,[this.extent.xmax,this.extent.ymin],[this.extent.xmax,this.extent.ymax],[this.extent.xmin,this.extent.ymax],b]]},toPolygon:function(a){var b=k.parse(k.stringify(this._rings));if(a)for(var g=0;g<b[0].length;g++)b[0][g][0]+=a*f.GEOGRAPHIC_360;return new n({rings:b,spatialReference:this.spatialReference})}})})},"widgets/GriddedReferenceGraphic/js/VisibleGridZone":function(){define(["dojo/_base/declare",
"./GridPolygon"],function(m,k){return m(null,{polygon:null,offset:null,nonPolarGridZone:null,fullZoneGeometry:null,map:null,constructor:function(f){this.offset=Math.round(f.offset);this.polygon=f.polygon;this.nonPolarGridZone=f.nonPolarGridZone;this.fullZoneGeometry=f.fullZoneGeometry;this.map=f.map;this.utmZone=f.utmZone;this.latitudeBand=f.latitudeBand;f={clippedPolygon:this.polygon,unclippedPolygon:this.nonPolarGridZone.toPolygon(f.offset),map:this.map,xmin:this.nonPolarGridZone.extent.xmin,ymin:this.nonPolarGridZone.extent.ymin,
xmax:this.nonPolarGridZone.extent.xmax,ymax:this.nonPolarGridZone.extent.ymax,minMaxType:"degrees",utmZone:this.utmZone,text:this.nonPolarGridZone.id,latitudeBand:this.latitudeBand};this.gridPolygon=new k(f)}})})},"widgets/GriddedReferenceGraphic/js/GridPolygon":function(){define(["dojo/_base/declare"],function(m){return m(null,{clippedPolygon:null,unclippedPolygon:null,clippedPolyToUTMZone:null,utmZonePoly:null,fullZoneGeometry:null,map:null,xmin:0,ymin:0,x:"",y:"",xmax:0,ymax:0,minMaxType:"",utmZone:0,
latitudeZone:"",GZD:"",text:"",constructor:function(k){this.unclippedPolygon=k.unclippedPolygon;this.clippedPolygon=k.clippedPolygon;this.utmZonePoly=k.utmZonePoly;this.fullZoneGeometry=k.fullZoneGeometry;this.clippedPolyToUTMZone=k.clippedPolyToUTMZone;this.map=k.map;this.xmin=k.xmin;this.ymin=k.ymin;this.xmax=k.xmax;this.ymax=k.ymax;this.x=k.x;this.y=k.y;this.minMaxType=k.minMaxType;this.utmZone=Math.round(k.utmZone);this.latitudeZone=k.latitudeZone;this.GZD=k.GZD;this.text=k.text}})})},"widgets/GriddedReferenceGraphic/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/GriddedReferenceGraphic/templates/ColorPickerEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n  \x3cspan class\x3d"trans"\x3e${nls.transparency}\x3c/span\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan class\x3d"percent-display"\x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:widgets/GriddedReferenceGraphic/templates/FontSetting.html":'\x3cdiv class\x3d"style-selector"\x3e\r\n  \x3cdiv class\x3d"setting-items font clearFix" data-dojo-attach-point\x3d"fontSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.font}"\x3e${nls.font}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"fontSelect" data-dojo-props\x3d\'style:{width:"100%"}\' data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-size clearFix" data-dojo-attach-point\x3d"textSizeSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.textSize}"\x3e${nls.textSize}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"text-size-group jimu-float-leading"\x3e\r\n        \x3cselect data-dojo-type\x3d"dijit/form/ComboBox" data-dojo-attach-point\x3d"textSizeSelect"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"text-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-color clearFix" data-dojo-attach-point\x3d"textColorSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.textColor}"\x3e${nls.textColor}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"font-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"text-color-btn" data-dojo-attach-point\x3d"textColorBtn"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"font-group font-group-btns jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading bold" data-dojo-attach-point\x3d"bold"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading italic" data-dojo-attach-point\x3d"italic"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading underline" data-dojo-attach-point\x3d"underline"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-color clearFix" data-dojo-attach-point\x3d"transparencySetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.transparency}"\x3e${nls.transparency}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"font-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"text-color-btn" data-dojo-attach-point\x3d"transparencySlider"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e      \r\n    \x3c/div\x3e\r\n  \x3c/div\x3e  \r\n  \x3cdiv class\x3d"setting-items halo-size clearFix" data-dojo-attach-point\x3d"haloSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.halo}"\x3e${nls.halo}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cselect data-dojo-type\x3d"dijit/form/ComboBox" data-dojo-attach-point\x3d"haloSizeSelect"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"halo-color-btn" data-dojo-attach-point\x3d"haloColorBtn"\x3e\x3c/div\x3e        \r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"label" title\x3d"${nls.show}"\x3e${nls.show}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cinput class\x3d"halo-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"showHalo" checked\x3d"true" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/templates/TransparencyEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan \x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',"url:widgets/GriddedReferenceGraphic/templates/GridSettings.html":'\x3cdiv\x3e       \r\n    \x3cdiv class\x3d"tabs" data-dojo-attach-point\x3d"tabsContainer"\x3e\r\n      \x3c!-- Grid Settings Tab --\x3e \r\n      \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"gridTab"\x3e\r\n        \r\n        \x3c!-- Grid Shape --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridShapeContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellShape}"\x3e\r\n                ${nls.gridSettings.cellShape}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"cellShape" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Units --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridUnitsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellUnits}"\x3e\r\n                ${nls.gridSettings.cellUnits}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"cellUnits" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Grid Origin --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridOriginContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.gridOrigin}"\x3e\r\n                ${nls.gridSettings.gridOrigin}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"gridOrigin" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridRefSystemContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis labelLeft" title\x3d"${nls.gridSettings.gridReferenceSystem}"\x3e\r\n                ${nls.gridSettings.gridReferenceSystem}\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis labelRight" title\x3d"${nls.gridSettings.gridDatum}"\x3e\r\n                ${nls.gridSettings.gridDatum}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"referenceSystem" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Cell Outline Color --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellOutline}"\x3e\r\n                ${nls.gridSettings.cellOutline}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"cellOutlineColorPicker"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Cell fill Color --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellFill}"\x3e\r\n                ${nls.gridSettings.cellFill}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"cellFillColorPicker"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \r\n      \x3c!-- Label Settings Tab --\x3e\r\n      \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"labelTab"\x3e  \r\n        \x3c!-- Label Start Position Selector --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStartPositionContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelStartPosition}"\x3e\r\n                ${nls.gridSettings.labelStartPosition}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelStartPosition" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling Style without Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStyleContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelType}"\x3e\r\n                ${nls.gridSettings.labelType}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelType" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling Style with Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStyleWithRefSysContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelType}"\x3e\r\n                ${nls.gridSettings.labelType}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelTypeWithRefSys" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling direction --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelDirectionContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelDirection}"\x3e\r\n                ${nls.gridSettings.labelDirection}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelDirection" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Font Settings --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"fontSettingsContainer"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.labelStyle}"\x3e\r\n                ${nls.labelStyle}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"fontSettingNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e        \r\n      \x3c/div\x3e  \r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/templates/ConfirmNotation.html":'\x3cdiv class\x3d\'coordinateContainer\'\x3e\r\n    \x3cspan class\x3d\'jimu-widget-subtitle\' data-dojo-attach-point\x3d\'label1\'\x3e\x3c/span\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cdiv class\x3d"controlItem" style\x3d"padding-top: 10px;"\x3e\r\n            \x3cselect style\x3d"width: 225px" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"comboOptions"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/GriddedReferenceGraphic/templates/EditOutputCoordinate.html":'\x3cdiv\x3e\r\n    \x3cspan class\x3d\'jimu-widget-subtitle\'\x3e${nls.setCoordFormat}\x3c/span\x3e\r\n    \x3cdiv class\x3d"controlContainer"\x3e\r\n        \x3cselect style\x3d"width:80px" name\x3d"test" data-dojo-type\x3d\'dijit/form/Select\' data-dojo-attach-point\x3d"frmtSelect"\x3e\r\n            \x3coption value\x3d"DD"\x3e${nls.DD}\x3c/option\x3e\r\n            \x3coption value\x3d"DDM"\x3e${nls.DDM}\x3c/option\x3e\r\n            \x3coption value\x3d"DMS"\x3e${nls.DMS}\x3c/option\x3e\r\n            \x3coption value\x3d"GARS"\x3e${nls.GARS}\x3c/option\x3e\r\n            \x3coption value\x3d"GEOREF"\x3e${nls.GEOREF}\x3c/option\x3e\r\n            \x3coption value\x3d"MGRS"\x3e${nls.MGRS}\x3c/option\x3e\r\n            \x3coption value\x3d"USNG"\x3e${nls.USNG}\x3c/option\x3e\r\n            \x3coption value\x3d"UTM"\x3e${nls.UTM}\x3c/option\x3e\r\n            \x3coption value\x3d"UTM (H)"\x3e${nls.UTM_H}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n\r\n        \x3cinput type \x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"jimu-input"\x3e\x3c/input\x3e\r\n\r\n        \x3cdiv class\x3d\'settingsContainer\' data-dojo-attach-point\x3d"prefixContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d\'addSignChkBox\'  data-dojo-type\x3d\'jimu/dijit/CheckBox\'\x3e${nls.prefixNumbers}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"btnContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"applyButton" class\x3d\'jimu-btn\'\x3e${nls.applyBtn}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"cancelButton" class\x3d\'jimu-btn\'\x3e${nls.cancelBtn}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/GriddedReferenceGraphic/Widget.html":'\x3cdiv class\x3d"GRGDrafterMainContainer GRGDrafterFullHeight" data-dojo-attach-point\x3d"mainNode"\x3e\r\n  \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterFullWidth" data-dojo-attach-point\x3d"widgetMainNode"\x3e\r\n    \x3c!---------------------\r\n          Main Page Node\r\n        ----------------------\x3e\r\n    \x3cdiv class\x3d"esirCTMainPage" data-dojo-attach-point\x3d"mainPageNode"\x3e\r\n      \x3c!-- Create From Area --\x3e\r\n      \x3cdiv class\x3d"GRGDrafterMainPageRowBlock"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterMainPageRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer" title\x3d"${nls.newGRGFromAreaButtonLabel}"\r\n            data-dojo-attach-point\x3d"newGRGAreaButton"\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle" title\x3d"${nls.newGRGFromAreaButtonLabel}"\x3e\r\n            ${nls.newGRGFromAreaButtonLabel}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Create From Area Options --\x3e\r\n        \x3cdiv class\x3d"controlGroupHidden" data-dojo-attach-point\x3d"fromAreaContainer"\x3e\r\n          \x3c!-- Define by size --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByDimension GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n              ${nls.newGRGBySizeButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight" title\x3d"${nls.newGRGBySizeButtonLabel}"\r\n              data-dojo-attach-point\x3d"newAreaGRGBySizeButton"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByRefSystemButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n              ${nls.newGRGFromRefSystemButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight" title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\r\n              data-dojo-attach-point\x3d"newAreaGRGFromRefSystemButton"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Create From Point --\x3e\r\n      \x3cdiv class\x3d"GRGDrafterMainPageRowBlock"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterMainPageRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer" title\x3d"${nls.newGRGFromPointButtonLabel}"\r\n            data-dojo-attach-point\x3d"newGRGPointButton"\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle" title\x3d"${nls.newGRGFromPointButtonLabel}"\x3e\r\n            ${nls.newGRGFromPointButtonLabel}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Create From Point Options --\x3e\r\n        \x3cdiv class\x3d"controlGroupHidden" data-dojo-attach-point\x3d"fromPointContainer"\x3e\r\n          \x3c!-- Define by size --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByDimension GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n              ${nls.newGRGBySizeButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight" title\x3d"${nls.newGRGBySizeButtonLabel}"\r\n              data-dojo-attach-point\x3d"newPointGRGBySizeButton"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByRefSystemButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n              ${nls.newGRGFromRefSystemButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight" title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\r\n              data-dojo-attach-point\x3d"newPointGRGFromRefSystemButton"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByTimeButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGByTimeLabel}"\x3e\r\n              ${nls.newGRGByTimeLabel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight" title\x3d"${nls.newGRGByTimeLabel}"\r\n              data-dojo-attach-point\x3d"newPointGRGFromTimeButton"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          GRG From Area By Size Node\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaBySizePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgAreaBySizePanelBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeTitle}"\x3e\r\n          ${nls.newGRGAreaBySizeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgAreaBySizeSettingsButton"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Area Tool --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRowPaddingTop20" data-dojo-attach-point\x3d"grgAreaBySizeDrawContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth"\x3e\r\n              \x3cdiv\x3e\r\n                \x3cdiv class\x3d"GRGDrafterDoubleButtonLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeDefineAreaLabel}"\x3e${nls.newGRGAreaBySizeDefineAreaLabel}\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaPolygonToolTip}" class\x3d"jimu-icon polygonBtn" data-dojo-attach-point\x3d"grgAreaBySizeDrawPolygonIcon"\x3e\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaExtentToolTip}" class\x3d"jimu-icon extentBtn" data-dojo-attach-point\x3d"grgAreaBySizeDrawExtentIcon"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Set number of cells checkbox --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidthAndPadding"\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"setNumberRowsColumns"\r\n              checked\x3d"false" /\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.numberRowsColumnsLabel}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"numberOfCellsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"cellHorizontal" value\x3d"10" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"cellVertical" value\x3d"10" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgAreaBySizeCellWidth" value\x3d"1000" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgAreaBySizeCellHeight" value\x3d"1000" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rotation --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rotation}"\x3e${nls.rotation}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgAreaBySizeRotation" value\x3d"0" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizeCreateGRGButton\'\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizeClearGRGButton\'\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          GRG From Area By Reference System\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaByRefSystemPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgAreaByRefSystemPanelBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaByRefSystemTitle}"\x3e\r\n          ${nls.newGRGAreaByRefSystemTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgAreaByRefSystemSettingsButton"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Area Tool --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRowPaddingTop20"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth" data-dojo-attach-point\x3d"grgAreaByRefSystemDrawContainer"\x3e\r\n              \x3cdiv\x3e\r\n                \x3cdiv class\x3d"GRGDrafterButtonLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeDefineAreaLabel}"\x3e${nls.newGRGAreaBySizeDefineAreaLabel}\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaExtentToolTip}" class\x3d"jimu-icon extentBtn" data-dojo-attach-point\x3d"grgAreaByRefSystemDrawIcon"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Size DropDown --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridSize}"\x3e${nls.gridSize}\x3c/div\x3e\r\n            \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"grgAreaByRefSystemGridSize"\x3e\r\n              \x3coption value\x3d"UTM" selected\x3d"selected"\x3e${nls.UTMZoneandBand}\x3c/option\x3e\r\n              \x3coption value\x3d"100000"\x3e${nls.100000m}\x3c/option\x3e\r\n              \x3coption value\x3d"10000"\x3e${nls.10000m}\x3c/option\x3e\r\n              \x3coption value\x3d"1000"\x3e${nls.1000m}\x3c/option\x3e\r\n              \x3coption value\x3d"100"\x3e${nls.100m}\x3c/option\x3e\r\n              \x3coption value\x3d"10"\x3e${nls.10m}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Clip Grid to GRG Area Toggle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv\x3e\r\n              \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.clipGrid}"\x3e${nls.clipGrid}\x3c/div\x3e\r\n              \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"grgAreaByRefSystemClipToggle"\r\n                checked\x3d"false" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Label Format--\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"grgAreaByRefSystemLabelFormat"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.labelFormat}"\x3e${nls.labelFormat}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: calc(100% - 20px)" data-dojo-attach-point\x3d"grgAreaByRefLabelFormat"\r\n              value\x3d"Z"\x3e\x3c/input\x3e\r\n            \x3cdiv title\x3d"${nls.helpIconTooltip}" class\x3d"jimu-icon helpBtn" data-dojo-attach-point\x3d"helpBtnForArea"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaByRefSystemCreateGRGButton\'\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaByRefSystemClearGRGButton\'\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          GRG From Area From Non Standard Grid\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaFromNonStandardPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgAreaByNonStandardPanelBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaFromNonStandardTitle}"\x3e\r\n          ${nls.newGRGAreaFromNonStandardTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgAreaByNonStandardSettingsButton"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- GRG Layer Name --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"Area GRG by Reference System"\x3eArea GRG from Non\r\n              Standard Grid To Do\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          GRG From Point by Size Node\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointBySizePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgPointBySizePanelBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointBySizeTitle}"\x3e\r\n          ${nls.newGRGPointBySizeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgPointBySizeSettingsButton"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" style\x3d"width: 100%" title\x3d"${nls.coordInputLabel}"\r\n              data-dojo-attach-point\x3d"grgPointBySizeCoordInputLabel"\x3e${nls.coordInputLabel}\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-attach-point\x3d"newGRGPointBySizeOriginCoords" /\x3e\r\n              \x3cdiv title\x3d"${nls.formatIconTooltip}" class\x3d"jimu-icon settingBtn" data-dojo-attach-point\x3d"grgPointBySizeCoordFormatButton"\x3e\x3c/div\x3e\r\n              \x3cdiv title\x3d"${nls.addPointToolTip}" class\x3d"jimu-icon editBtn" data-dojo-attach-point\x3d"grgPointBySizeAddPointBtn"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointBySizeCellHorizontal" value\x3d"5"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointBySizeCellVertical" value\x3d"5"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointBySizeCellWidth" value\x3d"1000"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointBySizeCellHeight" value\x3d"1000"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Angle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridAngle}"\x3e${nls.gridAngle}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n              data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\'\r\n              data-dojo-attach-point\x3d"gridAnglePoint" value\x3d"0"\x3e\x3c/input\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointBySizeCreateGRGButton\'\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointBySizeClearGRGButton\'\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          GRG From Point By Reference System\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointByRefSystemPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgPointByRefSystemPanelBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointByRefSystemTitle}"\x3e\r\n          ${nls.newGRGPointByRefSystemTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgPointByRefSystemSettingsButton"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" style\x3d"width: 100%" title\x3d"${nls.coordInputLabel}"\r\n              data-dojo-attach-point\x3d"grgPointByRefSystemCoordInputLabel"\x3e${nls.coordInputLabel}\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" data-dojo-attach-point\x3d"newGRGPointByRefSystemOriginCoords" /\x3e\r\n              \x3cdiv title\x3d"${nls.formatIconTooltip}" class\x3d"jimu-icon settingBtn" data-dojo-attach-point\x3d"grgPointByRefSystemCoordFormatButton"\x3e\x3c/div\x3e\r\n              \x3cdiv title\x3d"${nls.addPointToolTip}" class\x3d"jimu-icon editBtn" data-dojo-attach-point\x3d"grgPointByRefSystemAddPointBtn"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Size DropDown --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridSize}"\x3e${nls.gridSize}\x3c/div\x3e\r\n            \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"grgPointByRefSystemGridSize"\x3e\r\n              \x3coption value\x3d"UTM" selected\x3d"selected"\x3e${nls.UTMZoneandBand}\x3c/option\x3e\r\n              \x3coption value\x3d"100000"\x3e${nls.100000m}\x3c/option\x3e\r\n              \x3coption value\x3d"10000"\x3e${nls.10000m}\x3c/option\x3e\r\n              \x3coption value\x3d"1000"\x3e${nls.1000m}\x3c/option\x3e\r\n              \x3coption value\x3d"100"\x3e${nls.100m}\x3c/option\x3e\r\n              \x3coption value\x3d"10"\x3e${nls.10m}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByRefCellHorizontal" value\x3d"5"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByRefCellVertical" value\x3d"5"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Label Format--\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"grgPointByRefSystemLabelFormat"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.labelFormat}"\x3e${nls.labelFormat}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: calc(100% - 20px)" data-dojo-attach-point\x3d"grgPointByRefLabelFormat"\r\n              value\x3d"Z"\x3e\x3c/input\x3e\r\n            \x3cdiv title\x3d"${nls.helpIconTooltip}" class\x3d"jimu-icon helpBtn" data-dojo-attach-point\x3d"helpBtnForPt"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByRefSystemCreateGRGButton\'\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByRefSystemClearGRGButton\'\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          GRG From Point By Time and Speed\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointByTimePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgPointByTimeBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointByTimeTitle}"\x3e\r\n          ${nls.newGRGPointByTimeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgPointByTimeSettingsButton"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" style\x3d"width: 100%" title\x3d"${nls.coordInputLabel}"\r\n              data-dojo-attach-point\x3d"grgPointByTimeCoordInputLabel"\x3e${nls.coordInputLabel}\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" data-dojo-attach-point\x3d"newGRGPointByTimeOriginCoords" /\x3e\r\n              \x3cdiv title\x3d"${nls.formatIconTooltip}" class\x3d"jimu-icon settingBtn" data-dojo-attach-point\x3d"grgPointByTimeCoordFormatButton"\x3e\x3c/div\x3e\r\n              \x3cdiv title\x3d"${nls.addPointToolTip}" class\x3d"jimu-icon editBtn" data-dojo-attach-point\x3d"grgPointByTimeAddPointBtn"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!-- Time --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"timeContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.time}"\x3e${nls.time}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeTime" value\x3d"1" disabled\x3d\'false\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d""\x3e\x26nbsp;\x3c/div\x3e\r\n              \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"grgPointByTimeTimeUnits"\x3e\r\n                \x3coption value\x3d"3600" selected\x3d"selected"\x3e${nls.hours}\x3c/option\x3e\r\n                \x3coption value\x3d"60"\x3e${nls.minutes}\x3c/option\x3e\r\n                \x3coption value\x3d"1"\x3e${nls.seconds}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!-- Rate --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"rateContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rate}"\x3e${nls.rate}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeRate" value\x3d"10" disabled\x3d\'false\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d""\x3e\x26nbsp;\x3c/div\x3e\r\n              \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"grgPointByTimeRateUnits"\x3e\r\n                \x3coption value\x3d"0.3048;1"\x3e${nls.ftPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"0.3048;3600"\x3e${nls.ftPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1000;1"\x3e${nls.kmPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1000;3600" selected\x3d"selected"\x3e${nls.kmPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1;1"\x3e${nls.mPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1;3600"\x3e${nls.mPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1609.344;1"\x3e${nls.miPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1609.344;3600"\x3e${nls.miPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1852;1"\x3e${nls.nMPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1852;3600"\x3e${nls.nMPerHour}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!-- Set number of cells checkbox --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidthAndPadding"\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"setNumberRowsColumnsTime"\r\n              checked\x3d"true" /\x3e\r\n            \x3clabel class\x3d"GRGCellsLabel" data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.numberRowsColumnsLabel}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Number of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"numberOfCellsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeCellHorizontal" value\x3d"10" disabled\x3d\'false\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeCellVertical" value\x3d"10" disabled\x3d\'false\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeCellWidth" value\x3d"1000" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeCellHeight" value\x3d"1000" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rotation --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rotation}"\x3e${nls.rotation}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeRotation" value\x3d"0" disabled\x3d\'false\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByTimeCreateGRGButton\'\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByTimeClearGRGButton\'\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          Settings\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"GRGDrafterHidden GRGDrafterFullHeight" data-dojo-attach-point\x3d"settingsPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingHeader"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"gridSettingsPanelBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.settingsTitle}"\x3e\r\n          ${nls.settingsTitle}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"GRGDrafterSettingsNode" data-dojo-attach-point\x3d"gridSettingsNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          Publish\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"GRGDrafterHidden GRGDrafterFullHeight" data-dojo-attach-point\x3d"publishPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingHeader"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"publishPanelBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.publishTitle}"\x3e\r\n          ${nls.publishTitle}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- GRG Layer Name --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.GRGLayerName}"\x3e${nls.GRGLayerName}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n              data-dojo-attach-point\x3d"addGRGNameArea" data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_]*\', invalidMessage:\'${nls.invalidGRGLayerName}\', missingMessage:\'${nls.missingGRGLayerName}\'"\r\n              required\x3d"true"\x3e\x3c/input\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publish GRG Button --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterBtnContainer"\x3e\r\n            \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizePublishGRGButton\'\x3e${nls.publishGRGBtn}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Show Labels Toggle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv\x3e\r\n              \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.showLabels}"\x3e${nls.gridSettings.showLabels}\x3c/div\x3e\r\n              \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"settingsShowLabelsToggle"\r\n                checked\x3d"true" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publishing Message --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterPublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/css/style.css":'.GRGDrafterMainContainer {min-width: 222px;}.jimu-widget-GRGDrafter .GRGDrafterFullHeight {height: 100%;}.jimu-widget-GRGDrafter .GRGDrafterFullWidth {width: 100%;}.jimu-widget-GRGDrafter .GRGDrafterFullWidthAndPadding {width: 100%; padding-top: 12px; padding-bottom: 8px;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthLeft {width: 50%;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-left: 10px; width: 50%;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-left: 0px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-right: 2px;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthContainer {display: flex;}.jimu-widget-GRGDrafter .GRGDrafterEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-GRGDrafter .GRGDrafterPointer {cursor: pointer;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRowBlock {display: block;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRow {margin: 10px 10px 10px 10px; display: inline-flex;}.jimu-widget-GRGDrafter .GRGDrafterMainButtonIcon {margin-top: 6px; height: 16px; width: 16px;}.jimu-widget-GRGDrafter .GRGDrafterButtonIcon {height: 24px; width: 24px; float: left;}.jimu-widget-GRGDrafter .GRGFloatRight {float: right;}.jimu-rtl .jimu-widget-GRGDrafter .GRGFloatRight {float: left;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRowItem {width: calc(100% - 40px); margin: 5px 25px 5px 25px; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterButtonLabel {float: left; width: calc(100% - 30px); padding: 5px 5px 0px 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterButtonLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterDoubleButtonLabel {float: left; width: calc(100% - 65px); padding: 5px 5px 0px 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterDoubleButtonLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterToggleLabel {float: left; width: calc(100% - 35px); padding: 5px 5px 0px 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterToggleLabel {float: right; padding: 1px 0 0 0;}.jimu-widget-GRGDrafter .GRGDrafterInputLabel {float: left; padding: 5px 5px 0px 0;}.jimu-widget-GRGDrafter .GRGNewRightButton {background: url("./images/arrow-right_black.png") no-repeat;}.jimu-rtl .jimu-widget-GRGDrafter .GRGNewRightButton {transform: rotate(180deg); float: left;}.jimu-widget-GRGDrafter .GRGNewRightButton:hover {background: url("./images/arrow-right_black_hover.png") no-repeat;}.jimu-widget-GRGDrafter .GRGNewDownButton {background: url("./images/arrow-down_black.png") no-repeat; margin-top: 9px;}.jimu-widget-GRGDrafter .GRGNewDownButton:hover {background: url("./images/arrow-down_black_hover.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByDimension {background: url("./images/byDimension.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByRefSystemButton {background: url("./images/byReferenceSystem.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByTimeButton {background: url("./images/byTime.png") no-repeat;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterButtonIcon {float: right;}.jimu-widget-GRGDrafter .GRGDrafterPublishMessage {float: left; line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: break-all;}.jimu-widget-GRGDrafter .GRGDrafterPanelRow {margin: 10px 10px 10px 10px; display: block;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-GRGDrafter .GRGDrafterSettingsIcon {background-image: url(\'./images/settings_black.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterSettingsIcon:Hover {background-image: url(\'./images/settings_black_hover.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .settingsLocked {background-image: url(\'./images/settings_locked.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .dijitTextBox .dijitInputInner {height: 18px !important; text-align: left; line-height: 0px !important;}.jimu-widget-GRGDrafter .dijitTextBoxFocused .dijitInputContainer {background: transparent;}.jimu-widget-GRGDrafter .GRGDrafterHidden {display: none;}.jimu-rtl .jimu-widget-GRGDrafter .GRGCellsLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterSettingsRow {width: 100%; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterSettingsButtonIcon {margin-top: 10px; height: 20px; width: 25px; float: right; background-size: 45px;}.jimu-widget-GRGDrafter .GRGDrafterLabelSettingsDownButton {background: url("../images/down-arrow.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterLabelSettingsUpButton {background: url("../images/up-arrow.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterSettingsNode {width: 100%; height: calc(100% - 30px); display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterSettingsContainer {margin: 10px; display: inline-block; width: calc(100% - 20px);}.jimu-widget-GRGDrafter .GRGDrafterSettingRow {padding-bottom: 6px; padding-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterSettingRow {padding-right: 2px;}.jimu-widget-GRGDrafter .GRGDrafterSettingRowPaddingTop20 {padding-top: 20px;}.jimu-widget-GRGDrafter .GRGDrafterDropdownLabel {padding-bottom: 5px;}.jimu-widget-GRGDrafter .GRGDrafterSettingHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-GRGDrafter .GRGDrafterBackButton {width: 25%;}.jimu-widget-GRGDrafter .GRGDrafterTitleDiv {line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {background-image: url(\'./images/left-arrow_black.png\'); float: left; margin: 0px 5px 0px 0px; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow:hover {background-image: url(\'./images/left-arrow_black_hover.png\');}.jimu-widget-GRGDrafter .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #fafafc;}.jimu-widget-GRGDrafter .dijitSelect .dijitButtonContentsDartTheme {background-color: inherit;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButton {background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButtonDartTheme {background-color: rgba(0, 0, 0, 0.5) !important;}.jimu-widget-GRGDrafter .dijitMenuItem {color: #7989a0;}.jimu-widget-GRGDrafter .dijitSelect .dijitInputField {margin-right: 8px;}.jimu-widget-GRGDrafter .switch-toggle-group {padding: 5px;}.jimu-widget-GRGDrafter .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-GRGDrafter .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.jimu-widget-GRGDrafter .jimu-tab\x3e.control\x3e.tab {background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color: #898989; font-family: "Avenir Medium"; font-size: 12px; line-height: 26px !important; ;}.jimu-widget-GRGDrafter .jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 3px solid #000; font-family: "Avenir Heavy"; color: #000000;}.jimu-widget-GRGDrafter .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 12px; margin: 20px 0 10px 0;}.jimu-widget-GRGDrafter .tabs .unit-item {margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;}.jimu-widget-GRGDrafter .dijitTextBox .dijitPlaceHolder {font-size: 12px;}.jimu-widget-GRGDrafter .dijitTextBoxError {border-color: #d9dde0 !important; box-shadow: inset 0 0 0 2px #d46464;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterInputLabel {float: right; padding: 7px 5px 0px 0px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {float: right; margin: 0px 0px 00px 10px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterSettingsIcon {float: left;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {transform: rotate(180deg);}.jimu-rtl .jimu-widget-GRGDrafter .dijitSelect .dijitInputField {margin-left: 8px; margin-right: 0;}.SubTitle {font-weight: bold;}.jimu-widget-GRGDrafter .settingBtn {display: inline-block; background: url(./images/settings_black.png); background-repeat: no-repeat; background-color: transparent; width: 15px; height: 15px; margin: 7px 0px -3px 5px;}.jimu-rtl .jimu-widget-GRGDrafter .settingBtn {margin-right: 5px;}.jimu-widget-GRGDrafter .settingBtn:hover {background: url(\'./images/settings_black_hover.png\');}.jimu-widget-GRGDrafter .editBtn {float: right; background: url(./images/draw_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-rtl .jimu-widget-GRGDrafter .editBtn {float: left;}.jimu-widget-GRGDrafter .editBtn:hover {background: url(\'./images/draw_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-edit-active {background: url(\'./images/draw_gray_hover.png\'); background-repeat: no-repeat; border: none;}.jimu-widget-GRGDrafter .helpBtn {float: right; background: url(./images/help_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .helpBtn {float: left;}.jimu-widget-GRGDrafter .helpBtn:hover {float: right; background: url(./images/help_black_hover.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .helpBtn:hover {float: left;}.jimu-widget-GRGDrafter .polygonBtn {display: inline-block; background: url(./images/polygon_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .polygonBtn:hover {background: url(\'./images/polygon_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-polygon-active {background: url(\'./images/polygon_gray_hover.png\'); background-repeat: no-repeat; border: none;}.jimu-widget-GRGDrafter .extentBtn {display: inline-block; background: url(./images/extent_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .extentBtn:hover {background: url(\'./images/extent_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-extent-active {background: url(\'./images/extent_gray_hover.png\'); background-repeat: no-repeat; border: none;}.jimu-widget-GRGDrafter .add-with-icon {vertical-align: text-top !important;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-GRGDrafter .GRGDrafterBtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterBtnContainer {padding-right: 2px;}.jimu-widget-GRGDrafter .controlGroupHidden {display: none;}.jimu-widget-GRGDrafter .controlItem {display: flex;}.jimu-widget-GRGDrafter .jimu-btn {margin-bottom: 6px;}.jimu-widget-GRGDrafter .dijitSlider {width: calc(100% - 212px); width: -moz-calc(100% - 212px);}.jimu-widget-GRGDrafter .dijitSlider {margin-left: 10px; margin-right: auto; margin-top: 14px;}.jimu-rtl .jimu-widget-GRGDrafter .dijitSlider {margin-left: auto; margin-right: 10px;}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderImageHandleH {top: -10px; width: 20px; height: 20px;}.jimu-widget-GRGDrafter .colorPickerEditor {display: inline-flex; width: 100%;}.jimu-widget-GRGDrafter .percent-display {padding: 7px 0 0 2px;}.jimu-widget-GRGDrafter .colorPickerEditor .jimu-color-picker {display: inline-block; width: 25px; height: 25px;}.jimu-widget-GRGDrafter .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {width: 65px; height: 30px;}.jimu-widget-GRGDrafter .dijitSliderImageHandleH {top: -7px;}.jimu-widget-GRGDrafter .dijitSliderThumbHover {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderProgressBarH,.jimu-widget-GRGDrafter .dijitSlider .dijitSliderLeftBumper {border-color: #000; background-color: #000; background-image: -webkit-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: -o-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px);}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderRemainingBarH,.jimu-widget-GRGDrafter .dijitSlider .dijitSliderRightBumper {border-color: #d7d7d7; background-color: #d7d7d7;}.jimu-widget-GRGDrafter .colorPickerEditor .trans {font-family: "Avenir Light"; font-size: 12px; padding: 5px 5px 0 5px; letter-spacing: 0.33px;}.jimu-widget-GRGDrafter .sliderbar {width: 60px;}.jimu-widget-GRGDrafter .style-selector .clearFix {*overflow: hidden; *zoom: 1}.jimu-widget-GRGDrafter .style-selector .clearFix:after {display: table; content: ""; width: 0; clear: both}.jimu-widget-GRGDrafter .style-selector .hide {display: none}.jimu-widget-GRGDrafter .settings-container {}.jimu-widget-GRGDrafter .settings-container .title {font-size: 14px; color: #000000; letter-spacing: 0.39px; margin-bottom: 20px;}.jimu-widget-GRGDrafter .settings-container .label {font-size: 12px; color: #282828; letter-spacing: 0.33px; line-height: 30px;}.jimu-widget-GRGDrafter .style-selector .label {margin: 0 0; max-width: 160px; line-height: 30px; font-size: 12px; vertical-align: middle; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-GRGDrafter .style-selector .dijitTextBox,.jimu-widget-GRGDrafter .style-selector .dijitSelect {width: 100%; height: 30px; border: 1px solid #D7D7D7;}.jimu-widget-GRGDrafter .style-selector .jimu-color-picker {width: 40px !important; height: 30px !important; border: 1px solid #D7D7D7 !important;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitArrowButtonContainer {border: none;}.jimu-widget-GRGDrafter .style-selector .dijitDownArrowButton .dijitButtonContents,.jimu-widget-GRGDrafter .style-selector .dijitComboBox .dijitDownArrowButton {border: none;}.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitInputInner {padding: 1px 0 0 0; font-size: 12px; font-style: normal; height: 28px; line-height: 28px;}.jimu-widget-GRGDrafter .style-selector .dijitSelectLabel {font-size: 12px;}.jimu-widget-GRGDrafter .style-selector .dijitSelect,.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitButtonContents,.jimu-widget-GRGDrafter .style-selector .dijitTextBox,.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitButtonNode {background-color: transparent;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitArrowButton {background-color: transparent;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitInputField {padding: 0px 10px;}.jimu-widget-GRGDrafter .jimu-image-chooser .display-text {width: 100%; font-size: 12px; color: #4A4A4A; letter-spacing: 0.33px; background-color: #FFF; text-align: center;}.jimu-image-chooser:hover .hint .display-text {color: #FFF;}.jimu-widget-GRGDrafter .dijitTextBoxFocused {border: 1px solid #D7D7D7 !important; box-shadow: 0 0 0 0 !important;}.jimu-widget-GRGDrafter .dijitTextBox .dijitInputField {padding: 2px 7px;}@media screen and (-ms-high-contrast: active),(-ms-high-contrast: none) {.jimu-widget-GRGDrafter .dijitTextBox .dijitInputField {padding: 0px;}}.jimu-widget-GRGDrafter .dijitSelectFocused .dijitArrowButton .dijitArrowButtonInner {background-position: -35px 53%;}.jimu-widget-GRGDrafter .text-size .text-size-group\x3e.dijitComboBox.dijitValidationTextBox {width: 80px;}.jimu-widget-GRGDrafter .text-size .text-size-group\x3etable {width: 140px;}.jimu-widget-GRGDrafter .halo-size .halo-size-group\x3e.dijitComboBox.dijitValidationTextBox {width: 80px;}.jimu-widget-GRGDrafter .style-selector .setting-items {height: 30px; width: 100%; margin: 10px 0; vertical-align: middle; white-space: nowrap;}.jimu-widget-GRGDrafter .style-selector .setting-wapper {width: 230px;}.jimu-widget-GRGDrafter .style-selector .background-btn,.jimu-widget-GRGDrafter .style-selector .text-color-btn {width: 40px; height: 30px; overflow: hidden;}.jimu-widget-GRGDrafter .style-selector .halo-color-btn {width: 50px; height: 30px; overflow: hidden; padding-left: 5px; padding-right: 5px;}.jimu-widget-GRGDrafter .style-selector .align-group {margin-right: 8px; margin-left: -3px;}.jimu-rtl .jimu-widget-GRGDrafter .style-selector .align-group {margin-right: -3px; margin-left: 8px;}.jimu-widget-GRGDrafter .style-selector .font-group-btns {margin-left: 6px; margin-right: 6px;}.jimu-widget-GRGDrafter .style-selector .align-btn,.jimu-widget-GRGDrafter .style-selector .font-btn {height: 30px; margin: 0 3px;}.jimu-widget-GRGDrafter .style-selector .font-btn {width: 30px;}.jimu-widget-GRGDrafter .style-selector .align-btn {width: 30px;}.jimu-widget-GRGDrafter .style-selector .image-btn {width: 120px; height: 30px; border: 1px solid #D7D7D7;}.jimu-widget-GRGDrafter .style-selector .bold {background: url("./images/font_B.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .bold.selected {background: url("./images/font_B_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .italic {background: url("./images/font_I.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .italic.selected {background: url("./images/font_I_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .underline {background: url("./images/font_U.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .underline.selected {background: url("./images/font_U_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .halo-toggle-group {padding: 5px;}.jimu-widget-GRGDrafter .halo-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-GRGDrafter .halo-toggle-group .halo-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; margin-top: 6px; margin-left: 5px;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.DartTheme .jimu-widget-GRGDrafter .dijitSelectDisabled,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled .dijitInputContainer,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled {background-color: #4c4c4c;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipContainer {background-color: #4c4c4c; background-image: -webkit-linear-gradient(bottom, rgb(76, 76, 76) 0px, #4c4c4c 10px); border: 1px solid #ffffff; color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .jimu-widget-subtitle {color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipConnector {background-image: url(images/tooltip.png);}.claro .dijitPopup.dijitTooltipDialogPopup .jimu-input {vertical-align: bottom;}.claro .dijitPopup.dijitTooltipDialogPopup .settingsContainer {margin-top: 6px;}.claro .dijitPopup.dijitTooltipDialogPopup .checkbox.jimu-float-leading.jimu-icon.jimu-icon-checkbox {margin-right: 6px;}.claro .dijitPopup.dijitTooltipDialogPopup span.jimu-widget-subtitle {display: inline-block; margin-bottom: 6px;}',
"*now":function(m){m(['dojo/i18n!*preload*widgets/GriddedReferenceGraphic/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo dojo/_base/declare jimu/BaseWidget dojo/_base/array dojo/_base/lang dojo/_base/kernel dojo/dom-style dojo/dom-class dojo/dom-construct dojo/on dojo/keys dojo/string dojo/topic dojo/_base/html dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup dijit/Menu dijit/MenuItem jimu/dijit/Message jimu/dijit/LoadingIndicator jimu/LayerInfos/LayerInfos jimu/utils esri/IdentityManager esri/arcgis/Portal esri/Color esri/dijit/util/busyIndicator esri/graphic esri/geometry/geometryEngine esri/geometry/Extent esri/geometry/Point esri/geometry/Polyline esri/geometry/webMercatorUtils esri/layers/FeatureLayer esri/layers/GraphicsLayer esri/layers/LabelClass esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/TextSymbol esri/toolbars/draw esri/toolbars/edit esri/renderers/SimpleRenderer ./js/GridSettings ./js/CoordinateInput ./js/drawGRG ./js/DrawFeedBack ./js/EditOutputCoordinate ./js/geometry-utils ./js/geometryUtils ./js/mgrs-utils ./js/mgrs dijit/form/NumberTextBox dijit/form/RadioButton dijit/form/NumberSpinner".split(" "),function(m,
k,f,n,a,b,e,g,p,l,r,d,h,c,q,t,u,y,B,G,E,I,H,D,x,z,v,w,A,C,J,N,O,K,W,Z,P,R,Q,aa,V,S,T,L,M,F,ca,da,U,ba,X,Y){return k([f,q,t],{baseClass:"jimu-widget-GRGDrafter",_lastOpenPanel:"mainPage",_currentOpenPanel:"mainPage",_gridSettingsInstance:null,_cellShape:"default",_labelStartPosition:"lowerLeft",_cellUnits:"meters",_labelType:"alphaNumeric",_labelTypeWithRefSys:"gridReferenceSystem",_labelDirection:"horizontal",_gridOrigin:"center",_referenceSystem:"MGRS",_showLabels:!0,_GRGAreaFillSymbol:null,_cellTextSymbol:null,
angle:0,featureLayerInfo:null,centerPoint:[],geodesicGrid:!0,postMixInProperties:function(){this.nls.common={};a.mixin(this.nls.common,window.jimuNls.common)},constructor:function(a){k.safeMixin(this,a)},postCreate:function(){String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!==typeof a[c]?a[c]:b})});window.isRTL&&"ar"===b.locale?(e.set(this.helpBtnForArea,"transform","rotateY(180deg)"),e.set(this.helpBtnForPt,
"transform","rotateY(180deg)")):(e.set(this.helpBtnForArea,"transform",""),e.set(this.helpBtnForPt,"transform",""));this.inherited(arguments);this.extentAreaFillSymbol={type:"esriSFS",style:"esriSFSSolid",color:[155,155,155,0],outline:{color:[0,0,255,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}};this.pointSymbol={color:[255,0,0,255],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}};this._graphicsLayerGRGExtent=new Z({id:"graphicsLayerGRGExtent"});
this._graphicsLayerGRGTimeExtent=new Z({id:"graphicsLayerGRGTimeExtent"});this._extentSym=new Q(this.extentAreaFillSymbol);this._ptSym=new R(this.pointSymbol);this.GRGArea=new W({layerDefinition:{geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"grid",alias:"grid",type:"esriFieldTypeString"}],drawingInfo:{renderer:{type:"simple",symbol:this.gridSymbol},transparency:0,labelingInfo:[{labelExpression:"[grid]",labelExpressionInfo:{value:"{grid}"},
format:null,fieldInfos:null,useCodedValues:!1,maxScale:0,minScale:0,where:null,sizeInfo:null,labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:this._cellTextSymbol}]},extent:{xmin:-1.8746028312877923E7,ymin:-6027547.894280539,xmax:1.882429982984192E7,ymax:1.2561937384669386E7,spatialReference:{wkid:102100}}}},{id:"Gridded-Reference-Graphic",outFields:["*"],showLabels:!0});this.createGraphicDeleteMenu();this.map.addLayers([this._graphicsLayerGRGTimeExtent,this.GRGArea,this._graphicsLayerGRGExtent]);
var c;if(this.GRGArea.loaded)c=H.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic"),c.enablePopup(),this._showLabels&&c.showLabels();else this.GRGArea.on("load",a.hitch(this,function(){c=H.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");c.enablePopup();this._showLabels&&c.showLabels()}));this.grgPointBySizeCoordTool=new M({nls:this.nls,appConfig:this.appConfig,style:"width: calc(100% - 60px);"},this.newGRGPointBySizeOriginCoords);this.grgPointBySizeCoordTool.inputCoordinate.formatType=
"DD";this.grgPointBySizeCoordinateFormat=new u({content:new da({nls:this.nls}),style:"width: 400px"});"DartTheme"===this.appConfig.theme.name&&g.add(this.grgPointBySizeCoordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.grgPointByRefSystemCoordTool=new M({nls:this.nls,appConfig:this.appConfig,style:"width: calc(100% - 60px);"},this.newGRGPointByRefSystemOriginCoords);this.grgPointByRefSystemCoordTool.inputCoordinate.formatType="DD";this.grgPointByRefSystemCoordinateFormat=
new u({content:new da({nls:this.nls}),style:"width: 400px"});"DartTheme"===this.appConfig.theme.name&&g.add(this.grgPointByRefSystemCoordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.grgPointByTimeCoordTool=new M({nls:this.nls,appConfig:this.appConfig,style:"width: calc(100% - 60px);"},this.newGRGPointByTimeOriginCoords);this.grgPointByTimeCoordTool.inputCoordinate.formatType="DD";this.grgPointByTimeCoordinateFormat=new u({content:new da({nls:this.nls}),style:"width: 400px"});
"DartTheme"===this.appConfig.theme.name&&g.add(this.grgPointByTimeCoordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt_AreaBySize=new V(this.map);this.dt_PointBySize=new ca(this.map,this.grgPointBySizeCoordTool.inputCoordinate.util);this.dt_PointByRefSystem=new ca(this.map,this.grgPointByRefSystemCoordTool.inputCoordinate.util);this.dt_PointByTime=new ca(this.map,this.grgPointByTimeCoordTool.inputCoordinate.util);this.dt_AreaByRefSystem=new V(this.map);this.editToolbar=
new S(this.map,{uniformScaling:!0,allowAddVertices:!0,allowDeleteVertices:!0});this._initLoading();this._handleClickEvents();this._createGridSettings()},startup:function(){this.inherited(arguments);this.busyIndicator=w.create({target:this.domNode.parentNode.parentNode.parentNode,backgroundOpacity:0});this._setTheme()},onOpen:function(){},onClose:function(){this.grgPointBySizeCoordinateFormat&&this.grgPointBySizeCoordinateFormat.domNode.offsetParent&&y.close(this.grgPointBySizeCoordinateFormat);this.grgPointByRefSystemCoordinateFormat&&
this.grgPointByRefSystemCoordinateFormat.domNode.offsetParent&&y.close(this.grgPointByRefSystemCoordinateFormat);this.grgPointByTimeCoordinateFormat&&this.grgPointByTimeCoordinateFormat.domNode.offsetParent&&y.close(this.grgPointByTimeCoordinateFormat)},_initLoading:function(){this.loading=new I({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},_handleClickEvents:function(){this.own(l(this.newGRGAreaButton,"click",a.hitch(this,function(){g.contains(this.newGRGAreaButton,"GRGNewRightButton")?
(c.removeClass(this.fromAreaContainer,"controlGroupHidden"),c.removeClass(this.newGRGAreaButton,"GRGNewRightButton"),c.addClass(this.newGRGAreaButton,"GRGNewDownButton"),c.addClass(this.fromPointContainer,"controlGroupHidden"),c.removeClass(this.newGRGPointButton,"GRGNewDownButton"),c.addClass(this.newGRGPointButton,"GRGNewRightButton")):(c.addClass(this.fromAreaContainer,"controlGroupHidden"),c.addClass(this.newGRGAreaButton,"GRGNewRightButton"),c.removeClass(this.newGRGAreaButton,"GRGNewDownButton"))})));
this.own(l(this.newGRGPointButton,"click",a.hitch(this,function(){g.contains(this.newGRGPointButton,"GRGNewRightButton")?(c.removeClass(this.fromPointContainer,"controlGroupHidden"),c.removeClass(this.newGRGPointButton,"GRGNewRightButton"),c.addClass(this.newGRGPointButton,"GRGNewDownButton"),c.addClass(this.fromAreaContainer,"controlGroupHidden"),c.removeClass(this.newGRGAreaButton,"GRGNewDownButton"),c.addClass(this.newGRGAreaButton,"GRGNewRightButton")):(c.addClass(this.fromPointContainer,"controlGroupHidden"),
c.addClass(this.newGRGPointButton,"GRGNewRightButton"),c.removeClass(this.newGRGPointButton,"GRGNewDownButton"))})));this.own(l(this.newAreaGRGBySizeButton,"click",a.hitch(this,function(){this._showPanel("grgAreaBySize")})));this.own(l(this.newAreaGRGFromRefSystemButton,"click",a.hitch(this,function(){this._showPanel("grgAreaByRefSystem")})));this.own(l(this.newPointGRGBySizeButton,"click",a.hitch(this,function(){this._showPanel("grgPointBySize")})));this.own(l(this.newPointGRGFromRefSystemButton,
"click",a.hitch(this,function(){this._showPanel("grgPointByRefSystem")})));this.own(l(this.newPointGRGFromTimeButton,"click",a.hitch(this,function(){this._showPanel("grgPointByTime")})));this.own(l(this.grgAreaBySizePanelBackButton,"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgAreaBySizeSettingsButton.title=this.nls.lockSettings,c.addClass(this.grgAreaBySizeSettingsButton,"settingsLocked"),c.removeClass(this.grgAreaBySizeSettingsButton,"GRGDrafterSettingsIcon")):
this.own(l(this.grgAreaBySizeSettingsButton,"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")})));this.own(l(this.grgAreaBySizeDrawPolygonIcon,"click",a.hitch(this,this._grgAreaBySizeDrawPolygonIconClicked)));this.own(l(this.grgAreaBySizeDrawExtentIcon,"click",a.hitch(this,this._grgAreaBySizeDrawExtentIconClicked)));this.own(l(this.dt_AreaBySize,"draw-complete",a.hitch(this,this._dt_AreaBySizeComplete)));this.own(l(this.grgAreaBySizeCreateGRGButton,
"click",a.hitch(this,this._grgAreaBySizeCreateGRGButtonClicked)));this.own(l(this.grgAreaBySizeClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(l(this.setNumberRowsColumns,"click",a.hitch(this,this._setNumberRowsColumnsCheckBoxChanged)));this.own(l(this.cellHorizontal,"blur",a.hitch(this,function(){this.cellHorizontal.isValid()&&this._graphicsLayerGRGExtent.graphics[0]&&(0===this.angle?this._calculateCellWidthAndHeight(U.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent())):
this._calculateCellWidthAndHeight(this._graphicsLayerGRGExtent.graphics[0].geometry))})));this.own(l(this.cellVertical,"blur",a.hitch(this,function(){this.cellVertical.isValid()&&this._graphicsLayerGRGExtent.graphics[0]&&(0===this.angle?this._calculateCellWidthAndHeight(U.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent())):this._calculateCellWidthAndHeight(this._graphicsLayerGRGExtent.graphics[0].geometry))})));this.own(l(this.grgAreaBySizeRotation,"keyup",a.hitch(this,
function(){setTimeout(a.hitch(this,function(){if(this.grgAreaBySizeRotation.isValid()&&!isNaN(this.grgAreaBySizeRotation.value)&&this._graphicsLayerGRGExtent.graphics[0]){var a=this.grgAreaBySizeRotation.getValue()-this.angle,a=C.rotate(this._graphicsLayerGRGExtent.graphics[0].geometry,-1*a);this._graphicsLayerGRGExtent.clear();a=new A(a,this._extentSym);this._graphicsLayerGRGExtent.add(a);this.angle=this.grgAreaBySizeRotation.getValue();this.editToolbar.deactivate()}}),1E3)})));this.own(l(this.grgAreaByRefSystemPanelBackButton,
"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgAreaByRefSystemSettingsButton.title=this.nls.lockSettings,c.addClass(this.grgAreaByRefSystemSettingsButton,"settingsLocked"),c.removeClass(this.grgAreaByRefSystemSettingsButton,"GRGDrafterSettingsIcon")):this.own(l(this.grgAreaByRefSystemSettingsButton,"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")})));this.own(l(this.grgAreaByRefSystemDrawIcon,
"click",a.hitch(this,this._grgAreaByRefSystemDrawIconClicked)));this.own(l(this.grgAreaByRefSystemCreateGRGButton,"click",a.hitch(this,this._grgAreaByRefSystemCreateGRGButtonClicked)));this.own(l(this.grgAreaByRefSystemClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(l(this.dt_AreaByRefSystem,"draw-complete",a.hitch(this,this._dt_AreaByRefSystemComplete)));this.own(l(this.grgAreaByRefSystemGridSize,"change",a.hitch(this,function(){switch(this.grgAreaByRefSystemGridSize.getValue()){case "UTM":this.grgAreaByRefLabelFormat.value=
"Z";break;case "100000":this.grgAreaByRefLabelFormat.value="ZS";break;default:this.grgAreaByRefLabelFormat.value="ZSXY"}})));this.own(l(this.grgPointBySizePanelBackButton,"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointBySizeSettingsButton.title=this.nls.lockSettings,c.addClass(this.grgPointBySizeSettingsButton,"settingsLocked"),c.removeClass(this.grgPointBySizeSettingsButton,"GRGDrafterSettingsIcon")):this.own(l(this.grgPointBySizeSettingsButton,
"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")})));this.own(l(this.grgPointBySizeCreateGRGButton,"click",a.hitch(this,this._grgPointBySizeCreateGRGButtonClicked)));this.own(l(this.grgPointBySizeClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(l(this.grgPointBySizeAddPointBtn,"click",a.hitch(this,this._grgPointBySizeDrawButtonClicked)));this.own(l(this.dt_PointBySize,"draw-complete",a.hitch(this,this._dt_PointBySizeComplete)));
this.own(this.grgPointBySizeCoordTool.inputCoordinate.watch("outputString",a.hitch(this,function(a,b,c){this.grgPointBySizeCoordTool.manualInput||this.grgPointBySizeCoordTool.set("value",c)})));this.own(this.dt_PointBySize.watch("startPoint",a.hitch(this,function(a,b,c){this.grgPointBySizeCoordTool.inputCoordinate.set("coordinateEsriGeometry",c);this.dt_PointBySize.addStartGraphic(c,this._ptSym,this._graphicsLayerGRGExtent)})));this.own(l(this.grgPointBySizeCoordTool,"keyup",a.hitch(this,this._grgPointBySizeCoordToolKeyWasPressed)));
this.own(l(this.grgPointBySizeCoordFormatButton,"click",a.hitch(this,this._grgPointBySizeCoordFormatButtonClicked)));this.own(l(this.grgPointBySizeCoordinateFormat.content.applyButton,"click",a.hitch(this,this._grgPointBySizeCoordFormatPopupApplyButtonClicked)));this.own(l(this.grgPointBySizeCoordinateFormat.content.cancelButton,"click",a.hitch(this,function(){y.close(this.grgPointBySizeCoordinateFormat)})));this.own(l(this.grgPointByRefSystemPanelBackButton,"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));
this.config.grg.lockSettings?(this.grgPointByRefSystemSettingsButton.title=this.nls.lockSettings,c.addClass(this.grgPointByRefSystemSettingsButton,"settingsLocked"),c.removeClass(this.grgPointByRefSystemSettingsButton,"GRGDrafterSettingsIcon")):this.own(l(this.grgPointByRefSystemSettingsButton,"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")})));this.own(l(this.grgPointByRefSystemCreateGRGButton,"click",a.hitch(this,this._grgPointByRefSystemCreateGRGButtonClicked)));
this.own(l(this.grgPointByRefSystemClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(l(this.grgPointByRefSystemAddPointBtn,"click",a.hitch(this,this._grgPointByRefSystemDrawButtonClicked)));this.own(l(this.dt_PointByRefSystem,"draw-complete",a.hitch(this,this._dt_PointByRefSystemComplete)));this.own(this.grgPointByRefSystemCoordTool.inputCoordinate.watch("outputString",a.hitch(this,function(a,b,c){this.grgPointByRefSystemCoordTool.manualInput||this.grgPointByRefSystemCoordTool.set("value",
c)})));this.own(this.dt_PointByRefSystem.watch("startPoint",a.hitch(this,function(a,b,c){this.grgPointByRefSystemCoordTool.inputCoordinate.set("coordinateEsriGeometry",c);this.dt_PointByRefSystem.addStartGraphic(c,this._ptSym,this._graphicsLayerGRGExtent)})));this.own(l(this.grgPointByRefSystemCoordTool,"keyup",a.hitch(this,this._grgPointByRefSystemCoordToolKeyWasPressed)));this.own(l(this.grgPointByRefSystemCoordFormatButton,"click",a.hitch(this,this._grgPointByRefSystemCoordFormatButtonClicked)));
this.own(l(this.grgPointByRefSystemCoordinateFormat.content.applyButton,"click",a.hitch(this,this._grgPointByRefSystemCoordFormatPopupApplyButtonClicked)));this.own(l(this.grgPointByRefSystemCoordinateFormat.content.cancelButton,"click",a.hitch(this,function(){y.close(this.grgPointByRefSystemCoordinateFormat)})));this.own(l(this.grgPointByRefSystemGridSize,"change",a.hitch(this,function(){switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":this.grgPointByRefLabelFormat.value="Z";break;
case "100000":this.grgPointByRefLabelFormat.value="ZS";break;default:this.grgPointByRefLabelFormat.value="ZSXY"}})));this.own(l(this.grgPointByTimeBackButton,"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointByTimeSettingsButton.title=this.nls.lockSettings,c.addClass(this.grgPointByTimeSettingsButton,"settingsLocked"),c.removeClass(this.grgPointByTimeSettingsButton,"GRGDrafterSettingsIcon")):this.own(l(this.grgPointByTimeSettingsButton,"click",
a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")})));this.own(l(this.grgPointByTimeCreateGRGButton,"click",a.hitch(this,this._grgPointByTimeCreateGRGButtonClicked)));this.own(l(this.grgPointByTimeClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(l(this.grgPointByTimeAddPointBtn,"click",a.hitch(this,this._grgPointByTimeDrawButtonClicked)));this.own(l(this.dt_PointByTime,"draw-complete",a.hitch(this,this._dt_PointByTimeComplete)));
this.own(this.grgPointByTimeCoordTool.inputCoordinate.watch("outputString",a.hitch(this,function(a,b,c){this.grgPointByTimeCoordTool.manualInput||this.grgPointByTimeCoordTool.set("value",c)})));this.own(this.dt_PointByTime.watch("startPoint",a.hitch(this,function(a,b,c){this.grgPointByTimeCoordTool.inputCoordinate.set("coordinateEsriGeometry",c);this.dt_PointByTime.addStartGraphic(c,this._ptSym,this._graphicsLayerGRGExtent)})));this.own(l(this.grgPointByTimeCoordTool,"keyup",a.hitch(this,this._grgPointByTimeCoordToolKeyWasPressed)));
this.own(l(this.grgPointByTimeCoordFormatButton,"click",a.hitch(this,this._grgPointByTimeCoordFormatButtonClicked)));this.own(l(this.grgPointByTimeCoordinateFormat.content.applyButton,"click",a.hitch(this,this._grgPointByTimeCoordFormatPopupApplyButtonClicked)));this.own(l(this.grgPointByTimeCoordinateFormat.content.cancelButton,"click",a.hitch(this,function(){y.close(this.grgPointByTimeCoordinateFormat)})));this.own(l(this.setNumberRowsColumnsTime,"click",a.hitch(this,this._setNumberRowsColumnsTimeCheckBoxChanged)));
this.own(l(this.gridSettingsPanelBackButton,"click",a.hitch(this,function(){this._gridSettingsInstance.onClose();this._showPanel(this._lastOpenPanel)})));this.own(l(this.publishPanelBackButton,"click",a.hitch(this,function(){this.publishMessage.innerHTML="";this.addGRGNameArea.setValue("");this.addGRGNameArea.reset();this._graphicsLayerGRGExtent.show();this._graphicsLayerGRGTimeExtent.clear();this._showPanel(this._lastOpenPanel)})));this.own(l(this.grgAreaBySizePublishGRGButton,"click",a.hitch(this,
function(){this.addGRGNameArea.isValid()?(this.publishMessage.innerHTML="",this._initSaveToPortal(this.addGRGNameArea.value)):this.publishMessage.innerHTML=this.nls.missingLayerNameMessage})));this.own(l(this.settingsShowLabelsToggle,"click",a.hitch(this,function(){var a=H.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");(this._showLabels=this.settingsShowLabelsToggle.checked)?a.showLabels():a.hideLabels()})));this.own(l(this.editToolbar,"graphic-move-stop",a.hitch(this,function(a){this.centerPoint=
a.graphic.geometry.getCentroid()})));this.own(l(this.editToolbar,"rotate-stop",a.hitch(this,function(a){this.angle+=parseFloat(a.info.angle.toFixed(1));this.grgAreaBySizeRotation.setValue(this.angle)})));this.own(l(this.editToolbar,"vertex-move-stop",a.hitch(this,function(a){this.centerPoint=a.graphic.geometry.getCentroid();this._calculateCellWidthAndHeight(U.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()))})));this.own(l(this.editToolbar,"scale-stop",a.hitch(this,function(a){this.centerPoint=
a.graphic.geometry.getCentroid();this._calculateCellWidthAndHeight(a.graphic.geometry)})))},_updateSettingsPage:function(a){c.removeClass(this._gridSettingsInstance.gridShapeContainer,"controlGroupHidden");c.removeClass(this._gridSettingsInstance.gridUnitsContainer,"controlGroupHidden");c.removeClass(this._gridSettingsInstance.labelStyleContainer,"controlGroupHidden");c.removeClass(this._gridSettingsInstance.labelStartPositionContainer,"controlGroupHidden");c.removeClass(this._gridSettingsInstance.labelDirectionContainer,
"controlGroupHidden");c.addClass(this._gridSettingsInstance.gridOriginContainer,"controlGroupHidden");c.addClass(this._gridSettingsInstance.gridRefSystemContainer,"controlGroupHidden");c.addClass(this._gridSettingsInstance.labelStyleWithRefSysContainer,"controlGroupHidden");switch(a){case "grgPointBySize":c.removeClass(this._gridSettingsInstance.gridOriginContainer,"controlGroupHidden");break;case "grgAreaByRefSystem":case "grgPointByRefSystem":c.addClass(this._gridSettingsInstance.gridShapeContainer,
"controlGroupHidden"),c.addClass(this._gridSettingsInstance.gridUnitsContainer,"controlGroupHidden"),c.addClass(this._gridSettingsInstance.labelStyleContainer,"controlGroupHidden"),c.addClass(this._gridSettingsInstance.labelDirectionContainer,"controlGroupHidden"),c.removeClass(this._gridSettingsInstance.gridRefSystemContainer,"controlGroupHidden"),c.removeClass(this._gridSettingsInstance.labelStyleWithRefSysContainer,"controlGroupHidden")}},_getNodeByName:function(a){var b;switch(a){case "mainPage":b=
this.mainPageNode;break;case "grgAreaBySize":b=this.grgAreaBySizePageNode;break;case "grgAreaByRefSystem":b=this.grgAreaByRefSystemPageNode;break;case "grgAreaFromNonStandard":b=this.grgAreaFromNonStandardPageNode;break;case "grgPointBySize":b=this.grgPointBySizePageNode;break;case "grgPointByRefSystem":b=this.grgPointByRefSystemPageNode;break;case "grgPointByTime":b=this.grgPointByTimePageNode;this._gridSettingsInstance.gridOrigin.set("value","center");this._gridOrigin="center";break;case "settingsPage":b=
this.settingsPageNode;break;case "publishPage":b=this.publishPageNode}return b},_resetOnBackToMainPage:function(){this._showPanel("mainPage");this._reset()},_reset:function(){this._clearLayers(!0);this.dt_AreaBySize.deactivate();this.dt_PointBySize.deactivate();this.dt_PointByRefSystem.deactivate();this.dt_AreaByRefSystem.deactivate();this.map.enableMapNavigation();m.removeClass(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active");m.removeClass(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active");
m.removeClass(this.grgPointBySizeAddPointBtn,"jimu-edit-active");m.removeClass(this.grgPointByRefSystemAddPointBtn,"jimu-edit-active");c.addClass(this.fromAreaContainer,"controlGroupHidden");c.addClass(this.newGRGAreaButton,"GRGNewRightButton");c.removeClass(this.newGRGAreaButton,"GRGNewDownButton");c.addClass(this.fromPointContainer,"controlGroupHidden");c.addClass(this.newGRGPointButton,"GRGNewRightButton");c.removeClass(this.newGRGPointButton,"GRGNewDownButton")},_clearLayers:function(a){this.GRGArea.clear();
this.GRGArea.refresh();this.editToolbar.deactivate();a&&(this._graphicsLayerGRGExtent.clear(),this.dt_PointBySize.removeStartGraphic(this._graphicsLayerGRGExtent),this.dt_PointByRefSystem.removeStartGraphic(this._graphicsLayerGRGExtent),this.angle=0,this.grgAreaBySizeRotation.setValue(this.angle),this.grgAreaBySizeRotation.set("disabled",!0),this.grgAreaBySizeCellHeight.set("disabled",!0),this.grgAreaBySizeCellWidth.set("disabled",!0))},_createGridSettings:function(){this._gridSettingsInstance=new L({nls:this.nls,
config:this.config,appConfig:this.appConfig},p.create("div",{},this.gridSettingsNode));this.own(this._gridSettingsInstance.on("gridSettingsChanged",a.hitch(this,function(a){this._cellShape=a.cellShape;this._labelStartPosition=a.labelStartPosition;this._cellUnits=a.cellUnits;this._labelType=a.labelType;this._labelTypeWithRefSys=a.labelTypeWithRefSys;this._labelDirection=a.labelDirection;this._gridOrigin=a.gridOrigin;this._referenceSystem=a.referenceSystem;"default"===this._cellShape?(this.grgAreaBySizeCellHeight.setValue(this.grgAreaBySizeCellWidth.value),
this.grgPointBySizeCellHeight.set("disabled",!1),this.grgPointBySizeCellHeight.setValue(this.grgPointBySizeCellWidth.value)):(this.grgAreaBySizeCellHeight.set("disabled",!0),this.grgAreaBySizeCellHeight.setValue(0),this.grgPointBySizeCellHeight.set("disabled",!0),this.grgPointBySizeCellHeight.setValue(0));"gridReferenceSystem"!==this._labelTypeWithRefSys?(c.addClass(this.grgAreaByRefSystemLabelFormat,"controlGroupHidden"),c.addClass(this.grgPointByRefSystemLabelFormat,"controlGroupHidden")):(c.removeClass(this.grgAreaByRefSystemLabelFormat,
"controlGroupHidden"),c.removeClass(this.grgPointByRefSystemLabelFormat,"controlGroupHidden"));var b=new v(a.gridFillColor);b.a=1-a.gridFillTransparency;var d=new v(a.gridOutlineColor);d.a=1-a.gridOutlineTransparency;this._GRGAreaFillSymbol={type:"esriSFS",style:"esriSFSSolid",color:b,outline:{color:d,width:2,type:"esriSLS",style:"esriSLSSolid"}};b=new Q(this._GRGAreaFillSymbol);b=new T(b);this.GRGArea.setRenderer(b);var b=new v(a.fontSettings.textColor),d=255*(1-a.fontSettings.labelTransparency),
e=0;a.fontSettings.haloOn&&(e=parseInt(a.fontSettings.haloSize,10));var f=new v(a.fontSettings.haloColor);this._cellTextSymbol={type:"esriTS",color:[b.r,b.g,b.b,d],haloSize:e,haloColor:[f.r,f.g,f.b,d],horizontalAlignment:"center",font:{size:parseInt(a.fontSettings.fontSize,10),style:a.fontSettings.font.italic?"italic":"normal",weight:a.fontSettings.font.bold?"bold":"normal",family:a.fontSettings.font.fontFamily,decoration:a.fontSettings.font.underline?"underline":"none"}};a=new P({labelExpressionInfo:{value:"{grid}"}});
a.symbol=new aa(this._cellTextSymbol);this.GRGArea.setLabelingInfo([a]);this.GRGArea.refresh()})));this._gridSettingsInstance.startup()},_showPanel:function(a){var b;this._currentOpenPanel&&(b=this._getNodeByName(this._currentOpenPanel),g.add(b,"GRGDrafterHidden"));b=this._getNodeByName(a);g.remove(b,"GRGDrafterHidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=a},_grgAreaBySizeDrawPolygonIconClicked:function(){this._clearLayers(!0);g.contains(this.grgAreaBySizeDrawExtentIcon,
"jimu-extent-active")&&(this.dt_AreaBySize.deactivate(),g.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active"));g.contains(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")?(this.dt_AreaBySize.deactivate(),this.map.enableMapNavigation()):(this.map.disableMapNavigation(),this.dt_AreaBySize.activate("polygon"),this.own(l(this._graphicsLayerGRGExtent,"click",a.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=!0;this.editToolbar.activate(S.MOVE|S.EDIT_VERTICES,a.graphic)}))));
g.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")},_grgAreaBySizeDrawExtentIconClicked:function(){this._clearLayers(!0);g.contains(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")&&(this.dt_AreaBySize.deactivate(),g.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active"));g.contains(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")?(this.dt_AreaBySize.deactivate(),this.map.enableMapNavigation()):(this.map.disableMapNavigation(),this.dt_AreaBySize.activate("extent"),
this.own(l(this._graphicsLayerGRGExtent,"click",a.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=!0;this.editToolbar.activate(S.MOVE|S.ROTATE|S.SCALE,a.graphic)}))));g.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")},_grgPointBySizeDrawButtonClicked:function(){if(g.contains(this.grgPointBySizeAddPointBtn,"jimu-edit-active"))this.dt_PointBySize.deactivate(),this.map.enableMapNavigation();else{this.dt_PointBySize.removeStartGraphic(this._graphicsLayerGRGExtent);
this._clearLayers(!0);this.grgPointBySizeCoordTool.manualInput=!1;this.dt_PointBySize._setTooltipMessage(0);this.map.disableMapNavigation();this.dt_PointBySize.activate("point");var a=this.dt_PointBySize._tooltip;a&&(a.innerHTML=this.nls.drawPointToolTip)}g.toggle(this.grgPointBySizeAddPointBtn,"jimu-edit-active")},_grgPointByRefSystemDrawButtonClicked:function(){if(g.contains(this.grgPointByRefSystemAddPointBtn,"jimu-edit-active"))this.dt_PointByRefSystem.deactivate(),this.map.enableMapNavigation();
else{this.dt_PointByRefSystem.removeStartGraphic(this._graphicsLayerGRGExtent);this._clearLayers(!0);this.grgPointByRefSystemCoordTool.manualInput=!1;this.dt_PointByRefSystem._setTooltipMessage(0);this.map.disableMapNavigation();this.dt_PointByRefSystem.activate("point");var a=this.dt_PointByRefSystem._tooltip;a&&(a.innerHTML=this.nls.drawPointToolTip)}g.toggle(this.grgPointByRefSystemAddPointBtn,"jimu-edit-active")},_grgPointByTimeDrawButtonClicked:function(){if(g.contains(this.grgPointByTimeAddPointBtn,
"jimu-edit-active"))this.dt_PointByTime.deactivate(),this.map.enableMapNavigation();else{this.dt_PointByTime.removeStartGraphic(this._graphicsLayerGRGExtent);this._clearLayers(!0);this.grgPointByTimeCoordTool.manualInput=!1;this.dt_PointByTime._setTooltipMessage(0);this.map.disableMapNavigation();this.dt_PointByTime.activate("point");var a=this.dt_PointByTime._tooltip;a&&(a.innerHTML=this.nls.drawPointToolTip)}g.toggle(this.grgPointByTimeAddPointBtn,"jimu-edit-active")},_grgAreaByRefSystemDrawIconClicked:function(){g.contains(this.grgAreaByRefSystemDrawIcon,
"jimu-extent-active")?(this.dt_AreaByRefSystem.deactivate(),this.map.enableMapNavigation()):(this._graphicsLayerGRGExtent.clear(),this.grgPointBySizeCoordTool.manualInput=!1,this.map.disableMapNavigation(),this.dt_AreaByRefSystem.activate("extent"),this.editToolbar.deactivate(),this.own(l(this._graphicsLayerGRGExtent,"click",a.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=!1;this.editToolbar.activate(S.MOVE|S.SCALE,a.graphic)}))));g.toggle(this.grgAreaByRefSystemDrawIcon,
"jimu-extent-active")},_dt_AreaBySizeComplete:function(a){var b;this.map.enableMapNavigation();this.dt_AreaBySize.deactivate();"extent"===a.geometry.type?(a.geometry=U.extentToPolygon(a.geometry),b=new A(a.geometry,this._extentSym),this.grgAreaBySizeRotation.set("disabled",!1),g.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")):(b=new A(a.geometry,this._extentSym),a.geometry=U.extentToPolygon(a.geometry.getExtent()),g.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active"));"default"===
this._cellShape&&this.grgAreaBySizeCellHeight.set("disabled",!1);this.grgAreaBySizeCellWidth.set("disabled",!1);this._graphicsLayerGRGExtent.add(b);this.centerPoint=a.geometry.getCentroid();this._calculateCellWidthAndHeight(a.geometry)},_calculateCellWidthAndHeight:function(a){4326===a.spatialReference.wkid&&(a=K.geographicToWebMercator(a));var b=C.geodesicLength(new O({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,1).x,a.getPoint(0,1).y]]],spatialReference:a.spatialReference}),this._cellUnits)/
this.cellHorizontal.value,c=C.geodesicLength(new O({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,3).x,a.getPoint(0,3).y]]],spatialReference:a.spatialReference}),this._cellUnits)/this.cellVertical.value,d=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(b,this._cellUnits),e=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(c,this._cellUnits);2E4>d&&(2E4>e&&"hexagon"!==this._cellShape||"hexagon"===this._cellShape)?(this.geodesicGrid=!0,this.grgAreaBySizeCellWidth.setValue(b),
"default"===this._cellShape?this.grgAreaBySizeCellHeight.setValue(c):this.grgAreaBySizeCellHeight.setValue(0)):(this.geodesicGrid=!1,this.grgAreaBySizeCellWidth.setValue(C.distance(a.getPoint(0,0),a.getPoint(0,1),this._cellUnits)/this.cellHorizontal.value),"default"===this._cellShape?this.grgAreaBySizeCellHeight.setValue(C.distance(a.getPoint(0,0),a.getPoint(0,3),this._cellUnits)/this.cellVertical.value):this.grgAreaBySizeCellHeight.setValue(0))},_dt_PointBySizeComplete:function(){g.remove(this.grgPointBySizeAddPointBtn,
"jimu-edit-active");this.dt_PointBySize.deactivate();this.map.enableMapNavigation()},_dt_PointByRefSystemComplete:function(){g.remove(this.grgPointByRefSystemAddPointBtn,"jimu-edit-active");this.dt_PointByRefSystem.deactivate();this.map.enableMapNavigation()},_dt_PointByTimeComplete:function(){g.remove(this.grgPointByTimeAddPointBtn,"jimu-edit-active");this.dt_PointByTime.deactivate();this.map.enableMapNavigation()},_dt_AreaByRefSystemComplete:function(a){g.remove(this.grgAreaByRefSystemDrawIcon,
"jimu-extent-active");a=new A(U.extentToPolygon(a.geometry),this._extentSym);this._graphicsLayerGRGExtent.add(a);this.dt_AreaByRefSystem.deactivate();this.map.enableMapNavigation()},_grgPointBySizeCoordToolKeyWasPressed:function(b){this.grgPointBySizeCoordTool.manualInput=!0;b.keyCode===r.ENTER&&this.grgPointBySizeCoordTool.inputCoordinate.getInputType().then(a.hitch(this,function(a){"UNKNOWN"===a.inputType?new E({message:this.nls.parseCoordinatesError}):(this._reset(),h.publish("grg-center-point-input",
this.grgPointBySizeCoordTool.inputCoordinate.coordinateEsriGeometry),this._grgPointBySizeSetCoordLabel(a.inputType),this.grgPointBySizeCoordTool.inputCoordinate.set("formatString",this.grgPointBySizeCoordinateFormat.content.formats[a.inputType].defaultFormat),this.grgPointBySizeCoordTool.inputCoordinate.set("formatType",a.inputType),this.dt_PointBySize.addStartGraphic(a.coordinateEsriGeometry,this._ptSym,this._graphicsLayerGRGExtent))}))},_grgPointByRefSystemCoordToolKeyWasPressed:function(b){this.grgPointByRefSystemCoordTool.manualInput=
!0;b.keyCode===r.ENTER&&this.grgPointByRefSystemCoordTool.inputCoordinate.getInputType().then(a.hitch(this,function(a){"UNKNOWN"===a.inputType?new E({message:this.nls.parseCoordinatesError}):(this._reset(),h.publish("grg-center-point-input",this.grgPointByRefSystemCoordTool.inputCoordinate.coordinateEsriGeometry),this._grgPointByRefSystemSetCoordLabel(a.inputType),this.grgPointByRefSystemCoordTool.inputCoordinate.set("formatString",this.grgPointByRefSystemCoordinateFormat.content.formats[a.inputType].defaultFormat),
this.grgPointByRefSystemCoordTool.inputCoordinate.set("formatType",a.inputType),this.dt_PointByRefSystem.addStartGraphic(a.coordinateEsriGeometry,this._ptSym,this._graphicsLayerGRGExtent))}))},_grgPointByTimeCoordToolKeyWasPressed:function(b){this.grgPointByTimeCoordTool.manualInput=!0;b.keyCode===r.ENTER&&this.grgPointByTimeCoordTool.inputCoordinate.getInputType().then(a.hitch(this,function(a){"UNKNOWN"===a.inputType?new E({message:this.nls.parseCoordinatesError}):(this._reset(),h.publish("grg-center-point-input",
this.grgPointByTimeCoordTool.inputCoordinate.coordinateEsriGeometry),this._grgPointByTimeSetCoordLabel(a.inputType),this.grgPointByTimeCoordTool.inputCoordinate.set("formatString",this.grgPointByTimeCoordinateFormat.content.formats[a.inputType].defaultFormat),this.grgPointByTimeCoordTool.inputCoordinate.set("formatType",a.inputType),this.dt_PointByTime.addStartGraphic(a.coordinateEsriGeometry,this._ptSym,this._graphicsLayerGRGExtent))}))},_grgPointBySizeSetCoordLabel:function(a){this.grgPointBySizeCoordInputLabel.innerHTML=
d.substitute("GRG Origin (${crdType})",{crdType:a})},_grgPointByRefSystemSetCoordLabel:function(a){this.grgPointByRefSystemCoordInputLabel.innerHTML=d.substitute("GRG Origin (${crdType})",{crdType:a})},_grgPointByTimeSetCoordLabel:function(a){this.grgPointByTimeCoordInputLabel.innerHTML=d.substitute("GRG Origin (${crdType})",{crdType:a})},_grgPointBySizeCoordFormatButtonClicked:function(){this.grgPointBySizeCoordinateFormat.content.set("ct",this.grgPointBySizeCoordTool.inputCoordinate.formatType);
y.open({popup:this.grgPointBySizeCoordinateFormat,around:this.grgPointBySizeCoordFormatButton})},_grgPointByRefSystemCoordFormatButtonClicked:function(){this.grgPointByRefSystemCoordinateFormat.content.set("ct",this.grgPointByRefSystemCoordTool.inputCoordinate.formatType);y.open({popup:this.grgPointByRefSystemCoordinateFormat,around:this.grgPointByRefSystemCoordFormatButton})},_grgPointByTimeCoordFormatButtonClicked:function(){this.grgPointByTimeCoordinateFormat.content.set("ct",this.grgPointByTimeCoordTool.inputCoordinate.formatType);
y.open({popup:this.grgPointByTimeCoordinateFormat,around:this.grgPointByTimeCoordFormatButton})},_grgPointBySizeCoordFormatPopupApplyButtonClicked:function(){var a=this.grgPointBySizeCoordinateFormat.content.formats[this.grgPointBySizeCoordinateFormat.content.ct],b=a.defaultFormat,c=this.grgPointBySizeCoordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.grgPointBySizeCoordTool.inputCoordinate.set("formatPrefix",this.grgPointBySizeCoordinateFormat.content.addSignChkBox.checked);
this.grgPointBySizeCoordTool.inputCoordinate.set("formatString",b);this.grgPointBySizeCoordTool.inputCoordinate.set("formatType",c);this._grgPointBySizeSetCoordLabel(c);y.close(this.grgPointBySizeCoordinateFormat)},_grgPointByRefSystemCoordFormatPopupApplyButtonClicked:function(){var a=this.grgPointByRefSystemCoordinateFormat.content.formats[this.grgPointByRefSystemCoordinateFormat.content.ct],b=a.defaultFormat,c=this.grgPointByRefSystemCoordinateFormat.content.frmtSelect.get("value");a.useCustom&&
(b=a.customFormat);this.grgPointByRefSystemCoordTool.inputCoordinate.set("formatPrefix",this.grgPointByRefSystemCoordinateFormat.content.addSignChkBox.checked);this.grgPointByRefSystemCoordTool.inputCoordinate.set("formatString",b);this.grgPointByRefSystemCoordTool.inputCoordinate.set("formatType",c);this._grgPointByRefSystemSetCoordLabel(c);y.close(this.grgPointByRefSystemCoordinateFormat)},_grgPointByTimeCoordFormatPopupApplyButtonClicked:function(){var a=this.grgPointByTimeCoordinateFormat.content.formats[this.grgPointByTimeCoordinateFormat.content.ct],
b=a.defaultFormat,c=this.grgPointByTimeCoordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.grgPointByTimeCoordTool.inputCoordinate.set("formatPrefix",this.grgPointByTimeCoordinateFormat.content.addSignChkBox.checked);this.grgPointByTimeCoordTool.inputCoordinate.set("formatString",b);this.grgPointByTimeCoordTool.inputCoordinate.set("formatType",c);this._grgPointByTimeSetCoordLabel(c);y.close(this.grgPointByTimeCoordinateFormat)},_setNumberRowsColumnsCheckBoxChanged:function(){this.setNumberRowsColumns.checked?
(this.grgAreaBySizeCellWidth.set("disabled",!0),this.grgAreaBySizeCellHeight.set("disabled",!0),this.cellHorizontal.set("disabled",!1),this.cellVertical.set("disabled",!1)):(this.cellHorizontal.set("disabled",!0),this.cellVertical.set("disabled",!0));this._clearLayers(!0)},_setNumberRowsColumnsTimeCheckBoxChanged:function(){this.setNumberRowsColumnsTime.checked?(this.grgPointByTimeCellWidth.set("disabled",!0),this.grgPointByTimeCellHeight.set("disabled",!0),this.grgPointByTimeCellHorizontal.set("disabled",
!1),this.grgPointByTimeCellVertical.set("disabled",!1)):(this.grgPointByTimeCellHorizontal.set("disabled",!0),this.grgPointByTimeCellVertical.set("disabled",!0),this.grgPointByTimeCellWidth.set("disabled",!1),this.grgPointByTimeCellHeight.set("disabled",!1));this._clearLayers(!0)},_grgAreaBySizeCreateGRGButtonClicked:function(){if(this._graphicsLayerGRGExtent.graphics[0]&&this.grgAreaBySizeCellWidth.isValid()&&this.grgAreaBySizeCellHeight.isValid()&&this.grgAreaBySizeRotation.isValid()){this._clearLayers(!1);
var a=0===this.angle?U.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()):this._graphicsLayerGRGExtent.graphics[0].geometry;4326===a.spatialReference.wkid&&(a=K.geographicToWebMercator(a));var b,c;this.geodesicGrid?(b=C.geodesicLength(new O({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,1).x,a.getPoint(0,1).y]]],spatialReference:a.spatialReference}),"meters"),c=C.geodesicLength(new O({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,3).x,a.getPoint(0,
3).y]]],spatialReference:a.spatialReference}),"meters")):(b=C.distance(a.getPoint(0,0),a.getPoint(0,1),"meters"),c=C.distance(a.getPoint(0,0),a.getPoint(0,3),"meters"));var a=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgAreaBySizeCellWidth.value,this._cellUnits),d=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgAreaBySizeCellHeight.value,this._cellUnits);b=Math.round(b/a);c="default"===this._cellShape?Math.round(c/d):Math.round(c/a/Math.cos(30*
Math.PI/180))+1;F.checkGridSize(b,c)?(a=F.createGRG(b,c,this.centerPoint,a,d,this.angle,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,"center",this.geodesicGrid,this.map),this.GRGArea.applyEdits(a,null,null),this.map.setExtent(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().expand(2),!1),this._graphicsLayerGRGExtent.clear(),this._showPanel("publishPage")):new E({message:this.nls.tooManyCellsErrorMessage})}},_grgPointBySizeCreateGRGButtonClicked:function(){if(this.dt_PointBySize.startGraphic&&
this.grgPointBySizeCellWidth.isValid()&&this.grgPointBySizeCellHeight.isValid()&&this.gridAnglePoint.isValid()){var a=K.geographicToWebMercator(this.grgPointBySizeCoordTool.inputCoordinate.coordinateEsriGeometry),b=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointBySizeCellWidth.value,this._cellUnits),c=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointBySizeCellHeight.value,this._cellUnits);this.geodesicGrid=2E4>b&&(2E4>c&&"hexagon"!==this._cellShape||
"hexagon"===this._cellShape)?!0:!1;if(F.checkGridSize(this.grgPointBySizeCellHorizontal.value,this.grgPointBySizeCellVertical.value)){a=F.createGRG(this.grgPointBySizeCellHorizontal.value,this.grgPointBySizeCellVertical.value,a,b,c,this.gridAnglePoint.value,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,this._gridOrigin,this.geodesicGrid,this.map);this.GRGArea.applyEdits(a,null,null);b=[];for(c=0;c<a.length;c++)b.push(a[c].geometry);a=C.union(b);this.map.setExtent(a.getExtent().expand(2),
!1);this._showPanel("publishPage")}else new E({message:this.nls.tooManyCellsErrorMessage})}else new E({message:this.nls.missingParametersMessage})},_grgPointByTimeCreateGRGButtonClicked:function(){var a,b,c;if(this.dt_PointByTime.startGraphic&&this.grgPointByTimeTime.isValid()&&this.grgPointByTimeRate.isValid()&&this.grgPointByTimeRotation.isValid()){var d=this.grgPointByTimeTime.get("value")*this.grgPointByTimeTimeUnits.get("value");b=this.grgPointByTimeRate.get("value")*this.grgPointByTimeRateUnits.value.split(";")[0]/
this.grgPointByTimeRateUnits.value.split(";")[1];b*=d;d=K.geographicToWebMercator(this.grgPointByTimeCoordTool.inputCoordinate.coordinateEsriGeometry);2E5>b?(this.geodesicGrid=!0,a=C.geodesicBuffer(d,b,9001),b=U.extentToPolygon(a.getExtent()),b=C.geodesicLength(new O({paths:[[[b.getPoint(0,0).x,b.getPoint(0,0).y],[b.getPoint(0,1).x,b.getPoint(0,1).y]]],spatialReference:b.spatialReference}),"meters")):(this.geodesicGrid=!1,a=C.buffer(d,b,9001),b=U.extentToPolygon(a.getExtent()),b=C.distance(b.getPoint(0,
0),b.getPoint(0,1),"meters"));a=new A(a,this._extentSym);this._graphicsLayerGRGTimeExtent.add(a);if(this.setNumberRowsColumnsTime.checked)if(this.grgPointByTimeCellHorizontal.isValid()&&this.grgPointByTimeCellVertical.isValid())a=b/this.grgPointByTimeCellHorizontal.value,c=b/this.grgPointByTimeCellVertical.value;else{new E({message:this.nls.invalidHorizontalVerticalParametersMessage});return}else if(this.grgPointByTimeCellWidth.isValid()&&this.grgPointByTimeCellHeight.isValid())a=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointByTimeCellWidth.value,
this._cellUnits),c=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointByTimeCellHeight.value,this._cellUnits);else{new E({message:this.nls.invalidWidthHeightParametersMessage});return}var e=Math.round(b/a);b="default"===this._cellShape?Math.round(b/c):Math.round(b/a/Math.cos(30*Math.PI/180))+1;1>e&&(e=1);1>b&&(b=1);if(F.checkGridSize(e,b)){d=F.createGRG(e,b,d,a,c,this.grgPointByTimeRotation.value,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,
this._gridOrigin,this.geodesicGrid,this.map);this.GRGArea.applyEdits(d,null,null);this.dt_PointByTime.removeStartGraphic(this._graphicsLayerGRGExtent);b=[];for(a=0;a<d.length;a++)b.push(d[a].geometry);d=C.union(b);this.map.setExtent(d.getExtent().expand(2),!1);this._showPanel("publishPage")}else new E({message:this.nls.tooManyCellsErrorMessage})}else new E({message:this.nls.missingOriginParametersMessage})},_grgPointByRefSystemCreateGRGButtonClicked:function(){var a,b,c,d,e=[];this._clearLayers(!1);
if(F.checkGridSize(this.grgPointByRefCellHorizontal.getValue(),this.grgPointByRefCellVertical.getValue())){if(this.dt_PointByRefSystem.startGraphic&&this.grgPointByRefCellHorizontal.isValid()&&this.grgPointByRefCellVertical.isValid()){b=this.grgPointByRefSystemCoordTool.inputCoordinate.coordinateEsriGeometry;switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":a=0>b.x?b.x-b.x%6-6:b.x-b.x%6;d=0>b.y?b.y-b.y%8-8:b.y-b.y%8;break;case "100000":c=Y.LLtoMGRS(b.y,b.x,5);c=c.substring(0,c.length-
10);c+="0000000000";break;case "10000":c=Y.LLtoMGRS(b.y,b.x,1);break;case "1000":c=Y.LLtoMGRS(b.y,b.x,2);break;case "100":c=Y.LLtoMGRS(b.y,b.x,3);break;case "10":c=Y.LLtoMGRS(b.y,b.x,4)}if("UTM"===this.grgPointByRefSystemGridSize.getValue())c=new N(a,d),a=6*this.grgPointByRefCellHorizontal.getValue(),b=8*this.grgPointByRefCellVertical.getValue(),d=new J({xmin:c.x,ymin:c.y,xmax:c.x+a,ymax:c.y+b,spatialReference:{wkid:4326}});else{c=Y.USNGtoPoint(c);if(isNaN(c.x)||isNaN(c.y)){new E({message:this.nls.grgPolarOriginError});
return}a=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)*this.grgPointByRefCellHorizontal.getValue();b=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)*this.grgPointByRefCellVertical.getValue();a=ba.getDestinationPoint(c,90,a);a=ba.getDestinationPoint(a,0,b);b=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),
this._cellUnits)/5;c=ba.getDestinationPoint(c,45,b);a=ba.getDestinationPoint(a,225,b);d=new J({xmin:c.x,ymin:c.y,xmax:a.x,ymax:a.y,spatialReference:{wkid:4326}})}F.checkPolarRegion(d)&&new E({message:this.nls.grgPolarRegionError});d=K.geographicToWebMercator(d);a=X.zonesFromExtent(d,this.map);var f;c=[];switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":for(b=0;b<a.length;b++)d=4326!==this.map.spatialReference.wkid?new A(K.geographicToWebMercator(a[b].gridPolygon.unclippedPolygon)):new A(a[b].gridPolygon.unclippedPolygon),
f=this.grgPointByRefLabelFormat.value,f=f.replace(/Z/,a[b].gridPolygon.text),d.setAttributes({grid:f}),c.push(d),e.push(d.geometry);break;default:a=X.processZonePolygons(a,this.map,d);for(f=1E4;f>=this.grgPointByRefSystemGridSize.getValue();){var g=[];for(b=0;b<a.length;b++)g=g.concat(X.handleGridSquares(a[b],this.map,f,d));a=[];a=g;f/=10}for(b=0;b<a.length;b++)d=4326!==this.map.spatialReference.wkid?new A(a[b].clippedPolyToUTMZone):new A(K.webMercatorToGeographic(a[b].clippedPolyToUTMZone)),"gridReferenceSystem"===
this._labelTypeWithRefSys&&(f=this.grgPointByRefLabelFormat.value,f=f.replace(/Y/,a[b].y),f=f.replace(/X/,a[b].x),f=f.replace(/S/,a[b].GZD),f=f.replace(/Z/,a[b].utmZone+a[b].latitudeZone),d.setAttributes({grid:f}),c.push(d)),e.push(d.geometry)}0<e.length&&(b=C.union(e),this.map.setExtent(b.getExtent().expand(2),!1));"gridReferenceSystem"!==this._labelTypeWithRefSys&&(c=F.labelReferenceGrid(e,this._labelTypeWithRefSys,this._labelStartPosition,this.grgPointByRefSystemGridSize.getValue()));this.GRGArea.applyEdits(c,
null,null);this._graphicsLayerGRGExtent.hide();this._showPanel("publishPage")}}else new E({message:this.nls.tooManyCellsErrorMessage})},_grgAreaByRefSystemCreateGRGButtonClicked:function(){var a,b;if(this._graphicsLayerGRGExtent.graphics[0]){var c=parseInt(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().getWidth(),10)/this.grgAreaByRefSystemGridSize.getValue(),d=parseInt(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().getHeight(),10)/this.grgAreaByRefSystemGridSize.getValue();
if(F.checkGridSize(c,d)||"UTM"===this.grgAreaByRefSystemGridSize.getValue()){4326!==this.map.spatialReference.wkid?F.checkPolarRegion(K.webMercatorToGeographic(this._graphicsLayerGRGExtent.graphics[0].geometry))&&new E({message:this.nls.grgPolarRegionError}):F.checkPolarRegion(this._graphicsLayerGRGExtent.graphics[0].geometry)&&new E({message:this.nls.grgPolarRegionError});c=[];this._clearLayers(!1);var e=X.zonesFromExtent(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent(),this.map),d=
[];switch(this.grgAreaByRefSystemGridSize.getValue()){case "UTM":for(f=0;f<e.length;f++)a=this.grgAreaByRefSystemClipToggle.checked?4326!==this.map.spatialReference.wkid?new A(e[f].gridPolygon.clippedPolygon):new A(K.webMercatorToGeographic(e[f].gridPolygon.clippedPolygon)):4326!==this.map.spatialReference.wkid?new A(K.geographicToWebMercator(e[f].gridPolygon.unclippedPolygon)):new A(e[f].gridPolygon.unclippedPolygon),c.push(a.geometry),b=this.grgAreaByRefLabelFormat.value,b=b.replace(/Z/,e[f].gridPolygon.text),
a.setAttributes({grid:b}),d.push(a);break;default:e=X.processZonePolygons(e,this.map,this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent());for(a=1E4;a>=this.grgAreaByRefSystemGridSize.getValue();){b=[];for(f=0;f<e.length;f++)b=b.concat(X.handleGridSquares(e[f],this.map,a,this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()));e=[];e=b;a/=10}for(var f=0;f<e.length;f++)a=this.grgAreaByRefSystemClipToggle.checked?4326!==this.map.spatialReference.wkid?new A(e[f].clippedPolygon):new A(K.webMercatorToGeographic(e[f].clippedPolygon)):
4326!==this.map.spatialReference.wkid?new A(e[f].clippedPolyToUTMZone):new A(K.webMercatorToGeographic(e[f].clippedPolyToUTMZone)),c.push(a.geometry),"gridReferenceSystem"===this._labelTypeWithRefSys&&(b=this.grgAreaByRefLabelFormat.value,b=b.replace(/Y/,e[f].y),b=b.replace(/X/,e[f].x),b=b.replace(/S/,e[f].GZD),b=b.replace(/Z/,e[f].utmZone+e[f].latitudeZone),a.setAttributes({grid:b}),d.push(a))}0<c.length&&(f=C.union(c),this.map.setExtent(f.getExtent().expand(2),!1));"gridReferenceSystem"!==this._labelTypeWithRefSys&&
(d=F.labelReferenceGrid(c,this._labelTypeWithRefSys,this._labelStartPosition,this.grgAreaByRefSystemGridSize.getValue()));this.GRGArea.applyEdits(d,null,null);this._graphicsLayerGRGExtent.hide();this._showPanel("publishPage")}else new E({message:this.nls.tooManyCellsErrorMessage})}},createGraphicDeleteMenu:function(){var b,c=new B({});c.addChild(new G({label:this.nls.deleteBtn,onClick:a.hitch(this,function(){this.GRGArea.remove(b);this.GRGArea.refresh()})}));c.startup();this.own(this.GRGArea.on("mouse-over",
function(a){b=a.graphic;c.bindDomNode(a.graphic.getDojoShape().getNode())}));this.own(this.GRGArea.on("mouse-out",function(a){c.unBindDomNode(a.graphic.getDojoShape().getNode())}))},_removeStyleFile:function(a,b){var c=null,c="js"===b?"src":"css"===b?"href":"none";b=document.getElementsByTagName("js"===b?"script":"css"===b?"link":"none");for(var d=b.length;0<=d;d--)b[d]&&null!==b[d].getAttribute(c)&&-1!==b[d].getAttribute(c).indexOf(a)&&b[d].parentNode.removeChild(b[d])},_setTheme:function(){"DartTheme"===
this.appConfig.theme.name?D.loadStyleLink("darkOverrideCSS",this.folderUrl+"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&"default"===this.appConfig.theme.styles[0]?D.loadStyleLink("darkDashboardOverrideCSS",this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css")},destroy:function(){this.inherited(arguments);this.map.removeLayer(this._graphicsLayerGRGExtent);
this.map.removeLayer(this.GRGArea)},_initSaveToPortal:function(b){x.registerOAuthInfos();x.getCredential(this.appConfig.portalUrl+"/sharing",{oAuthPopupConfirmation:!1}).then(a.hitch(this,function(){(new z.Portal(this.appConfig.portalUrl)).signIn().then(a.hitch(this,function(c){var d=c.credential.token,e=c.orgId,f=c.username;if("org_user"===c.role)this.publishMessage.innerHTML=this.nls.createService.format(this.nls.userRole);else{var g=this.appConfig.portalUrl+"sharing/content/users/"+f+"/createService";
F.isNameAvailable(this.appConfig.portalUrl+"sharing/rest/portals/"+e+"/isServiceNameAvailable",d,b).then(a.hitch(this,function(c){c.available?(this.busyIndicator.show(),F.createFeatureService(g,d,F.getFeatureServiceParams(b,this.map)).then(a.hitch(this,function(c){if(c.success){var e=c.serviceurl.replace(/rest/g,"rest/admin")+"/addToDefinition";F.addDefinitionToService(e,d,F.getLayerParams(b,this.map,this._cellTextSymbol,this._GRGAreaFillSymbol)).then(a.hitch(this,function(e){if(e.success){e=new W(c.serviceurl+
"/0?token\x3d"+d,{id:b,outFields:["*"]});this.map.addLayers([e]);var f;if(e.loaded)f=H.getInstanceSync().getLayerInfoById(b),f.enablePopup(),this._showLabels&&f.showLabels();else e.on("load",a.hitch(this,function(){f=H.getInstanceSync().getLayerInfoById(b);f.enablePopup();this._showLabels&&f.showLabels()}));var g=[];n.forEach(this.GRGArea.graphics,function(a){g.push(new A(a.geometry,null,{grid:a.attributes.grid}))},this);e.applyEdits(g,null,null).then(a.hitch(this,function(){this._reset()})).otherwise(a.hitch(this,
function(){this._reset()}));this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+c.itemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e"}}),a.hitch(this,function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.addToDefinition.format(a.message)}))}else this.busyIndicator.hide(),this.publishMessage.innerHTML=this.nls.unableToCreate.format(b)}),a.hitch(this,function(a){this.busyIndicator.hide();
this.publishMessage.innerHTML=this.nls.createService.format(a.message)}))):(this.busyIndicator.hide(),this.publishMessage.innerHTML=this.nls.publishingFailedLayerExists.format(b))}),a.hitch(this,function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.checkService.format(a.message)}))}}),a.hitch(this,function(a){this.publishMessage.innerHTML="ERROR: Error in opening workspace"===a.message?this.nls.publishWorskpaceError:a.message}))}));x.destroyCredentials()}})});