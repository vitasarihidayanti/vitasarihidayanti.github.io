// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Swipe/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/_base/html"],function(r,q,c,h){var d={defaultColor:"#dadada",handlerPosition:{top:null,bottom:null,left:null,right:null},_isNewAddedLayer:function(a,c){c=c.getLayerInfoArrayOfWebmap();for(var e=0,d=c.length;e<d;e++)if(c[e].id===a.id)return!1;return!0},zoomToCurrentLayer:function(a){var c=a.config.isZoom,e=a.layerInfosObj;a=a.getSelection();var d;a&&a[0]&&(d=a[0]);c&&d&&(c=e.getLayerInfoById(d))&&
c.zoomTo&&c.zoomTo()},shouldHideInfoWindow:function(a,c){if(!c.map.infoWindow.isShowing)return!1;var e=c.map.infoWindow.getSelectedFeature();return a&&q.some(a,function(a){var d=e&&e.getLayer&&e.getLayer(),n=c.layerInfosObj.getLayerInfoById(a.id),n=d&&n&&n.traversal(function(a){return a.id===d.id});return d===a||n},c)},getVisibleLayerInfos:function(a,c){a=a.getLayerInfoArray();if(c){for(var e=[],d=0,h=a.length;d<h;d++){var n=a[d];if(n.isShowInMap())e.push(n);else for(var u=0,x=c.length;u<x;u++)c[u]===
n.id&&e.push(n)}return e}return q.filter(a,function(a){return a.isShowInMap()})},isTherePreconfiguredLayer:function(a,c){if(c)return!0;if(a&&a.layerState){a=a.layerState;for(var e in a)if(a.hasOwnProperty(e)&&!0===a[e].selected)return!0}return!1},processColor:function(a){return a?new c(a):new c(d.defaultColor)},getScreenMiddle:function(a){var c=0,e=0;a&&(a.root?(a=h.getMarginBox(a.root),c=a.w/2,e=a.h/2):a.width&&a.height&&(c=a.width/2,e=a.height/2));return{left:c,top:e}},hideSelectorPopup:function(a){h.addClass(a,
"hide")},showSelectorPopup:function(a){h.removeClass(a,"hide")},hackToRefreshSwipe:function(a){setTimeout(r.hitch(a,function(){a.swipeDijit.swipe&&a.swipeDijit.swipe()}),200)},cleanHandlerPosition:function(){d.handlerPosition={top:null,bottom:null,left:null,right:null}},isCacheHandlerPosition:function(){return(d.handlerPosition.top||d.handlerPosition.bottom)&&(d.handlerPosition.left||d.handlerPosition.right)?!0:!1},saveHandlerPosition:function(a){a&&(d.handlerPosition.top=a.top,d.handlerPosition.bottom=
a.bottom,d.handlerPosition.left=a.left,d.handlerPosition.right=a.right)},setHandlerPosition:function(a,c,e){c.style&&"scope"===c.style?(d.handlerPosition.top&&(a.top=d.handlerPosition.top-9),d.handlerPosition.bottom&&(a.bottom=d.handlerPosition.bottom),d.handlerPosition.left&&(a.left=d.handlerPosition.left-9),d.handlerPosition.right&&(a.right=d.handlerPosition.right)):(d.handlerPosition.bottom&&(a.top=d.handlerPosition.bottom),d.handlerPosition.top&&(a.bottom=d.handlerPosition.top),d.handlerPosition.right&&
(a.left=d.handlerPosition.right),d.handlerPosition.left&&(a.right=d.handlerPosition.left));0>a.top&&(a.top=0);a.top>e.height&&(a.top=e.height);0>a.left&&(a.left=0);a.left>e.width&&(a.left=e.width)},getLayerNode:function(a){return a._heatmapManager&&a._heatmapManager.imageLayer&&a._heatmapManager.imageLayer._div||a._div}};return d})},"widgets/Swipe/MultSelector/MultSelector":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/query dojo/_base/html dojo/text!./MultSelector.html jimu/dijit/CheckBox dijit/form/Select dojox/form/CheckedMultiSelect dijit/form/ValidationTextBox xstyle/css!dojox/form/resources/CheckedMultiSelect.css".split(" "),
function(r,q,c,h,d,a,v,e,t,w){return q([h,d,a,r],{templateString:w,_LAST_VALUEL:"",postCreate:function(){this.inherited(arguments)},startup:function(){this.own(v(this.selector,"click",c.hitch(this,function(a){"INPUT"===a.target.nodeName&&this.selector.dropDownButton.toggleDropDown()})));this.own(v(this.selector,"change",c.hitch(this,function(a){this._updateMultSelectorLabel(this._getOptionsLabelsByValues(a));this._LAST_VALUEL.toString()!==a.toString()&&(this.selector.dropDownButton.toggleDropDown(),
this.selector.dropDownButton.toggleDropDown(),this.emit("change",a),this._LAST_VALUEL=a)})));this.inherited(arguments)},initOptions:function(a,c){this.disable();this._initMultSelectorLabel();var e=null;c&&(e=this.selector.getOptions());this.selector.removeOption(this.selector.getOptions());for(var d=[],f=0,m=a.length;f<m;f++){var k=a[f];this.selector.addOption(k);this._hasOptionMultSelected(k,c?e:a)&&d.push(k.value)}this.selector.set("value",d);this._updateMultSelectorLabel(this._getOptionsLabelsByValues(d));
this.enable()},setOptions:function(a){this.selector.set("options",a)},getOptions:function(){return this.selector.get("options")},reset:function(){this.selector.set("options",[{value:"",label:""}]);this.selector.reset()},setValue:function(a){this.setConfig(a)},setConfig:function(a){this._setMultSelectorEmpty();this.selector.set("value",a)},getConfig:function(){return this.selector.getValue()},disable:function(){this.selector.set("disabled",!0);this._DISABLED=!0},enable:function(){this.selector.set("disabled",
!1);this._DISABLED=!1},_initMultSelectorLabel:function(){this.selector.labelDiv&&(t.empty(this.selector.labelDiv),t.destroy(this.selector.labelDiv),this.selector.labelDiv=null);var a=e(".dijitButtonText",this.selector.dropDownButton.buttonNode)[0];t.addClass(a,"hide");this.selector.labelDiv=t.create("div",{"class":"dijitReset dijitInline dijitButtonText multselector-label-container"},a,"after");t.addClass(this.selector.labelDiv,"label-max-height");t.addClass(this.selector.dropDownMenu.domNode,"mult-selector-dropdown-max-height");
this._updateMultSelectorLabel([this.nls.defaultLayerHolder])},_setMultSelectorEmpty:function(){this.selector.set("value",[]);this._updateMultSelectorLabel([this.nls.defaultLayerHolder])},_updateMultSelectorLabel:function(a){t.empty(this.selector.labelDiv);a&&0!==a.length||this._setMultSelectorEmpty();for(var c=0,e=a.length;c<e;c++)t.create("div",{"class":"dijitReset dijitButtonText multselector-label",innerHTML:a[c]},this.selector.labelDiv)},_getOptionsLabelsByValues:function(a){for(var c=this.getOptions(),
e=[],d=0,f=c.length;d<f;d++)for(var m=c[d],k=0,y=a.length;k<y;k++)m.value===a[k]&&e.push(m.label);return e},_hasOptionMultSelected:function(a,c){for(var e=0,d=c.length;e<d;e++){var f=c[e];if(f.value===a.value&&!0===f.selected)return!0}return!1}})})},"esri/dijit/LayerSwipe":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/has ../kernel dijit/_WidgetBase dijit/_TemplatedMixin dojo/on dojo/text!./templates/LayerSwipe.html dojo/i18n!../nls/jsapi dojo/dom-class dojo/dom-style dojo/dnd/move dojo/dnd/Mover dojo/sniff dojo/dom-geometry ../geometry/Point dojo/Deferred dojo/promise/all".split(" "),
function(r,q,c,h,d,a,v,e,t,w,n,u,x,z,f,m,k,y,p){var B=q([z],{onFirstMove:function(b){var l=this.node.style,a,f=this.host;switch(l.position){case "relative":case "absolute":a=Math.round(parseFloat(l.left))||0;l=Math.round(parseFloat(l.top))||0;break;default:l.position="absolute",l=m.getMarginBox(this.node),a=l.l,l=l.t}this.marginBox.l=a-this.marginBox.l;this.marginBox.t=l-this.marginBox.t;if(f&&f.onFirstMove)f.onFirstMove(this,b);this.events.shift().remove()}});r=q("esri.dijit.LayerSwipe",[a,v,r],
{templateString:t,options:{theme:"LayerSwipe",layers:[],enabled:!0,type:"vertical",invertPlacement:!1,clip:9},constructor:function(b,l){b=c.mixin({},this.options,b);this.domNode=l;this._i18n=w;this.set("map",b.map);this.set("layers",b.layers);this.set("top",b.top);this.set("left",b.left);this.set("theme",b.theme);this.set("enabled",b.enabled);this.set("type",b.type);this.set("clip",b.clip);this.set("invertPlacement",b.invertPlacement);this.watch("theme",this._updateThemeWatch);this.watch("enabled",
this._enabled);this.watch("type",this._type);this.watch("invertPlacement",this._invertPlacement);this._css={handleContainer:"handleContainer",handle:"handle"};this._listeners=[]},startup:function(){this.inherited(arguments);this.map||(this.destroy(),console.log("LayerSwipe::map required"));this.set("layers",this.layers);this.layers.length||(this.destroy(),console.log("LayerSwipe::layer required"));this._allLoaded().then(c.hitch(this,function(){this._init()}),function(b){console.log("LayerSwipe::"+
b.message)})},destroy:function(){this._removeEvents();this._unclipLayers();this.inherited(arguments)},swipe:function(){this._swipe()},enable:function(){this.set("enabled",!0)},disable:function(){this.set("enabled",!1)},_allLoaded:function(){for(var b=[],l=0;l<this.layers.length;l++){"string"===typeof this.layers[l]&&(this.layers[l]=this.map.getLayer(this.layers[l]),this.layers[l]||console.log("LayerSwipe::Could not get layer by ID"));var a=new y;this.layers[l].loaded?a.resolve("layer loaded"):this._layerLoadedPromise(l,
a);b.push(a.promise)}var f=new y;if(this.map.loaded)f.resolve("map loaded");else e.once(this.map,"load",c.hitch(this,function(){f.resolve("map loaded")}));b.push(f.promise);return p(b)},_layerLoadedPromise:function(b,a){e.once(this.layers[b],"load",function(){a.resolve("layer loaded")})},_mb:function(){var b=m.getMarginBox(this.map.root);return{t:0,l:0,w:b.l+b.w,h:b.h+b.t}},_setInitialPosition:function(){var b,a,f,c,e,d,k;a=b=0;c=m.getMarginBox(this._moveableNode);f=this.get("type");e=this.get("top");
d=this.get("left");k=this.get("invertPlacement");"scope"===f?(a="undefined"!==typeof e?e:this.map.height/2-c.h/2,b="undefined"!==typeof d?d:this.map.width/2-c.w/2):"horizontal"===f?(a=this.map.height/4-c.h/2,a="undefined"!==typeof e?e:k?this.map.height-a:a):(b=this.map.width/4-c.w/2,b="undefined"!==typeof d?d:k?this.map.width-b:b);u.set(this._moveableNode,{top:a+"px",left:b+"px"})},_setSwipeType:function(){var b=this.get("moveable"),a=this.get("type");a&&(b&&b.destroy(),n.add(this._moveableNode,a),
b=new x.parentConstrainedMoveable(this._moveableNode,{area:"content",within:!0,handle:this._moveableNode,constraints:c.hitch(this,this._mb),mover:B}),this.set("moveable",b),this._setInitialPosition())},_init:function(){this._setSwipeType();this._setupEvents();this._enabled();this.set("loaded",!0);this.emit("load",{});this.swipe()},_removeEvents:function(){if(this._listeners&&this._listeners.length)for(var b=0;b<this._listeners.length;b++)this._listeners[b]&&this._listeners[b].remove();this._listeners=
[]},_repositionMover:function(){var b=m.getMarginBox(this._moveableNode);b&&(b.t>this.map.height||0>b.t||b.l>this.map.width||0>b.l)&&this._setInitialPosition()},_setupEvents:function(){this._removeEvents();this._mapResize=e.pausable(this.map,"resize",c.hitch(this,function(){this._repositionMover()}));this._listeners.push(this._mapResize);this._swipeMove=e.pausable(this.moveable,"Move",c.hitch(this,function(){this.swipe()}));this._listeners.push(this._swipeMove);this._swipePanEnd=e.pausable(this.map,
"pan-end",c.hitch(this,function(){this._swipe()}));this._listeners.push(this._swipePanEnd);this._mapUpdateStart=e.pausable(this.map,"update-start",c.hitch(this,function(){this._swipe()}));this._listeners.push(this._mapUpdateStart);this._mapUpdateEnd=e.pausable(this.map,"update-end",c.hitch(this,function(){this._swipe()}));this._listeners.push(this._mapUpdateEnd);this._swipePan=e.pausable(this.map,"pan",c.hitch(this,function(){this._swipe()}));this._listeners.push(this._swipePan);this._toolClick=e.pausable(this._moveableNode,
"click",c.hitch(this,function(b){if("scope"===this.get("type")){b=this._clickPosition(b);try{this.map.onClick(b,"other")}catch(l){console.log("LayerSwipe::scope click error")}this._clickCoords=null}}));this._listeners.push(this._toolClick);this._toolDblClick=e.pausable(this._moveableNode,"dblclick",c.hitch(this,function(b){if("scope"===this.get("type")){b=this._clickPosition(b);try{this.map.navigationManager.mouseEvents.onDblClick(b,"other")}catch(l){console.log("LayerSwipe::scope dblclick error")}this._clickCoords=
null}}));this._listeners.push(this._toolDblClick);this._evtCoords=e.pausable(this.moveable,"MouseDown",c.hitch(this,function(b){"scope"===this.get("type")&&(this._clickCoords={x:b.x,y:b.y})}));this._listeners.push(this._evtCoords)},_clickPosition:function(b){if(this._clickCoords&&this._clickCoords.x===b.x&&this._clickCoords.y===b.y){var a=m.position(this.map.root,!0),f=b.pageX-a.x,a=b.pageY-a.y;b.x=f;b.y=a;b.screenPoint={x:f,y:a};b.mapPoint=this.map.toMap(new k(f,a,this.map.spatialReference))}return b},
_getLayerNode:function(b){return b._heatmapManager&&b._heatmapManager.imageLayer&&b._heatmapManager.imageLayer._div||b._div},_positionValues:function(b){var a,f,c,e,d,k,g={layer:b,layerNode:this._getLayerNode(b),layerGraphics:b._heatmapManager?null:b.graphics,swipeType:this.get("type"),l:0,r:0,t:0,b:0};c=this.get("clip");k=this.get("invertPlacement");b=m.getMarginBox(this._moveableNode);if("vertical"===g.swipeType||"horizontal"===g.swipeType)g.layerNode&&(a=m.getMarginBox(g.layerNode),e=Math.abs(a.t),
d=Math.abs(a.l)),f=m.getMarginBox(this.map.root);"vertical"===g.swipeType?(k?a&&0<a.l?(g.l=b.l-d,g.r=this.map.width-d):a&&0>a.l?(g.l=b.l+d,g.r=this.map.width+d):(g.l=b.l,g.r=this.map.width):a&&0<a.l?(g.l=0-d,g.r=b.l-d):a&&0>a.l?(g.l=0+d,g.r=b.l+d):(g.l=0,g.r=b.l),a&&0<a.t?(g.t=0-e,g.b=f.h-e):a&&0>a.t?(g.t=0+e,g.b=f.h+e):(g.t=0,g.b=f.h)):"horizontal"===g.swipeType?(k?a&&0<a.t?(g.t=b.t-e,g.b=this.map.height-e):a&&0>a.t?(g.t=b.t+e,g.b=this.map.height+e):(g.t=b.t,g.b=this.map.height):a&&0<a.t?(g.t=0-
e,g.b=b.t-e):a&&0>a.t?(g.t=0+e,g.b=b.t+e):(g.t=0,g.b=b.t),a&&0<a.l?(g.l=0-d,g.r=f.w-d):a&&0>a.l?(g.l=0+d,g.r=f.w+d):(g.l=0,g.r=f.w)):"scope"===g.swipeType&&(g.layerGraphics?(g.l=b.l,g.r=b.w,g.t=b.t,g.b=b.h,"undefined"!==typeof c&&(g.l+=c,g.r+=-(2*c),g.t+=c,g.b+=-(2*c))):(g.l=b.l,g.r=g.l+b.w,g.t=b.t,g.b=g.t+b.h,"undefined"!==typeof c&&(g.l+=c,g.r+=-c,g.t+=c,g.b+=-c)));return g},_clipLayer:function(b){if(b.layerNode)if(b.layerGraphics){var a=b.layer._getTransform();a&&(a.hasOwnProperty("dx")&&(b.l+=
-a.dx),a.hasOwnProperty("dy")&&(b.t+=-a.dy));b.layerNode.setClip({x:b.l,y:b.t,width:b.r,height:b.b})}else{if(a=b.layerNode.style,b&&a&&b.hasOwnProperty("r")&&b.hasOwnProperty("l")&&b.hasOwnProperty("t")&&b.hasOwnProperty("b"))"css-transforms"===this.map.navigationMode?a&&(a=this._getTransformValue(a))&&(a=this._parseTransformValue(a),b.l-=a.x,b.r-=a.x,b.t-=a.y,b.b-=a.y):a&&"scope"===b.swipeType&&(a=this._parseScopeStyle(a),b.l-=a.x,b.r-=a.x,b.t-=a.y,b.b-=a.y),a=f("ie"),u.set(b.layerNode,"clip",a&&
8>a?"rect("+b.t+"px "+b.r+"px "+b.b+"px "+b.l+"px)":"rect("+b.t+"px, "+b.r+"px, "+b.b+"px, "+b.l+"px)")}else console.log("LayerSwipe::Invalid layer type")},_swipe:function(){if(this.get("loaded")&&this.get("enabled")){var a={layers:[]};if(this.layers&&this.layers.length)for(var f=0;f<this.layers.length;f++){var c=this._positionValues(this.layers[f]);this._clipLayer(c);a.layers.push({layer:this.layers[f],left:c.l,right:c.r,top:c.t,bottom:c.b})}this.emit("swipe",a)}},_getTransformValue:function(a){var b,
f;if(a){f=["transform","-webkit-transform","-ms-transform","-moz-transform","-o-transform"];for(var c=0;c<f.length&&!(b=a[f[c]]);c++){try{b=a.getPropertyValue(f[c])}catch(C){}if(b)break}}return b},_parseTransformValue:function(a){var b={x:0,y:0};-1!==a.toLowerCase().indexOf("translate3d")?a=a.replace("translate3d(","").replace(")","").replace(/px/ig,"").replace(/\s/i,"").split(","):-1!==a.toLowerCase().indexOf("translate")&&(a=a.replace("translate(","").replace(")","").replace(/px/ig,"").replace(/\s/i,
"").split(","));try{b.x=parseFloat(a[0]),b.y=parseFloat(a[1])}catch(A){console.log("LayerSwipe::Error parsing transform number")}return b},_parseScopeStyle:function(a){var b={x:0,y:0};try{b.x=parseFloat(a.left.replace(/px/ig,"").replace(/\s/i,"")),b.y=parseFloat(a.top.replace(/px/ig,"").replace(/\s/i,""))}catch(A){console.log("LayerSwipe::Error parsing div style float")}return b},_updateThemeWatch:function(a,f,c){n.remove(this.domNode,f);n.add(this.domNode,c)},_type:function(a,f){f&&n.remove(this._moveableNode,
f);this._setSwipeType();this._setupEvents();this.swipe()},_pauseEvents:function(){if(this._listeners&&this._listeners.length)for(var a=0;a<this._listeners.length;a++)this._listeners[a].pause()},_resumeEvents:function(){if(this._listeners&&this._listeners.length)for(var a=0;a<this._listeners.length;a++)this._listeners[a].resume()},_unclipLayers:function(){if(this.get("loaded")&&this.layers&&this.layers.length)for(var a=0;a<this.layers.length;a++){var c=this._getLayerNode(this.layers[a]),e=this.layers[a].graphics;
c&&(e?(c.setClip&&c.setClip(null),u.set(c.rawNode||c,"clip","")):(e=f("ie"),u.set(c,"clip",e&&8>e?"rect(auto auto auto auto)":"auto")))}},_invertPlacement:function(){this.swipe()},_enabled:function(){this.get("enabled")?(u.set(this.domNode,"display","block"),this._resumeEvents(),this.swipe()):(this._pauseEvents(),u.set(this.domNode,"display","none"),this._unclipLayers())}});h("extend-esri")&&c.setObject("dijit.LayerSwipe",r,d);return r})},"widgets/Swipe/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Swipe/MultSelector/MultSelector.html":'\x3cdiv class\x3d"mult-selector"\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dojox/form/CheckedMultiSelect" multiple\x3d"true" dropDown\x3d"true"\r\n\t\tdata-dojo-attach-point\x3d"selector"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:esri/dijit/templates/LayerSwipe.html":'\x3cdiv class\x3d"${theme}" role\x3d"presentation"\x3e\r\n    \x3cdiv title\x3d"${_i18n.widgets.layerSwipe.title}" data-dojo-attach-point\x3d"_moveableNode"\x3e\r\n        \x3cdiv class\x3d"${_css.handleContainer}"\x3e\r\n            \x3cdiv class\x3d"${_css.handle}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/Widget.html":'\x3cdiv class\x3d"jimu-widget-swipe"\x3e\r\n\t\x3cdiv class\x3d"swipe-layer-menu" data-dojo-attach-point\x3d"swipeLayersMenu"\x3e\r\n    \x3cdiv class\x3d"swipe-icon jimu-float-trailing" data-dojo-attach-point\x3d"swipeIcon"\x3e\r\n      \x3cdiv class\x3d"swipe-icon-inner" data-dojo-attach-point\x3d"swipeImg"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\t\t\x3cspan class\x3d"hint" data-dojo-attach-point\x3d"hintNode"\x3e\x3c/span\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"singleLayersContainer"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"singleSelectorContainer"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"multLayersContainer" class\x3d"hide mult-layers-container"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"multSelectorContainer"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"layerSwipe"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/css/style.css":'.mult-selector .dojoxCheckedMultiSelect{width: 100%;}.mult-selector .label-max-height{max-height: 84px; overflow-y: auto;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton{width: 100%; border: none !important; background-color: transparent !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .multselector-label-container{width: 100%;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .dijitButtonContents .multselector-label-container .multselector-label{width: 100%; height: 26px; text-align: left !important; padding: 4px 10px;}.jimu-rtl .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .dijitButtonContents .multselector-label-container .multselector-label{text-align: right !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitArrowButton {width: 16px; background-color: transparent;}.mult-selector .dojoxCheckedMultiSelectHover .dijitDownArrowButtonHover,.mult-selector .dojoxCheckedMultiSelectButtonFocused .dijitArrowButton{background-color: transparent !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonContents {border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu.mult-selector-dropdown-max-height{max-height: 260px; overflow-y: auto;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable {background-color: transparent;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem{height: 26px;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem,.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem td{border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitReset .dijitMenuItemIconCell{width: 10px; padding: 0 10px; padding: 3px 10px; border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dojoxCheckedMultiSelectSelectedOption{height: 26px;} .claro .LaunchpadTheme .mult-selector .dijitDropDownButton .dijitArrowButtonInner:before,.claro .LaunchpadTheme .mult-selector .dijitArrowButton:before {content: "n"; display: none;}.claro .LaunchpadTheme .jimu-widget-swipe .mult-selector .dijitArrowButton {padding: 0;}.jimu-widget-swipe {border-radius: 5px; max-width: 350px;}.jimu-widget-swipe.hide,.jimu-widget-swipe .hide{display: none;}.jimu-widget-swipe .swipe-icon{width: 30px; height: 100%; padding: 5px; cursor: pointer;}.jimu-widget-swipe .swipe-icon .swipe-icon-inner{width: 20px; height: 20px; background-position: center; background-repeat: no-repeat; background-image: url("images/loading.gif");}.jimu-widget-swipe .swipe-icon.swipe-icon-loaded{width: 50px; height: 18px; padding: 0; display: none;}.jimu-widget-swipe .swipe-layer-menu{min-width: 320px; font-size: 14px; color: #686868; padding: 14px; background: #fff; z-index: 50;}.jimu-rtl .jimu-widget-swipe .swipe-layer-menu{right: 32px; left: auto;}.jimu-widget-swipe .swipe-layer-menu .hint{display: inline-block; font-weight: bold; padding-bottom: 10px; width: 100%;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect {color: #7989a0; border-color: #d2dade;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelectHover,.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelectFocused {border-color: #759dc0;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitArrowButton{padding: 0; border: none;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitButtonContents {border-style: none; border-width: 0; background: #fafafc !important;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitArrowButton {border-style: none; border-width: 0; background: #fafafc;}.mult-layers-container{border: 1px solid #d2dade;}.DartTheme .jimu-widget-swipe .swipe-layer-menu{color: #fff; background: #222;}.DartTheme .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitButtonContents{background: transparent !important;}.DartTheme .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitArrowButton {background: transparent !important;}.DartTheme .jimu-widget-swipe .dijitValidationTextBoxLabel {color: #ccc;}',
"*now":function(r){r(['dojo/i18n!*preload*widgets/Swipe/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/html dojo/query dojo/on dojo/Deferred ./utils ./MultSelector/MultSelector jimu/BaseWidget jimu/LayerInfos/LayerInfos dijit/_WidgetsInTemplateMixin esri/dijit/LayerSwipe dijit/form/Select".split(" "),function(r,q,c,h,d,a,v,e,t,w,n,u,x,z){return r([w,u],{baseClass:"jimu-widget-swipe",swipeDijit:null,layerInfosObj:null,_loadDef:null,_obtainedLabelLayers:[],_LAST_SELECTED:null,getSwipeModeByConfig:function(){this._SWIPE_MODE="";this.config.layerMode&&
"mult"===this.config.layerMode?(this._SWIPE_MODE="mult",h.addClass(this.singleLayersContainer,"hide"),h.removeClass(this.multLayersContainer,"hide")):(this._SWIPE_MODE="single",h.removeClass(this.singleLayersContainer,"hide"),h.addClass(this.multLayersContainer,"hide"));return this._SWIPE_MODE},createSelector:function(){"mult"===this._SWIPE_MODE?(this.multLayersSelector=new t({nls:this.nls},this.multSelectorContainer),this.multLayersSelector.startup(),this.own(a(this.multLayersSelector,"change",c.hitch(this,
this.onSwipeLayersChange)))):(this.singleSelector=new z({style:"width:100%"},this.singleSelectorContainer),this.own(a(this.singleSelector,"Change",c.hitch(this,this.onSwipeLayersChange))),this.own(a(this.singleSelector,"Click",c.hitch(this,this.onSwipeLayersClick))),this.own(a(this.singleSelector.dropDown.domNode,"mouseenter",c.hitch(this,this.onDropMouseEnter))),this.own(a(this.singleSelector.dropDown.domNode,"mouseleave",c.hitch(this,this.onDropMouseLeave))),this.own(a(this.swipeLayersMenu,"mouseleave",
c.hitch(this,this.onMenuMouseLeave))))},setDefaultOptions:function(a,m){var f=[];if(this.config.layerState){if(e.isTherePreconfiguredLayer(this.config)){var d=this.config.layerState,p;for(p in d)if(d.hasOwnProperty(p)&&!0===d[p].selected){var h=this.layerInfosObj.getLayerInfoById(p);h&&h.isShowInMap()&&f.push({value:p,label:h.title})}}d=0;for(p=a.length;d<p;d++)h=a[d],e._isNewAddedLayer(h,this.layerInfosObj)&&h.isShowInMap()&&f.push({value:h.id,label:h.title})}else f=q.map(a,c.hitch(this,function(a){return{label:a.title,
value:a.id}}));var b;a=0;for(d=f.length;a<d;a++)if(p=f[a],this._LAST_SELECTED&&this._LAST_SELECTED.mode===this.config.layerMode)for(var h=0,l=this._LAST_SELECTED.selected.length;h<l;h++)p.value===this._LAST_SELECTED.selected[h]&&(p.selected=!0,b=p.value);else this._isDefaultSelectedOption(p)&&(p.selected=!0,b=p.value);m&&"mult"!==this._SWIPE_MODE&&(b=this.singleSelector.get("value"));"mult"===this._SWIPE_MODE?this.multLayersSelector.initOptions(f,m):this.singleSelector.set("options",f);this.disableSelectors();
m=this.getSelection();"mult"===this._SWIPE_MODE?m&&m.length&&0===m.length&&(b=this.multLayersSelector.getOptions())&&"undefined"!==b.length&&0<b.length&&b[0].value&&this.multLayersSelector.setValue(b[0].value):b?this.singleSelector.set("value",b):m&&m.length&&1===m.length&&this.singleSelector.options&&"undefined"!==this.singleSelector.options.length&&0<this.singleSelector.options.length&&this.singleSelector.options[0].value?this.singleSelector.set("value",this.singleSelector.options[0].value):this.singleSelector.set("value",
null);this._LAST_SELECTED={mode:this._SWIPE_MODE,selected:this.getSelection()};this.enableSelectors();this.toggleSelectorPopup()},_isSwipeBaseMap:function(){var a=this.getSelection();if(a&&a.length)for(var c=0,e=a.length;c<e;c++){var d=this.layerInfosObj.getLayerInfoById(a[c]);if(d&&d.isShowInMap())return!1}return!0},_isDefaultSelectedOption:function(a){var f=[];"mult"===this._SWIPE_MODE?f=this.config.defaultLayers:f.push(this.config.layer);for(var c=0,e=f.length;c<e;c++)if(f[c]===a.value)return!0;
return!1},toggleSelectorPopup:function(){e.showSelectorPopup(this.domNode);var a=this.getOptions();a&&("mult"===this._SWIPE_MODE?0===a.length&&e.hideSelectorPopup(this.domNode):0!==a.length&&1!==a.length||e.hideSelectorPopup(this.domNode))},disableSelectors:function(){"mult"===this._SWIPE_MODE?this.multLayersSelector.disable():this.singleSelector.set("disabled",!0)},enableSelectors:function(){"mult"===this._SWIPE_MODE?this.multLayersSelector.enable():this.singleSelector.set("disabled",!1)},getSelection:function(){var a=
[];"mult"===this._SWIPE_MODE?a=this.multLayersSelector.getConfig():a.push(this.singleSelector.get("value"));return a},isSelected:function(a,c){c||(c=this.getSelection());for(var f=0,e=c.length;f<e;f++)if(a===c[f])return!0;return!1},getOptions:function(){var a=[];return a="mult"===this._SWIPE_MODE?this.multLayersSelector.getOptions():this.singleSelector.getOptions()},setSelection:function(){},onSelectorChange:function(){},_removeSingleSelectorOption:function(a){this.singleSelector.removeOption(a);
0===this.singleSelector.getOptions().length&&(this.singleSelector.set("options",[{value:"",label:""}]),this.singleSelector.reset())},postCreate:function(){this.inherited(arguments);this.config.style||(this.config.style="vertical");this.config.defaultLayers||(this.config.defaultLayers=[]);e.cleanHandlerPosition();this.getSwipeModeByConfig();this.createSelector();this.own(a(this.map,"layer-add",c.hitch(this,this._onMainMapBasemapChange)))},_enableSwipe:function(){this._obtainedLabelLayers&&this._obtainedLabelLayers.length&&
0<this._obtainedLabelLayers.length&&(this._obtainedLabelLayers=[]);this.swipeDijit.enable()},_disableSwipe:function(){this.swipeDijit&&this.swipeDijit.disable&&(this.swipeDijit.disable(),q.forEach(this._obtainedLabelLayers,c.hitch(this,function(a){a.restoreLabelControl()})))},onOpen:function(){!0!==this._isTestSizeFlag&&this._loadLayerInfos().then(c.hitch(this,function(){var a=e.getVisibleLayerInfos(this.layerInfosObj);this.setDefaultOptions(a);this.createSwipeDijit()}))},onClose:function(){!0!==
this._isTestSizeFlag&&(this._LAST_SELECTED={mode:this._SWIPE_MODE,selected:this.getSelection()},this._loadDef.isResolved()?this._disableSwipe():this._loadDef.isFulfilled()||this._loadDef.cancel())},createSwipeDijit:function(){this.destroySwipeDijit();var a=[],d=this.getSelection();if(0===d.length)a=this._getLayerParams(null);else if("mult"===this._SWIPE_MODE)for(var k=0,n=d.length;k<n;k++)a=a.concat(this._getLayerParams(d[k]));else a=this._getLayerParams(d[0]);d={type:this.config.style||"vertical",
map:this.map,layers:a};e.isCacheHandlerPosition()?e.setHandlerPosition(d,this.config,this.map):(k=e.getScreenMiddle(this.map),d.top=k.top,d.left=k.left,"scope"===this.config.style&&(d.top-=130,d.left-=130));this.swipeDijit=new x(d,this.layerSwipe);this.swipeDijit.startup();this._setHandleColor();this._enableSwipe();h.place(this.swipeDijit.domNode,this.map.root,"before");this._autoHideInfoWindow(a);this.swipeDijit.on("swipe",c.hitch(this,function(a){var c=q.map(a.layers,function(a){return a.layer});
if(a&&a.layers[0]){var b=e.getLayerNode(a.layers[0].layer);b&&b.style&&"css-transforms"===this.map.navigationMode&&(a.layers[0].right-=a.layers[0].left,a.layers[0].left=0,a.layers[0].bottom-=a.layers[0].top,a.layers[0].top=0)}e.saveHandlerPosition(a.layers[0]);this._autoHideInfoWindow(c)}));e.hackToRefreshSwipe(this)},_getLayerParams:function(a){var f=[];this._isSwipeBaseMap()?(a=this.layerInfosObj.getBasemapLayers(),q.forEach(a,c.hitch(this,function(a){f.push(this.map.getLayer(a.id))}))):(a=this.layerInfosObj.getLayerInfoById(a))&&
a.traversal?a.traversal(c.hitch(this,function(a){var c=this.map.getLayer(a.id);c&&(f.push(c),this._obtainLabelControl(a,f))})):(a=this.layerInfosObj.getBasemapLayers(),q.forEach(a,c.hitch(this,function(a){f.push(this.map.getLayer(a.id))})));return f},destroySwipeDijit:function(){if(this.swipeDijit&&this.swipeDijit.destroy){try{this.swipeDijit.destroy()}catch(f){console.log(f)}this.swipeDijit=null;this._restoreAllLabelControl();this.layerSwipe=h.create("div",{},this.swipeLayersMenu,"after")}},onSwipeLayersChange:function(){this.swipeDijit&&
("mult"===this._SWIPE_MODE?this.createSwipeDijit():(this.createSwipeDijit(),e.zoomToCurrentLayer(this)),this.toggleSelectorPopup(),this.initSwipeLayersUi())},onLayerInfosIsShowInMapChanged:function(){if(this.swipeDijit&&this.swipeDijit.enabled){var a=this.getSelection();if("mult"!==this._SWIPE_MODE){if(a&&a[0]&&""!==a[0]){var a=a[0],c=this.layerInfosObj.getLayerInfoById(a);c&&!c.isShowInMap()&&this._removeSingleSelectorOption(a)}a=this.getSelection()}a=e.getVisibleLayerInfos(this.layerInfosObj,a);
this.setDefaultOptions(a,!0)}},_onMainMapBasemapChange:function(a){a.layer&&a.layer._basemapGalleryLayerType&&(a=this.getOptions(),a&&0<a.length||!this._loadDef.isResolved()||(a=e.getVisibleLayerInfos(this.layerInfosObj),this.setDefaultOptions(a),this.createSwipeDijit()))},onLayerInfosChanged:function(a,c,d){if(this.swipeDijit&&this.swipeDijit.enabled){var f=this.getSelection();a=e.getVisibleLayerInfos(this.layerInfosObj);var h=!1;f&&f[0]&&(h=!0);"added"===c?(c=d.id,this._LAST_SELECTED.selected=[],
this._LAST_SELECTED.selected.push(c),this.setDefaultOptions(a,!0),!1===h&&("mult"!==this._SWIPE_MODE?this.singleSelector.set("value",c):this.multLayersSelector.setValue(c))):"removed"===c&&(c=d.id,d=this.isSelected(c),a=e.getVisibleLayerInfos(this.layerInfosObj),d?(this._LAST_SELECTED=null,"mult"!==this._SWIPE_MODE?(this._removeSingleSelectorOption(c),this.setDefaultOptions(a),this.createSwipeDijit()):this.setDefaultOptions(a)):"mult"!==this._SWIPE_MODE?this._removeSingleSelectorOption(c):this.setDefaultOptions(a))}},
destroy:function(){this.destroySwipeDijit();this.inherited(arguments)},_loadLayerInfos:function(){var d=new v;this._loadDef=d;this._loadDef.isResolved()?d.resolve():n.getInstance(this.map,this.map.itemInfo).then(c.hitch(this,function(e){d.isCanceled()||(this.layerInfosObj=e,this.own(a(e,"layerInfosChanged",c.hitch(this,this.onLayerInfosChanged))),this.own(a(e,"layerInfosIsShowInMapChanged",c.hitch(this,this.onLayerInfosIsShowInMapChanged))),this.hintNode.innerHTML="scope"===this.config.style?this.nls.spyglassText:
this.nls.swipeText,h.addClass(this.swipeIcon,"swipe-icon-loaded"),d.resolve())}));return d},_autoHideInfoWindow:function(a){e.shouldHideInfoWindow(a,this)&&this.map.infoWindow.hide()},_obtainLabelControl:function(a,c){var d=a.obtainLabelControl();d&&(c.push(d),this._obtainedLabelLayers.push(a))},_restoreAllLabelControl:function(){q.forEach(this._obtainedLabelLayers,c.hitch(this,function(a){a.restoreLabelControl()}));this._obtainedLabelLayers=[]},_setHandleColor:function(){if(this.swipeDijit&&"scope"!==
this.config.style){var a=this.swipeDijit.moveable.node,c=d(".handleContainer",this.esriTimeSlider)[0],k=d(".handle",c)[0];a&&h.setStyle(a,"backgroundColor",e.processColor(this.config.handleColor).toHex());c&&h.setStyle(c,"backgroundColor",e.processColor(this.config.handleColor).toHex());k&&h.setStyle(k,"backgroundColor",e.processColor(this.config.handleColor).toHex())}},initSwipeLayersUi:function(){var a;a="mult"===this._SWIPE_MODE?d(".dojoxCheckedMultiSelect\x3etable",this.multLayersSelector.domNode)[0]:
this.singleSelector.domNode;a=h.getMarginBox(a);350<a.w+28?h.setStyle(this.domNode,"maxWidth",a.w+28+"px"):h.setStyle(this.domNode,"maxWidth","")},onDropMouseEnter:function(){this._mouseOnDropDown=!0},onDropMouseLeave:function(){this._mouseOnDropDown=!1;this.singleSelector.dropDown.onCancel()},onMenuMouseLeave:function(){setTimeout(c.hitch(this,function(){if(!this._mouseOnDropDown)this.singleSelector.dropDown.onCancel()}),10)},onSwipeLayersClick:function(){if(!this.singleSelector.disabled){var a=
h.getMarginBox(this.singleSelector.dropDown.domNode);350<a.w+28&&h.setStyle(this.domNode,"maxWidth",a.w+28+"px")}}})});